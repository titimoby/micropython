

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>BBC micro:bit MicroPython 0.0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="None" href="index.html#document-index"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html#document-index" class="icon icon-home"> BBC micro:bit MicroPython
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/hello">Hello, World!</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/images">Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/buttons">Buttons</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/io">Input/Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/music">Music</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/random">Random</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/movement">Movement</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/gestures">Gestures</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/direction">Direction</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/storage">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/speech">Speech</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/network">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/radio">Radio</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorials/next">Next Steps</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-microbit_micropython_api">micro:bit Micropython API</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-microbit">Microbit Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-accelerometer">Accelerometer</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ble">Bluetooth</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-button">Buttons</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-compass">Compass</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-display">Display</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-filesystem">Local Persistent File System</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-i2c">I²C</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-image">Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-music">Music</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-neopixel">NeoPixel</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-os">The <code class="docutils literal"><span class="pre">os</span></code>  Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pin">Input/Output Pins</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-radio">Radio</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-random">Random Number Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-speech">Speech</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-spi">SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-uart">UART</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-devguide/installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-devguide/flashfirmware">Flashing Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-devguide/repl">Accessing the REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-devguide/devfaq">Developer FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-devguide/contributing">Contributing</a></li>
</ul>
<p class="caption"><span class="caption-text">Indices and tables</span></p>
<ul class="simple">
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html#document-index">BBC micro:bit MicroPython</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html#document-index">Docs</a> &raquo;</li>
      
    <li>BBC micro:bit MicroPython 0.0.1 documentation</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bbc-micro-bit-documentation-micropython">
<h1>BBC micro:bit documentation MicroPython<a class="headerlink" href="#bbc-micro-bit-documentation-micropython" title="Permalink to this headline">¶</a></h1>
<p>Bienvenue!</p>
<p>La BBC micro:bit est un petit objet intelligent pour les enfants. Un des
langages qu&#8217;il comprend est le fameux langage de programmation Python. La
version de Python qui tourne sur la BBC micro:bit est appellée MicroPython.</p>
<p>This documentation includes lessons for teachers
and API documentation for developers (check out the index on the left). We hope
you enjoy developing for the BBC micro:bit using MicroPython.</p>
<p>If you&#8217;re a new programmer, teacher or unsure where to start, begin with the tutorials.</p>
<img alt="_images/comic.png" src="_images/comic.png" />
<p>To get involved with the community subscribe to the <a class="reference external" href="mailto:microbit&#37;&#52;&#48;python&#46;org">microbit<span>&#64;</span>python<span>&#46;</span>org</a>
mailing list (<a class="reference external" href="https://mail.python.org/mailman/listinfo/microbit">https://mail.python.org/mailman/listinfo/microbit</a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This project is under active development. Please help other
developers by adding tips, how-tos, and Q&amp;A to this document.
Thanks!</p>
</div>
<p>Projects related to MicroPython on the BBC micro:bit include:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/ntoll/mu">Mu</a> - a simple code editor for kids, teachers and beginner programmers. Probably the easiest way for people to program MicroPython on the BBC micro:bit.</li>
<li><a class="reference external" href="https://uflash.readthedocs.io/en/latest/">uFlash</a> - a command line tool for flashing raw Python scripts onto a BBC micro:bit.</li>
</ul>
<div class="toctree-wrapper compound" id="tutorials">
<span id="document-tutorials/introduction"></span><div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>We suggest you download and use the <a class="reference external" href="http://codewith.mu/">mu editor</a> when
working through these tutorials. Instructions for downloading and installing
Mu are on its website. You may need to install a driver, depending on your
platform (instruction are on the website).</p>
<p>Mu works with Windows, OSX and Linux.</p>
<p>Once Mu is installed connect your micro:bit to your computer via a USB lead.</p>
<p>Write your script in the editor window and click the &#8220;Flash&#8221; button to transfer
it to the micro:bit. If it doesn&#8217;t work, make sure your micro:bit appears as
a USB storage device in your file system explorer.</p>
<div class="toctree-wrapper compound" id="tutorials">
<span id="document-tutorials/hello"></span><div class="section" id="hello-world">
<h3>Hello, World!<a class="headerlink" href="#hello-world" title="Permalink to this headline">¶</a></h3>
<p>The traditional way to start programming in a new language is to get your
computer to say, &#8220;Hello, World!&#8221;.</p>
<img alt="_images/scroll-hello1.gif" src="_images/scroll-hello1.gif" />
<p>This is easy with MicroPython:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Each line does something special. The first line:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>...tells MicroPython to get all the stuff it needs to work with the BBC
micro:bit. All this stuff is in a module called <code class="docutils literal"><span class="pre">microbit</span></code> (a module
is a library of pre-existing code). When you <code class="docutils literal"><span class="pre">import</span></code> something you&#8217;re telling
MicroPython that you want to use it, and <code class="docutils literal"><span class="pre">*</span></code> is Python&#8217;s way to say
<em>everything</em>. So, <code class="docutils literal"><span class="pre">from</span> <span class="pre">microbit</span> <span class="pre">import</span> <span class="pre">*</span></code> means, in English, &#8220;I want to be
able to use everything from the microbit code library&#8221;.</p>
<p>The second line:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>...tells MicroPython to use the display to scroll the string of characters
&#8220;Hello, World!&#8221;. The <code class="docutils literal"><span class="pre">display</span></code> part of that line is an <em>object</em> from the
<code class="docutils literal"><span class="pre">microbit</span></code> module that represents the device&#8217;s physical display (we say
&#8220;object&#8221; instead of &#8220;thingy&#8221;, &#8220;whatsit&#8221; or &#8220;doodah&#8221;). We can tell the display
to do things with a full-stop <code class="docutils literal"><span class="pre">.</span></code> followed by what looks like a command (in
fact it&#8217;s something we call a <em>method</em>). In this case we&#8217;re using the
<code class="docutils literal"><span class="pre">scroll</span></code> method. Since <code class="docutils literal"><span class="pre">scroll</span></code> needs to know what characters to scroll
across the physical display we specify them between double quotes (<code class="docutils literal"><span class="pre">&quot;</span></code>)
within parenthesis (<code class="docutils literal"><span class="pre">(</span></code> and <code class="docutils literal"><span class="pre">)</span></code>). These are called the <em>arguments</em>. So,
<code class="docutils literal"><span class="pre">display.scroll(&quot;Hello,</span> <span class="pre">World!&quot;)</span></code> means, in English, &#8220;I want you to use the
display to scroll the text &#8216;Hello, World!&#8217;&#8221;. If a method doesn&#8217;t need any
arguments we make this clear by using empty parenthesis like this: <code class="docutils literal"><span class="pre">()</span></code>.</p>
<p>Copy the &#8220;Hello, World!&#8221; code into your editor and flash it onto the device.
Can you work out how to change the message? Can you make it say hello to you?
For example, I might make it say &#8220;Hello, Nicholas!&#8221;. Here&#8217;s a clue, you need to
change the scroll method&#8217;s argument.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>It may not work. :-)</p>
<p>This is where things get fun and MicroPython tries to be helpful. If
it encounters an error it will scroll a helpful message on the micro:bit&#8217;s
display. If it can, it will tell you the line number for where the error
can be found.</p>
<p>Python expects you to type <strong>EXACTLY</strong> the right thing. So, for instance,
<code class="docutils literal"><span class="pre">Microbit</span></code>, <code class="docutils literal"><span class="pre">microbit</span></code> and <code class="docutils literal"><span class="pre">microBit</span></code> are all different things to
Python. If MicroPython complains about a <code class="docutils literal"><span class="pre">NameError</span></code> it&#8217;s probably
because you&#8217;ve typed something inaccurately. It&#8217;s like the difference
between referring to &#8220;Nicholas&#8221; and &#8220;Nicolas&#8221;. They&#8217;re two different people
but their names look very similar.</p>
<p>If MicroPython complains about a <code class="docutils literal"><span class="pre">SyntaxError</span></code> you&#8217;ve simply typed code
in a way that MicroPython can&#8217;t understand. Check you&#8217;re not missing any
special characters like <code class="docutils literal"><span class="pre">&quot;</span></code> or <code class="docutils literal"><span class="pre">:</span></code>. It&#8217;s like putting. a full stop in
the middle of a sentence. It&#8217;s hard to understand exactly what you mean.</p>
<p class="last">Your microbit may stop responding: you cannot flash new code to it or
enter commands into the REPL. If this happens, try power cycling it. That
is, unplug the USB cable (and battery cable if it&#8217;s connected), then plug
the cable back in again. You may also need to quit and re-start your code
editor application.</p>
</div>
</div>
<span id="document-tutorials/images"></span><div class="section" id="images">
<h3>Images<a class="headerlink" href="#images" title="Permalink to this headline">¶</a></h3>
<p>MicroPython is about as good at art as you can be if the only thing you have is
a 5x5 grid of red LEDs (light emitting diodes - the things that light up on the
front of the device). MicroPython gives you quite a lot of control over the
display so you can create all sorts of interesting effects.</p>
<p>MicroPython comes with lots of built-in pictures to show on the display.
For example, to make the device appear happy you type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">HAPPY</span><span class="p">)</span>
</pre></div>
</div>
<p>I suspect you can remember what the first line does. The second line uses the
<code class="docutils literal"><span class="pre">display</span></code> object to <code class="docutils literal"><span class="pre">show</span></code> a built-in image. The happy image we want to
display is a part of the <code class="docutils literal"><span class="pre">Image</span></code> object and called <code class="docutils literal"><span class="pre">HAPPY</span></code>. We tell
<code class="docutils literal"><span class="pre">show</span></code> to use it by putting it between the parenthesis (<code class="docutils literal"><span class="pre">(</span></code> and <code class="docutils literal"><span class="pre">)</span></code>).</p>
<img alt="_images/happy.png" src="_images/happy.png" />
<p>Here&#8217;s a list of the built-in images:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">Image.HEART</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.HEART_SMALL</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.HAPPY</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SMILE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SAD</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.CONFUSED</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.ANGRY</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.ASLEEP</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SURPRISED</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SILLY</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.FABULOUS</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.MEH</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.YES</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.NO</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.CLOCK12</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK11</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK10</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK9</span></code>,
<code class="docutils literal"><span class="pre">Image.CLOCK8</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK7</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK6</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK5</span></code>,
<code class="docutils literal"><span class="pre">Image.CLOCK4</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK3</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK2</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK1</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.ARROW_N</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_NE</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_E</span></code>,
<code class="docutils literal"><span class="pre">Image.ARROW_SE</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_S</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_SW</span></code>,
<code class="docutils literal"><span class="pre">Image.ARROW_W</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_NW</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TRIANGLE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TRIANGLE_LEFT</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.CHESSBOARD</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.DIAMOND</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.DIAMOND_SMALL</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SQUARE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SQUARE_SMALL</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.RABBIT</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.COW</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.MUSIC_CROTCHET</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.MUSIC_QUAVER</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.MUSIC_QUAVERS</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.PITCHFORK</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.XMAS</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.PACMAN</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TARGET</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TSHIRT</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.ROLLERSKATE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.DUCK</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.HOUSE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TORTOISE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.BUTTERFLY</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.STICKFIGURE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.GHOST</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SWORD</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.GIRAFFE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SKULL</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.UMBRELLA</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SNAKE</span></code></li>
</ul>
</div></blockquote>
<p>There&#8217;s quite a lot! Why not modify the code that makes the micro:bit look
happy to see what some of the other built-in images look like? (Just replace
<code class="docutils literal"><span class="pre">Image.HAPPY</span></code> with one of the built-in images listed above.)</p>
<div class="section" id="diy-images">
<h4>DIY Images<a class="headerlink" href="#diy-images" title="Permalink to this headline">¶</a></h4>
<p>Of course, you want to make your own image to display on the micro:bit, right?</p>
<p>That&#8217;s easy.</p>
<p>Each LED pixel on the physical display can be set to one of ten values. If a
pixel is set to <code class="docutils literal"><span class="pre">0</span></code> (zero) then it&#8217;s off. It literally has zero brightness.
However, if it is set to <code class="docutils literal"><span class="pre">9</span></code> then it is at its brightest level. The values
<code class="docutils literal"><span class="pre">1</span></code> to <code class="docutils literal"><span class="pre">8</span></code> represent the brightness levels between off (<code class="docutils literal"><span class="pre">0</span></code>) and full on
(<code class="docutils literal"><span class="pre">9</span></code>).</p>
<p>Armed with this information, it&#8217;s possible to create a new image like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">boat</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;05050:&quot;</span>
             <span class="s2">&quot;05050:&quot;</span>
             <span class="s2">&quot;05050:&quot;</span>
             <span class="s2">&quot;99999:&quot;</span>
             <span class="s2">&quot;09990&quot;</span><span class="p">)</span>

<span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">boat</span><span class="p">)</span>
</pre></div>
</div>
<p>(When run, the device should display an old-fashioned &#8220;Blue Peter&#8221; sailing ship
with the masts dimmer than the boat&#8217;s hull.)</p>
<p>Have you figured out how to draw a picture? Have you noticed that each line of
the physical display is represented by a line of numbers ending in <code class="docutils literal"><span class="pre">:</span></code> and
enclosed between <code class="docutils literal"><span class="pre">&quot;</span></code> double quotes? Each number specifies a brightness.
There are five lines of five numbers so it&#8217;s possible to specify the individual
brightness for each of the five pixels on each of the five lines on the
physical display. That&#8217;s how to create a new image.</p>
<p>Simple!</p>
<p>In fact, you don&#8217;t need to write this over several lines. If you think you can
keep track of each line, you can rewrite it like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">boat</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;05050:05050:05050:99999:09990&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="animation">
<h4>Animation<a class="headerlink" href="#animation" title="Permalink to this headline">¶</a></h4>
<p>Static images are fun, but it&#8217;s even more fun to make them move. This is also
amazingly simple to do with MicroPython ~ just use a list of images!</p>
<p>Here is a shopping list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Eggs</span>
<span class="n">Bacon</span>
<span class="n">Tomatoes</span>
</pre></div>
</div>
<p>Here&#8217;s how you&#8217;d represent this list in Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">shopping</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Eggs&quot;</span><span class="p">,</span> <span class="s2">&quot;Bacon&quot;</span><span class="p">,</span> <span class="s2">&quot;Tomatoes&quot;</span> <span class="p">]</span>
</pre></div>
</div>
<p>I&#8217;ve simply created a list called <code class="docutils literal"><span class="pre">shopping</span></code> and it contains three items.
Python knows it&#8217;s a list because it&#8217;s enclosed in square brackets (<code class="docutils literal"><span class="pre">[</span></code> and
<code class="docutils literal"><span class="pre">]</span></code>). Items in the list are separated by a comma (<code class="docutils literal"><span class="pre">,</span></code>) and in this instance
the items are three strings of characters: <code class="docutils literal"><span class="pre">&quot;Eggs&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;Bacon&quot;</span></code> and
<code class="docutils literal"><span class="pre">&quot;Tomatoes&quot;</span></code>. We know they are strings of characters because they&#8217;re enclosed
in quotation marks <code class="docutils literal"><span class="pre">&quot;</span></code>.</p>
<p>You can store anything in a list with Python. Here&#8217;s a list of numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">primes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Numbers don&#8217;t need to be quoted since they represent a value (rather than a
string of characters). It&#8217;s the difference between <code class="docutils literal"><span class="pre">2</span></code> (the numeric value
2) and <code class="docutils literal"><span class="pre">&quot;2&quot;</span></code> (the character/digit representing the number 2). Don&#8217;t worry
if this doesn&#8217;t make sense right now. You&#8217;ll soon get used to it.</p>
</div>
<p>It&#8217;s even possible to store different sorts of things in the same list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mixed_up_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hello!&quot;</span><span class="p">,</span> <span class="mf">1.234</span><span class="p">,</span> <span class="n">Image</span><span class="o">.</span><span class="n">HAPPY</span><span class="p">]</span>
</pre></div>
</div>
<p>Notice that last item? It was an image!</p>
<p>We can tell MicroPython to animate a list of images. Luckily we have a
couple of lists of images already built in. They&#8217;re called <code class="docutils literal"><span class="pre">Image.ALL_CLOCKS</span></code>
and <code class="docutils literal"><span class="pre">Image.ALL_ARROWS</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">ALL_CLOCKS</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>As with a single image, we use <code class="docutils literal"><span class="pre">display.show</span></code> to show it on the
device&#8217;s display. However, we tell MicroPython to use <code class="docutils literal"><span class="pre">Image.ALL_CLOCKS</span></code> and
it understands that it needs to show each image in the list, one after the
other. We also tell MicroPython to keep looping over the list of images (so
the animation lasts forever) by saying <code class="docutils literal"><span class="pre">loop=True</span></code>. Furthermore, we tell it
that we want the delay between each image to be only 100 milliseconds (a tenth
of a second) with the argument <code class="docutils literal"><span class="pre">delay=100</span></code>.</p>
<p>Can you work out how to animate over the <code class="docutils literal"><span class="pre">Image.ALL_ARROWS</span></code> list? How do you
avoid looping forever (hint: the opposite of <code class="docutils literal"><span class="pre">True</span></code> is <code class="docutils literal"><span class="pre">False</span></code> although
the default value for <code class="docutils literal"><span class="pre">loop</span></code> is <code class="docutils literal"><span class="pre">False</span></code>)? Can you change the speed of the
animation?</p>
<p>Finally, here&#8217;s how to create your own animation. In my example I&#8217;m going to
make my boat sink into the bottom of the display:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">boat1</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;05050:&quot;</span>
              <span class="s2">&quot;05050:&quot;</span>
              <span class="s2">&quot;05050:&quot;</span>
              <span class="s2">&quot;99999:&quot;</span>
              <span class="s2">&quot;09990&quot;</span><span class="p">)</span>

<span class="n">boat2</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;05050:&quot;</span>
              <span class="s2">&quot;05050:&quot;</span>
              <span class="s2">&quot;05050:&quot;</span>
              <span class="s2">&quot;99999&quot;</span><span class="p">)</span>

<span class="n">boat3</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;05050:&quot;</span>
              <span class="s2">&quot;05050:&quot;</span>
              <span class="s2">&quot;05050&quot;</span><span class="p">)</span>

<span class="n">boat4</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;05050:&quot;</span>
              <span class="s2">&quot;05050&quot;</span><span class="p">)</span>

<span class="n">boat5</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;05050&quot;</span><span class="p">)</span>

<span class="n">boat6</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000:&quot;</span>
              <span class="s2">&quot;00000&quot;</span><span class="p">)</span>

<span class="n">all_boats</span> <span class="o">=</span> <span class="p">[</span><span class="n">boat1</span><span class="p">,</span> <span class="n">boat2</span><span class="p">,</span> <span class="n">boat3</span><span class="p">,</span> <span class="n">boat4</span><span class="p">,</span> <span class="n">boat5</span><span class="p">,</span> <span class="n">boat6</span><span class="p">]</span>
<span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">all_boats</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<p>Here&#8217;s how the code works:</p>
<ul class="simple">
<li>I create six <code class="docutils literal"><span class="pre">boat</span></code> images in exactly the same way I described above.</li>
<li>Then, I put them all into a list that I call <code class="docutils literal"><span class="pre">all_boats</span></code>.</li>
<li>Finally, I ask <code class="docutils literal"><span class="pre">display.show</span></code> to animate the list with a delay of 200 milliseconds.</li>
<li>Since I&#8217;ve not set <code class="docutils literal"><span class="pre">loop=True</span></code> the boat will only sink once (thus making my animation scientifically accurate). :-)</li>
</ul>
<p>What would you animate? Can you animate special effects? How would you make an
image fade out and then fade in again?</p>
</div>
</div>
<span id="document-tutorials/buttons"></span><div class="section" id="buttons">
<h3>Buttons<a class="headerlink" href="#buttons" title="Permalink to this headline">¶</a></h3>
<p>So far we have created code that makes the device do something. This is called
<em>output</em>. However, we also need the device to react to things. Such things are
called <em>inputs</em>.</p>
<p>It&#8217;s easy to remember: output is what the device puts out to the world
whereas input is what goes into the device for it to process.</p>
<p>The most obvious means of input on the micro:bit are its two buttons, labelled
<code class="docutils literal"><span class="pre">A</span></code> and <code class="docutils literal"><span class="pre">B</span></code>. Somehow, we need MicroPython to react to button presses.</p>
<p>This is remarkably simple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">sleep</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">button_a</span><span class="o">.</span><span class="n">get_presses</span><span class="p">()))</span>
</pre></div>
</div>
<p>All this script does is sleep for ten thousand milliseconds (i.e. 10 seconds)
and then scrolls the number of times you pressed button <code class="docutils literal"><span class="pre">A</span></code>. That&#8217;s it!</p>
<p>While it&#8217;s a pretty useless script, it introduces a couple of interesting new
ideas:</p>
<ol class="arabic simple">
<li>The <code class="docutils literal"><span class="pre">sleep</span></code> <em>function</em> will make the micro:bit sleep for a certain number
of milliseconds. If you want a pause in your program, this is how to do it.
A <em>function</em> is just like a <em>method</em>, but it isn&#8217;t attached by a dot to an
<em>object</em>.</li>
<li>There is an object called <code class="docutils literal"><span class="pre">button_a</span></code> and it allows you to get the number
of times it has been pressed with the <code class="docutils literal"><span class="pre">get_presses</span></code> <em>method</em>.</li>
</ol>
<p>Since <code class="docutils literal"><span class="pre">get_presses</span></code> gives a numeric value and <code class="docutils literal"><span class="pre">display.scroll</span></code> only
displays characters, we need to convert the numeric value into a string of
characters. We do this with the <code class="docutils literal"><span class="pre">str</span></code> function (short for &#8220;string&#8221; ~ it
converts things into strings of characters).</p>
<p>The third line is a bit like an onion. If the parenthesis are the
onion skins then you&#8217;ll notice that <code class="docutils literal"><span class="pre">display.scroll</span></code> contains <code class="docutils literal"><span class="pre">str</span></code> that
itself contains <code class="docutils literal"><span class="pre">button_a.get_presses</span></code>. Python attempts to work out the
inner-most answer first before starting on the next layer out. This is called
<em>nesting</em> - the coding equivalent of a Russian Matrioshka doll.</p>
<img alt="_images/matrioshka.jpg" src="_images/matrioshka.jpg" />
<p>Let&#8217;s pretend you&#8217;ve pressed the button 10 times. Here&#8217;s how Python works out
what&#8217;s happening on the third line:</p>
<p>Python sees the complete line and gets the value of <code class="docutils literal"><span class="pre">get_presses</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">button_a</span><span class="o">.</span><span class="n">get_presses</span><span class="p">()))</span>
</pre></div>
</div>
<p>Now that Python knows how many button presses there have been, it converts the
numeric value into a string of characters:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>Finally, Python knows what to scroll across the display:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>While this might seem like a lot of work, MicroPython makes this happen
extraordinarily fast.</p>
<div class="section" id="event-loops">
<h4>Event Loops<a class="headerlink" href="#event-loops" title="Permalink to this headline">¶</a></h4>
<p>Often you need your program to hang around waiting for something to happen. To
do this you make it loop around a piece of code that defines how to react to
certain expected events such as a button press.</p>
<p>To make loops in Python you use the <code class="docutils literal"><span class="pre">while</span></code> keyword. It checks if something
is <code class="docutils literal"><span class="pre">True</span></code>. If it is, it runs a <em>block of code</em> called the <em>body</em> of the loop.
If it isn&#8217;t, it breaks out of the loop (ignoring the body) and the rest of the
program can continue.</p>
<p>Python makes it easy to define blocks of code. Say I have a to-do list written
on a piece of paper. It probably looks something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>Shopping
Fix broken gutter
Mow the lawn
</pre></div>
</div>
<p>If I wanted to break down my to-do list a bit further, I might write something
like this:</p>
<div class="highlight-python"><div class="highlight"><pre>Shopping:
    Eggs
    Bacon
    Tomatoes
Fix broken gutter:
    Borrow ladder from next door
    Find hammer and nails
    Return ladder
Mow the lawn:
    Check lawn around pond for frogs
    Check mower fuel level
</pre></div>
</div>
<p>It&#8217;s obvious that the main tasks are broken down into sub-tasks that are
<em>indented</em> underneath the main task to which they are related. So <code class="docutils literal"><span class="pre">Eggs</span></code>,
<code class="docutils literal"><span class="pre">Bacon</span></code> and <code class="docutils literal"><span class="pre">Tomatoes</span></code> are obviously related to <code class="docutils literal"><span class="pre">Shopping</span></code>. By indenting
things we make it easy to see, at a glance, how the tasks relate to each other.</p>
<p>This is called <em>nesting</em>. We use nesting to define blocks of code like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">while</span> <span class="n">running_time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">:</span>
    <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">ASLEEP</span><span class="p">)</span>

<span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">SURPRISED</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">running_time</span></code> function returns the number of milliseconds since the
device started.</p>
<p>The <code class="docutils literal"><span class="pre">while</span> <span class="pre">running_time()</span> <span class="pre">&lt;</span> <span class="pre">10000:</span></code> line checks if the running time is less
than 10000 milliseconds (i.e. 10 seconds). If it is, <em>and this is where we can
see scoping in action</em>, then it&#8217;ll display <code class="docutils literal"><span class="pre">Image.ASLEEP</span></code>. Notice how this is
indented underneath the <code class="docutils literal"><span class="pre">while</span></code> statement <em>just like in our to-do list</em>.</p>
<p>Obviously, if the running time is equal to or greater than 10000 milliseconds
then the display will show <code class="docutils literal"><span class="pre">Image.SURPRISED</span></code>. Why? Because the <code class="docutils literal"><span class="pre">while</span></code>
condition will be False (<code class="docutils literal"><span class="pre">running_time</span></code> is no longer <code class="docutils literal"><span class="pre">&lt;</span> <span class="pre">10000</span></code>). In that
case the loop is finished and the program will continue after the <code class="docutils literal"><span class="pre">while</span></code>
loop&#8217;s block of code. It&#8217;ll look like your device is asleep for 10
seconds before waking up with a surprised look on its face.</p>
<p>Try it!</p>
</div>
<div class="section" id="handling-an-event">
<h4>Handling an Event<a class="headerlink" href="#handling-an-event" title="Permalink to this headline">¶</a></h4>
<p>If we want MicroPython to react to button press events we should put it into
an infinite loop and check if the button <code class="docutils literal"><span class="pre">is_pressed</span></code>.</p>
<p>An infinite loop is easy:</p>
<div class="highlight-python"><div class="highlight"><pre>while True:
    # Do stuff
</pre></div>
</div>
<p>(Remember, <code class="docutils literal"><span class="pre">while</span></code> checks if something is <code class="docutils literal"><span class="pre">True</span></code> to work out if it should
run its block of code. Since <code class="docutils literal"><span class="pre">True</span></code> is obviously <code class="docutils literal"><span class="pre">True</span></code> for all time, you
get an infinite loop!)</p>
<p>Let&#8217;s make a very simple cyber-pet. It&#8217;s always sad unless you&#8217;re pressing
button <code class="docutils literal"><span class="pre">A</span></code>. If you press button <code class="docutils literal"><span class="pre">B</span></code> it dies. (I realise this isn&#8217;t a very
pleasant game, so perhaps you can figure out how to improve it.):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">button_a</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">():</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">HAPPY</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">button_b</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">():</span>
        <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">SAD</span><span class="p">)</span>

<span class="n">display</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
<p>Can you see how we check what buttons are pressed? We used <code class="docutils literal"><span class="pre">if</span></code>,
<code class="docutils literal"><span class="pre">elif</span></code> (short for &#8220;else if&#8221;) and <code class="docutils literal"><span class="pre">else</span></code>. These are called <em>conditionals</em>
and work like this:</p>
<div class="highlight-python"><div class="highlight"><pre>if something is True:
    # do one thing
elif some other thing is True:
    # do another thing
else:
    # do yet another thing.
</pre></div>
</div>
<p>This is remarkably similar to English!</p>
<p>The <code class="docutils literal"><span class="pre">is_pressed</span></code> method only produces two results: <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code>.
If you&#8217;re pressing the button it returns <code class="docutils literal"><span class="pre">True</span></code>, otherwise it returns
<code class="docutils literal"><span class="pre">False</span></code>. The code above is saying, in English, &#8220;for ever and ever, if
button A is pressed then show a happy face, else if button B is pressed break
out of the loop, otherwise display a sad face.&#8221; We break out of the loop (stop
the program running for ever and ever) with the <code class="docutils literal"><span class="pre">break</span></code> statement.</p>
<p>At the very end, when the cyber-pet is dead, we <code class="docutils literal"><span class="pre">clear</span></code> the display.</p>
<p>Can you think of ways to make this game less tragic? How would you check if
<em>both</em> buttons are pressed? (Hint: Python has <code class="docutils literal"><span class="pre">and</span></code>, <code class="docutils literal"><span class="pre">or</span></code> and <code class="docutils literal"><span class="pre">not</span></code>
logical operators to help check multiple truth statements (things that
produce either <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code> results).</p>
</div>
</div>
<span id="document-tutorials/io"></span><div class="section" id="input-output">
<h3>Input/Output<a class="headerlink" href="#input-output" title="Permalink to this headline">¶</a></h3>
<p>There are strips of metal along the bottom edge of the BBC micro:bit that make
it look as if the device has teeth. These are the input/output pins (or I/O pins
for short).</p>
<img alt="_images/blue-microbit.png" src="_images/blue-microbit.png" />
<p>Some of the pins are bigger than others so it&#8217;s possible to attach crocodile
clips to them. These are the ones labelled 0, 1, 2, 3V and GND (computers
always start counting from zero). If you attach an edge connector board to the
device it&#8217;s possible to plug in wires connected to the other (smaller) pins.</p>
<p>Each pin on the BBC micro:bit is represented by an <em>object</em> called <code class="docutils literal"><span class="pre">pinN</span></code>
where <code class="docutils literal"><span class="pre">N</span></code> is the pin number. So, for example, to do things with the pin
labelled with a 0 (zero), use the object called <code class="docutils literal"><span class="pre">pin0</span></code>.</p>
<p>Simple!</p>
<p>These objects have various <em>methods</em> associated with them depending upon what
the specific pin is capable of.</p>
<div class="section" id="ticklish-python">
<h4>Ticklish Python<a class="headerlink" href="#ticklish-python" title="Permalink to this headline">¶</a></h4>
<p>The simplest example of input via the pins is a check to see if they are
touched. So, you can tickle your device to make it laugh like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">pin0</span><span class="o">.</span><span class="n">is_touched</span><span class="p">():</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">HAPPY</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">SAD</span><span class="p">)</span>
</pre></div>
</div>
<p>With one hand, hold your device by the GND pin. Then, with your other hand,
touch (or tickle) the 0 (zero) pin. You should see the display change from
grumpy to happy!</p>
<p>This is a form of very basic input measurement. However, the fun really starts
when you plug in circuits and other devices via the pins.</p>
</div>
<div class="section" id="bleeps-and-bloops">
<h4>Bleeps and Bloops<a class="headerlink" href="#bleeps-and-bloops" title="Permalink to this headline">¶</a></h4>
<p>The simplest thing we can attach to the device is a Piezo buzzer. We&#8217;re going
to use it for output.</p>
<img alt="_images/piezo_buzzer.jpg" src="_images/piezo_buzzer.jpg" />
<p>These small devices play a high-pitched bleep when connected to a circuit. To
attach one to your BBC micro:bit you should attach crocodile clips to pin 0 and
GND (as shown below).</p>
<img alt="_images/pin0-gnd.png" src="_images/pin0-gnd.png" />
<p>The wire from pin 0 should be attached to the positive connector on the buzzer
and the wire from GND to the negative connector.</p>
<p>The following program will cause the buzzer to make a sound:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">pin0</span><span class="o">.</span><span class="n">write_digital</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>This is fun for about 5 seconds and then you&#8217;ll want to make the horrible
squeaking stop. Let&#8217;s improve our example and make the device bleep:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">pin0</span><span class="o">.</span><span class="n">write_digital</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">pin0</span><span class="o">.</span><span class="n">write_digital</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">480</span><span class="p">)</span>
</pre></div>
</div>
<p>Can you work out how this script works? Remember that <code class="docutils literal"><span class="pre">1</span></code> is &#8220;on&#8221; and <code class="docutils literal"><span class="pre">0</span></code>
is &#8220;off&#8221; in the digital world.</p>
<p>The device is put into an infinite loop and immediately switches pin 0 on. This
causes the buzzer to emit a beep. While the buzzer is beeping, the device
sleeps for twenty milliseconds and then switches pin 0 off. This gives the
effect of a short bleep. Finally, the device sleeps for 480 milliseconds before
looping back and starting all over again. This means you&#8217;ll get two bleeps per
second (one every 500 milliseconds).</p>
<p>We&#8217;ve made a very simple metronome!</p>
</div>
</div>
<span id="document-tutorials/music"></span><div class="section" id="music">
<h3>Music<a class="headerlink" href="#music" title="Permalink to this headline">¶</a></h3>
<p>MicroPython on the BBC micro:bit comes with a powerful music and sound module.
It&#8217;s very easy to generate bleeps and bloops from the device <em>if you attach a
speaker</em>. Use crocodile clips to attach pin 0 and GND to the positive and
negative inputs on the speaker - it doesn&#8217;t matter which way round they are
connected to the speaker.</p>
<img alt="_images/pin0-gnd.png" src="_images/pin0-gnd.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not attempt this with a Piezo buzzer - such buzzers are only able to
play a single tone.</p>
</div>
<p>Let&#8217;s play some music:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">music</span>

<span class="n">music</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">music</span><span class="o">.</span><span class="n">NYAN</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice that we import the <code class="docutils literal"><span class="pre">music</span></code> module. It contains methods used to make
and control sound.</p>
<p>MicroPython has quite a lot of built-in melodies. Here&#8217;s a complete list:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">music.DADADADUM</span></code></li>
<li><code class="docutils literal"><span class="pre">music.ENTERTAINER</span></code></li>
<li><code class="docutils literal"><span class="pre">music.PRELUDE</span></code></li>
<li><code class="docutils literal"><span class="pre">music.ODE</span></code></li>
<li><code class="docutils literal"><span class="pre">music.NYAN</span></code></li>
<li><code class="docutils literal"><span class="pre">music.RINGTONE</span></code></li>
<li><code class="docutils literal"><span class="pre">music.FUNK</span></code></li>
<li><code class="docutils literal"><span class="pre">music.BLUES</span></code></li>
<li><code class="docutils literal"><span class="pre">music.BIRTHDAY</span></code></li>
<li><code class="docutils literal"><span class="pre">music.WEDDING</span></code></li>
<li><code class="docutils literal"><span class="pre">music.FUNERAL</span></code></li>
<li><code class="docutils literal"><span class="pre">music.PUNCHLINE</span></code></li>
<li><code class="docutils literal"><span class="pre">music.PYTHON</span></code></li>
<li><code class="docutils literal"><span class="pre">music.BADDY</span></code></li>
<li><code class="docutils literal"><span class="pre">music.CHASE</span></code></li>
<li><code class="docutils literal"><span class="pre">music.BA_DING</span></code></li>
<li><code class="docutils literal"><span class="pre">music.WAWAWAWAA</span></code></li>
<li><code class="docutils literal"><span class="pre">music.JUMP_UP</span></code></li>
<li><code class="docutils literal"><span class="pre">music.JUMP_DOWN</span></code></li>
<li><code class="docutils literal"><span class="pre">music.POWER_UP</span></code></li>
<li><code class="docutils literal"><span class="pre">music.POWER_DOWN</span></code></li>
</ul>
<p>Take the example code and change the melody. Which one is your favourite? How
would you use such tunes as signals or cues?</p>
<div class="section" id="wolfgang-amadeus-microbit">
<h4>Wolfgang Amadeus Microbit<a class="headerlink" href="#wolfgang-amadeus-microbit" title="Permalink to this headline">¶</a></h4>
<p>Creating your own tunes is easy!</p>
<p>Each note has a name (like <code class="docutils literal"><span class="pre">C#</span></code> or <code class="docutils literal"><span class="pre">F</span></code>), an octave (telling MicroPython how
high or low the note should be played) and a duration (how
long it lasts through time). Octaves are indicated by a number ~ 0 is the
lowest octave, 4 contains middle C and 8 is about as high as you&#8217;ll ever need
unless you&#8217;re making music for dogs. Durations are also expressed as numbers.
The higher the value of the duration the longer it will last. Such
values are related to each other - for instance, a duration of <code class="docutils literal"><span class="pre">4</span></code> will last
twice as long as a duration <code class="docutils literal"><span class="pre">2</span></code> (and so on). If you use the note name <code class="docutils literal"><span class="pre">R</span></code>
then MicroPython will play a rest (i.e. silence) for the specified duration.</p>
<p>Each note is expressed as a string of characters like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">NOTE</span><span class="p">[</span><span class="n">octave</span><span class="p">][:</span><span class="n">duration</span><span class="p">]</span>
</pre></div>
</div>
<p>For example, <code class="docutils literal"><span class="pre">&quot;A1:4&quot;</span></code> refers to the note named <code class="docutils literal"><span class="pre">A</span></code> in octave number <code class="docutils literal"><span class="pre">1</span></code>
to be played for a duration of <code class="docutils literal"><span class="pre">4</span></code>.</p>
<p>Make a list of notes to create a melody (it&#8217;s equivalent to creating an
animation with a list of images). For example, here&#8217;s how to make MicroPython
play opening of &#8220;Frere Jaques&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">music</span>

<span class="n">tune</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;C4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;D4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;E4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;C4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;C4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;D4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;E4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;C4:4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;E4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;F4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;G4:8&quot;</span><span class="p">,</span> <span class="s2">&quot;E4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;F4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;G4:8&quot;</span><span class="p">]</span>
<span class="n">music</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">tune</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>MicroPython helps you to simplify such melodies. It&#8217;ll remember the octave
and duration values until you next change them. As a result, the example
above can be re-written as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">music</span>

<span class="n">tune</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;C4:4&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;G:8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;E:4&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;G:8&quot;</span><span class="p">]</span>
<span class="n">music</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">tune</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">Notice how the octave and duration values only change when they have to.
It&#8217;s a lot less typing and simpler to read.</p>
</div>
</div>
<div class="section" id="sound-effects">
<h4>Sound Effects<a class="headerlink" href="#sound-effects" title="Permalink to this headline">¶</a></h4>
<p>MicroPython lets you make tones that are not musical notes. For example, here&#8217;s
how to create a Police siren effect:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">music</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">freq</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">880</span><span class="p">,</span> <span class="mi">1760</span><span class="p">,</span> <span class="mi">16</span><span class="p">):</span>
        <span class="n">music</span><span class="o">.</span><span class="n">pitch</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">freq</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1760</span><span class="p">,</span> <span class="mi">880</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">):</span>
        <span class="n">music</span><span class="o">.</span><span class="n">pitch</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice how the <code class="docutils literal"><span class="pre">music.pitch</span></code> <em>method</em> is used in this instance. It expects a
frequency. For example, the frequency of <code class="docutils literal"><span class="pre">440</span></code> is the same as a concert <code class="docutils literal"><span class="pre">A</span></code>
used to tune a symphony orchestra.</p>
<p>In the example above the <code class="docutils literal"><span class="pre">range</span></code> function is used to generate ranges of
numeric values. These numbers are used to define the pitch of the tone. The
three arguments for the <code class="docutils literal"><span class="pre">range</span></code> function are the start value, end value and
step size. Therefore, the first use of <code class="docutils literal"><span class="pre">range</span></code> is saying, in English, &#8220;create
a range of numbers between 880 and 1760 in steps of 16&#8221;. The second use of
<code class="docutils literal"><span class="pre">range</span></code> is saying, &#8220;create a range of values between 1760 and 880 in steps of
-16&#8221;. This is how we get a range of frequencies that go up and down in pitch
like a siren.</p>
<p>Because the siren should last forever it&#8217;s wrapped in an infinite <code class="docutils literal"><span class="pre">while</span></code>
loop.</p>
<p>Importantly, we have introduced a new sort of a loop inside the <code class="docutils literal"><span class="pre">while</span></code>
loop: the <code class="docutils literal"><span class="pre">for</span></code> loop. In English it&#8217;s like saying, &#8220;for each item in some
collection, do some activity with it&#8221;. Specifically in the example above, it&#8217;s
saying, &#8220;for each frequency in the specified range of frequencies, play the
pitch of that frequency for 6 milliseconds&#8221;. Notice how the thing to do for
each item in a for loop is indented (as discussed earlier) so Python knows
exactly which code to run to handle the individual items.</p>
</div>
</div>
<span id="document-tutorials/random"></span><div class="section" id="random">
<h3>Random<a class="headerlink" href="#random" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you want to leave things to chance, or mix it up a little: you want
the device to act randomly.</p>
<p>MicroPython comes with a <code class="docutils literal"><span class="pre">random</span></code> module to make it easy to introduce chance
and a little chaos into your code. For example, here&#8217;s how to scroll a random
name across the display:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Mary&quot;</span><span class="p">,</span> <span class="s2">&quot;Yolanda&quot;</span><span class="p">,</span> <span class="s2">&quot;Damien&quot;</span><span class="p">,</span> <span class="s2">&quot;Alia&quot;</span><span class="p">,</span> <span class="s2">&quot;Kushal&quot;</span><span class="p">,</span> <span class="s2">&quot;Mei Xiu&quot;</span><span class="p">,</span> <span class="s2">&quot;Zoltan&quot;</span> <span class="p">]</span>

<span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">names</span><span class="p">))</span>
</pre></div>
</div>
<p>The list (<code class="docutils literal"><span class="pre">names</span></code>) contains seven names defined as strings of characters.
The final line is <em>nested</em> (the &#8220;onion&#8221; effect introduced earlier): the
<code class="docutils literal"><span class="pre">random.choice</span></code> method takes the <code class="docutils literal"><span class="pre">names</span></code> list as an argument and returns
an item chosen at random. This item (the randomly chosen name) is the argument
for <code class="docutils literal"><span class="pre">display.scroll</span></code>.</p>
<p>Can you modify the list to include your own set of names?</p>
<div class="section" id="random-numbers">
<h4>Random Numbers<a class="headerlink" href="#random-numbers" title="Permalink to this headline">¶</a></h4>
<p>Random numbers are very useful. They&#8217;re common in games. Why else do we have
dice?</p>
<p>MicroPython comes with several useful random number methods. Here&#8217;s how to
make a simple dice:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)))</span>
</pre></div>
</div>
<p>Every time the device is reset it displays a number between 1 and 6. You&#8217;re
starting to get familiar with <em>nesting</em>, so it&#8217;s important to note that
<code class="docutils literal"><span class="pre">random.randint</span></code> returns a whole number between the two arguments, inclusive
(a whole number is also called an integer - hence the name of the method).
Notice that because <code class="docutils literal"><span class="pre">display.show</span></code> expects a character then we use the
<code class="docutils literal"><span class="pre">str</span></code> function to turn the numeric value into a character (we turn, for
example, <code class="docutils literal"><span class="pre">6</span></code> into <code class="docutils literal"><span class="pre">&quot;6&quot;</span></code>).</p>
<p>If you know you&#8217;ll always want a number between <code class="docutils literal"><span class="pre">0</span></code> and <code class="docutils literal"><span class="pre">N</span></code> then use the
<code class="docutils literal"><span class="pre">random.randrange</span></code> method. If you give it a single argument it&#8217;ll return
random integers up to, but not including, the value of the argument <code class="docutils literal"><span class="pre">N</span></code>
(this is different to the behaviour of <code class="docutils literal"><span class="pre">random.randint</span></code>).</p>
<p>Sometimes you need numbers with a decimal point in them. These are called
<em>floating point</em> numbers and it&#8217;s possible to generate such a number with the
<code class="docutils literal"><span class="pre">random.random</span></code> method. This only returns values between <code class="docutils literal"><span class="pre">0.0</span></code> and <code class="docutils literal"><span class="pre">1.0</span></code>
inclusive. If you need larger random floating point numbers add the results
of <code class="docutils literal"><span class="pre">random.randrange</span></code> and <code class="docutils literal"><span class="pre">random.random</span></code> like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">answer</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="seeds-of-chaos">
<h4>Seeds of Chaos<a class="headerlink" href="#seeds-of-chaos" title="Permalink to this headline">¶</a></h4>
<p>The random number generators used by computers are not truly random. They just
give random like results given a starting <em>seed</em> value. The seed is often
generated from random-ish values such as the current time and/or readings from
sensors such as the thermometers built into chips.</p>
<p>Sometimes you want to have repeatable random-ish behaviour: a source of
randomness that is reproducible. It&#8217;s like saying that you need the same five
random values each time you throw a dice.</p>
<p>This is easy to achieve by setting the <em>seed</em> value. Given a known seed the
random number generator will create the same set of random numbers. The seed is
set with <code class="docutils literal"><span class="pre">random.seed</span></code> and any whole number (integer). This version of the
dice program always produces the same results:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1337</span><span class="p">)</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">button_a</span><span class="o">.</span><span class="n">was_pressed</span><span class="p">():</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)))</span>
</pre></div>
</div>
<p>Can you work out why this program needs us to press button A instead of reset
the device as in the first dice example..?</p>
</div>
</div>
<span id="document-tutorials/movement"></span><div class="section" id="movement">
<h3>Movement<a class="headerlink" href="#movement" title="Permalink to this headline">¶</a></h3>
<p>Your BBC micro:bit comes with an accelerometer. It measures movement along
three axes:</p>
<ul class="simple">
<li>X - tilting from left to right.</li>
<li>Y - tilting forwards and backwards.</li>
<li>Z - moving up and down.</li>
</ul>
<p>There is a method for each axis that returns a positive or negative number
indicating a measurement in milli-g&#8217;s. When the reading is 0 you are &#8220;level&#8221;
along that particular axis.</p>
<p>For example, here&#8217;s a very simple spirit-level that uses <code class="docutils literal"><span class="pre">get_x</span></code> to measure
how level the device is along the X axis:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">reading</span> <span class="o">=</span> <span class="n">accelerometer</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">reading</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">reading</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">20</span><span class="p">:</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you hold the device flat it should display <code class="docutils literal"><span class="pre">-</span></code>; however, rotate it left or
right and it&#8217;ll show <code class="docutils literal"><span class="pre">L</span></code> and <code class="docutils literal"><span class="pre">R</span></code> respectively.</p>
<p>We want the device to constantly react to change, so we use an
infinite <code class="docutils literal"><span class="pre">while</span></code> loop. The first thing to happen <em>within the body of the
loop</em> is a measurement along the X axis which is called <code class="docutils literal"><span class="pre">reading</span></code>. Because
the accelerometer is <em>so</em> sensitive I&#8217;ve made level +/-20 in range. It&#8217;s why
the <code class="docutils literal"><span class="pre">if</span></code> and <code class="docutils literal"><span class="pre">elif</span></code> conditionals check for <code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">20</span></code> and <code class="docutils literal"><span class="pre">&lt;</span> <span class="pre">-20</span></code>. The
<code class="docutils literal"><span class="pre">else</span></code> statement means that if the <code class="docutils literal"><span class="pre">reading</span></code> is between -20 and 20 then
we consider it level. For each of these conditions we use the display to show
the appropriate character.</p>
<p>There is also a <code class="docutils literal"><span class="pre">get_y</span></code> method for the Y axis and a <code class="docutils literal"><span class="pre">get_z</span></code> method for the
Z axis.</p>
<p>If you&#8217;ve ever wondered how a mobile phone knows which up to show the images on
its screen, it&#8217;s because it uses an accelerometer in exactly the same way as
the program above. Game controllers also contain accelerometers to help you
steer and move around in games.</p>
<div class="section" id="musical-mayhem">
<h4>Musical Mayhem<a class="headerlink" href="#musical-mayhem" title="Permalink to this headline">¶</a></h4>
<p>One of the most wonderful aspects of MicroPython on the BBC micro:bit is how it
lets you easily link different capabilities of the device together. For
example, let&#8217;s turn it into a musical instrument (of sorts).</p>
<p>Connect a speaker as you did in the music tutorial. Use crocodile clips to
attach pin 0 and GND to the positive and negative inputs on the speaker - it
doesn&#8217;t matter which way round they are connected to the speaker.</p>
<img alt="_images/pin0-gnd.png" src="_images/pin0-gnd.png" />
<p>What happens if we take the readings from the accelerometer and play them as
pitches? Let&#8217;s find out:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">music</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">music</span><span class="o">.</span><span class="n">pitch</span><span class="p">(</span><span class="n">accelerometer</span><span class="o">.</span><span class="n">get_y</span><span class="p">(),</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>The key line is at the end and remarkably simple. We <em>nest</em> the reading from
the Y axis as the frequency to feed into the <code class="docutils literal"><span class="pre">music.pitch</span></code> method. We only
let it play for 10 milliseconds because we want the tone to change quickly as
the device is tipped. Because the device is in an infinite <code class="docutils literal"><span class="pre">while</span></code> loop it
is constantly reacting to changes in the Y axis measurement.</p>
<p>That&#8217;s it!</p>
<p>Tip the device forwards and backwards. If the reading along the Y axis is
positive it&#8217;ll change the pitch of the tone played by the micro:bit.</p>
<p>Imagine a whole symphony orchestra of these devices. Can you play a tune? How
would you improve the program to make the micro:bit sound more musical?</p>
</div>
</div>
<span id="document-tutorials/gestures"></span><div class="section" id="gestures">
<h3>Gestures<a class="headerlink" href="#gestures" title="Permalink to this headline">¶</a></h3>
<p>The really interesting side-effect of having an accelerometer is gesture
detection. If you move your BBC micro:bit in a certain way (as a gesture) then
MicroPython is able to detect this.</p>
<p>MicroPython is able to recognise the following gestures: <code class="docutils literal"><span class="pre">up</span></code>, <code class="docutils literal"><span class="pre">down</span></code>,
<code class="docutils literal"><span class="pre">left</span></code>, <code class="docutils literal"><span class="pre">right</span></code>, <code class="docutils literal"><span class="pre">face</span> <span class="pre">up</span></code>, <code class="docutils literal"><span class="pre">face</span> <span class="pre">down</span></code>, <code class="docutils literal"><span class="pre">freefall</span></code>, <code class="docutils literal"><span class="pre">3g</span></code>, <code class="docutils literal"><span class="pre">6g</span></code>,
<code class="docutils literal"><span class="pre">8g</span></code>, <code class="docutils literal"><span class="pre">shake</span></code>. Gestures are always represented as strings. While most of
the names should be obvious, the <code class="docutils literal"><span class="pre">3g</span></code>, <code class="docutils literal"><span class="pre">6g</span></code> and <code class="docutils literal"><span class="pre">8g</span></code> gestures apply when
the device encounters these levels of g-force (like when an astronaut is
launched into space).</p>
<p>To get the current gesture use the <code class="docutils literal"><span class="pre">accelerometer.current_gesture</span></code> method.
Its result is going to be one of the named gestures listed above. For example,
this program will only make your device happy if it is face up:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">gesture</span> <span class="o">=</span> <span class="n">accelerometer</span><span class="o">.</span><span class="n">current_gesture</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">gesture</span> <span class="o">==</span> <span class="s2">&quot;face up&quot;</span><span class="p">:</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">HAPPY</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">ANGRY</span><span class="p">)</span>
</pre></div>
</div>
<p>Once again, because we want the device to react to changing circumstances we
use a <code class="docutils literal"><span class="pre">while</span></code> loop. Within the <em>scope</em> of the loop the current gesture is
read and put into <code class="docutils literal"><span class="pre">gesture</span></code>. The <code class="docutils literal"><span class="pre">if</span></code> conditional checks if <code class="docutils literal"><span class="pre">gesture</span></code> is
equal to <code class="docutils literal"><span class="pre">&quot;face</span> <span class="pre">up&quot;</span></code> (Python uses <code class="docutils literal"><span class="pre">==</span></code> to test for equality, a single
equals sign <code class="docutils literal"><span class="pre">=</span></code> is used for assignment - just like how we assign the gesture
reading to the <code class="docutils literal"><span class="pre">gesture</span></code> object). If the gesture is equal to <code class="docutils literal"><span class="pre">&quot;face</span> <span class="pre">up&quot;</span></code>
then use the display to show a happy face. Otherwise, the device is made to
look angry!</p>
<div class="section" id="magic-8">
<h4>Magic-8<a class="headerlink" href="#magic-8" title="Permalink to this headline">¶</a></h4>
<p>A Magic-8 ball is a toy first invented in the 1950s. The idea is to ask
it a yes/no question, shake it and wait for it to reveal the truth. It&#8217;s rather
easy to turn into a program:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">answers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;It is certain&quot;</span><span class="p">,</span>
    <span class="s2">&quot;It is decidedly so&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Without a doubt&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Yes, definitely&quot;</span><span class="p">,</span>
    <span class="s2">&quot;You may rely on it&quot;</span><span class="p">,</span>
    <span class="s2">&quot;As I see it, yes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Most likely&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Outlook good&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Yes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Signs point to yes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Reply hazy try again&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ask again later&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Better not tell you now&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Cannot predict now&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Concentrate and ask again&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Don&#39;t count on it&quot;</span>
    <span class="s2">&quot;My reply is no&quot;</span><span class="p">,</span>
    <span class="s2">&quot;My sources say no&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Outlook not so good&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Very doubtful&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s2">&quot;8&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">accelerometer</span><span class="o">.</span><span class="n">was_gesture</span><span class="p">(</span><span class="s2">&quot;shake&quot;</span><span class="p">):</span>
        <span class="n">display</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
        <span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">answers</span><span class="p">))</span>
</pre></div>
</div>
<p>Most of the program is a list called <code class="docutils literal"><span class="pre">answers</span></code>. The actual game is in the
<code class="docutils literal"><span class="pre">while</span></code> loop at the end.</p>
<p>The default state of the game is to show the character <code class="docutils literal"><span class="pre">&quot;8&quot;</span></code>. However, the
program needs to detect if it has been shaken. The <code class="docutils literal"><span class="pre">was_gesture</span></code> method uses
its argument (in this case, the string <code class="docutils literal"><span class="pre">&quot;shake&quot;</span></code> because we want to detect
a shake) to return a <code class="docutils literal"><span class="pre">True</span></code> / <code class="docutils literal"><span class="pre">False</span></code> response. If the device was shaken
the <code class="docutils literal"><span class="pre">if</span></code> conditional drops into its block of code where it clears the screen,
waits for a second (so the device appears to be thinking about your question)
and displays a randomly chosen answer.</p>
<p>Why not ask it if this is the greatest program ever written? What could you do
to &#8220;cheat&#8221; and make the answer always positive or negative? (Hint: use the
buttons.)</p>
</div>
</div>
<span id="document-tutorials/direction"></span><div class="section" id="direction">
<h3>Direction<a class="headerlink" href="#direction" title="Permalink to this headline">¶</a></h3>
<p>There is a compass on the BBC micro:bit. If you ever make a weather station
use the device to work out the wind direction.</p>
<div class="section" id="compass">
<h4>Compass<a class="headerlink" href="#compass" title="Permalink to this headline">¶</a></h4>
<p>It can also tell you the direction of North like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">compass</span><span class="o">.</span><span class="n">calibrate</span><span class="p">()</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">needle</span> <span class="o">=</span> <span class="p">((</span><span class="mi">15</span> <span class="o">-</span> <span class="n">compass</span><span class="o">.</span><span class="n">heading</span><span class="p">())</span> <span class="o">//</span> <span class="mi">30</span><span class="p">)</span> <span class="o">%</span> <span class="mi">12</span>
    <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">ALL_CLOCKS</span><span class="p">[</span><span class="n">needle</span><span class="p">])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>You must calibrate the compass before taking readings.</strong> Failure to do so
will produce garbage results. The <code class="docutils literal"><span class="pre">calibration</span></code> method runs a fun little
game to help the device work out where it is in relation to the Earth&#8217;s
magnetic field.</p>
<p class="last">To calibrate the compass, tilt the micro:bit around until a circle of pixels is
drawn on the outside edges of the display.</p>
</div>
<p>The program takes the <code class="docutils literal"><span class="pre">compass.heading</span></code> and, using some simple yet
cunning maths, <a class="reference external" href="https://en.wikipedia.org/wiki/Floor_and_ceiling_functions">floor division</a> <code class="docutils literal"><span class="pre">//</span></code> and <a class="reference external" href="https://en.wikipedia.org/wiki/Modulo_operation">modulo</a> <code class="docutils literal"><span class="pre">%</span></code>, works out the number of the clock hand to use to display on the screen
so that it is pointing roughly North.</p>
</div>
</div>
<span id="document-tutorials/storage"></span><div class="section" id="storage">
<h3>Storage<a class="headerlink" href="#storage" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you need to store useful information. Such information is stored as
data: representation of information (in a digital form when stored on
computers). If you store data on a computer it should persist, even if you
switch the device off and on again.</p>
<p>Happily MicroPython on the micro:bit allows you to do this with a very simple
file system. Because of memory constraints <strong>there is approximately 30k of
storage available</strong> on the file system.</p>
<p>What is a file system?</p>
<p>It&#8217;s a means of storing and organising data in a persistent manner - any data
stored in a file system should survive restarts of the device. As the name
suggests, data stored on a file system is organised into files.</p>
<img alt="_images/files.jpg" src="_images/files.jpg" />
<p>A computer file is a named digital resource that&#8217;s stored on a file system.
Such resources contain useful information as data. This is exactly how a
paper file works. It&#8217;s a sort of named container that contains useful
information. Usually, both paper and digital files are named to indicate what
they contain. On computers it is common to end a file with a <code class="docutils literal"><span class="pre">.something</span></code>
suffix. Usually, the &#8220;something&#8221; indicates what type of data is used to
represent the information. For example, <code class="docutils literal"><span class="pre">.txt</span></code> indicates a text file,
<code class="docutils literal"><span class="pre">.jpg</span></code> a JPEG image and <code class="docutils literal"><span class="pre">.mp3</span></code> sound data encoded as MP3.</p>
<p>Some file systems (such as the one found on your laptop or PC) allow you to
organise your files into directories: named containers that group related files
and sub-directories together. However, <em>the file system provided by MicroPython
is a flat file system</em>. A flat file system does not have directories - all
your files are just stored in the same place.</p>
<p>The Python programming language contains easy to use and powerful ways in which
to work with a computer&#8217;s file system. MicroPython on the micro:bit implements
a useful subset of these features to make is easy to read and write files on
the device, while also providing consistency with other versions of Python.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Flashing your micro:bit will DESTROY ALL YOUR DATA since it re-writes all
the flash memory used by the device and the file system is stored in the
flash memory.</p>
<p class="last">However, if you switch off your device the data will remain intact until
you either delete it or re-flash the device.</p>
</div>
<div class="section" id="open-sesame">
<h4>Open Sesame<a class="headerlink" href="#open-sesame" title="Permalink to this headline">¶</a></h4>
<p>Reading and writing a file on the file system is achieved by the <code class="docutils literal"><span class="pre">open</span></code>
function. Once a file is opened you can do stuff with it until you close it
(analogous with the way we use paper files). It is essential you close a file
so MicroPython knows you&#8217;ve finished with it.</p>
<p>The best way to make sure of this is to use the <code class="docutils literal"><span class="pre">with</span></code> statement like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;story.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">my_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">with</span></code> statement uses the <code class="docutils literal"><span class="pre">open</span></code> function to open a file and assign it
to an object. In the example above, the <code class="docutils literal"><span class="pre">open</span></code> function opens the file called
<code class="docutils literal"><span class="pre">story.txt</span></code> (obviously a text file containing a story of some sort).
The object that&#8217;s used to represent the file in the Python code is called
<code class="docutils literal"><span class="pre">my_file</span></code>. Subsequently, in the code block indented underneath the <code class="docutils literal"><span class="pre">with</span></code>
statement, the <code class="docutils literal"><span class="pre">my_file</span></code> object is used to <code class="docutils literal"><span class="pre">read()</span></code> the content of the
file and assign it to the <code class="docutils literal"><span class="pre">content</span></code> object.</p>
<p>Here&#8217;s the important point, <em>the next line containing the</em> <code class="docutils literal"><span class="pre">print</span></code> <em>statement
is not indented</em>. The code block associated with the <code class="docutils literal"><span class="pre">with</span></code> statement is only
the single line that reads the file. Once the code block associated with the
<code class="docutils literal"><span class="pre">with</span></code> statement is closed then Python (and MicroPython) will automatically
close the file for you. This is called context handling and the <code class="docutils literal"><span class="pre">open</span></code>
function creates objects that are context handlers for files.</p>
<p>Put simply, the scope of your interaction with a file is defined by the code
block associated with the <code class="docutils literal"><span class="pre">with</span></code> statement that opens the file.</p>
<p>Confused?</p>
<p>Don&#8217;t be. I&#8217;m simply saying your code should look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>with open(&#39;some_file&#39;) as some_object:
    # Do stuff with some_object in this block of code
    # associated with the with statement.

# When the block is finished then MicroPython
# automatically closes the file for you.
</pre></div>
</div>
<p>Just like a paper file, a digital file is opened for two reasons: to read its
content (as demonstrated above) or to write something to the file. The default
mode is to read the file. If you want to write to a file you need to tell the
<code class="docutils literal"><span class="pre">open</span></code> function in the following way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;hello.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_file</span><span class="p">:</span>
    <span class="n">my_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice the <code class="docutils literal"><span class="pre">'w'</span></code> argument is used to set the <code class="docutils literal"><span class="pre">my_file</span></code> object into write
mode. You could also pass an <code class="docutils literal"><span class="pre">'r'</span></code> argument to set the file object to read
mode, but since this is the default, it&#8217;s often left off.</p>
<p>Writing data to the file is done with the (you guessed it) <code class="docutils literal"><span class="pre">write</span></code>
method that takes the string you want to write to the file as an argument. In
the example above, I write the text &#8220;Hello, World!&#8221; to a file called
&#8220;hello.txt&#8221;.</p>
<p>Simple!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When you open a file and write (perhaps several times while the file is
in an open state) you will be writing OVER the content of the file if it
already exists.</p>
<p>If you want to append data to a file you should first read it, store the
content somewhere, close it, append your data to the content and then open
it to write again with the revised content.</p>
<p class="last">While this is the case in MicroPython, &#8220;normal&#8221; Python can open
files to write in &#8220;append&#8221; mode. That we can&#8217;t do this on the micro:bit is
a result of the simple implementation of the file system.</p>
</div>
</div>
<div class="section" id="os-sos">
<h4>OS SOS<a class="headerlink" href="#os-sos" title="Permalink to this headline">¶</a></h4>
<p>As well as reading and writing files, Python can manipulate them. You
certainly need to know what files are on the file system and sometimes
you need to delete them too.</p>
<p>On a regular computer, it is the role of the operating system (like Windows,
OSX or Linux) to manage this on Python&#8217;s behalf. Such functionality is made
available in Python via a module called <code class="docutils literal"><span class="pre">os</span></code>. Since MicroPython <strong>is</strong> the
operating system we&#8217;ve decided to keep the appropriate functions in the <code class="docutils literal"><span class="pre">os</span></code>
module for consistency so you&#8217;ll know where to find them when you use &#8220;regular&#8221;
Python on a device like a laptop or Raspberry Pi.</p>
<p>Essentially, you can do three operations related to the file system: list the
files, remove a file and ask for the size of a file.</p>
<p>To list the files on your file system use the <code class="docutils literal"><span class="pre">listdir</span></code> function. It
returns a list of strings indicating the file names of the files on the file
system:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="n">my_files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
</pre></div>
</div>
<p>To delete a file use the <code class="docutils literal"><span class="pre">remove</span></code> function. It takes a string representing
the file name of the file you want to delete as an argument, like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;filename.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, sometimes it&#8217;s useful to know how big a file is before reading from
it. To achieve this use the <code class="docutils literal"><span class="pre">size</span></code> function. Like the <code class="docutils literal"><span class="pre">remove</span></code> function, it
takes a string representing the file name of the file whose size you want to
know. It returns an integer (whole number) telling you the number of bytes the
file takes up:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="s1">&#39;a_big_file.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>It&#8217;s all very well having a file system, but what if we want to put or get
files on or off the device?</p>
<p>Just use the <code class="docutils literal"><span class="pre">microfs</span></code> utility!</p>
</div>
<div class="section" id="file-transfer">
<h4>File Transfer<a class="headerlink" href="#file-transfer" title="Permalink to this headline">¶</a></h4>
<p>If you have Python installed on the computer you use to program your BBC
micro:bit then you can use a special utility called <code class="docutils literal"><span class="pre">microfs</span></code> (shortened to
<code class="docutils literal"><span class="pre">ufs</span></code> when using it in the command line). Full instructions for installing
and using all the features of microfs can be found
<a class="reference external" href="https://microfs.readthedocs.io">in its documentation</a>.</p>
<p>Nevertheless it&#8217;s possible to do most of the things you need with just four
simple commands:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ufs ls
story.txt
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">ls</span></code> sub-command lists the files on the file system (it&#8217;s named after
the common Unix command, <code class="docutils literal"><span class="pre">ls</span></code>, that serves the same function).</p>
<div class="highlight-python"><div class="highlight"><pre>$ ufs get story.txt
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">get</span></code> sub-command gets a file from the connected micro:bit and saves it
into your current location on your computer (it&#8217;s named after the <code class="docutils literal"><span class="pre">get</span></code>
command that&#8217;s part of the common file transfer protocol [FTP] that serves the
same function).</p>
<div class="highlight-python"><div class="highlight"><pre>$ ufs rm story.txt
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">rm</span></code> sub-command removes the named from from the file system on the
connected micro:bit (it&#8217;s named after the common Unix command, <code class="docutils literal"><span class="pre">rm</span></code>, that
serves the same function).</p>
<div class="highlight-python"><div class="highlight"><pre>$ ufs put story2.txt
</pre></div>
</div>
<p>Finally, the <code class="docutils literal"><span class="pre">put</span></code> sub-command puts a file from your computer onto the
connected device (it&#8217;s named after the <code class="docutils literal"><span class="pre">put</span></code> command that&#8217;s part of FTP that
serves the same function).</p>
</div>
<div class="section" id="mainly-main-py">
<h4>Mainly main.py<a class="headerlink" href="#mainly-main-py" title="Permalink to this headline">¶</a></h4>
<p>The file system also has an interesting property: if you just flashed the
MicroPython runtime onto the device then when it starts it&#8217;s simply waiting
for something to do. However, if you copy a special file called <code class="docutils literal"><span class="pre">main.py</span></code>
onto the file system, upon restarting the device, MicroPython will run the
contents of the <code class="docutils literal"><span class="pre">main.py</span></code> file.</p>
<p>Furthermore, if you copy other Python files onto the file system then you can
<code class="docutils literal"><span class="pre">import</span></code> them as you would any other Python module. For example, if you had
a <code class="docutils literal"><span class="pre">hello.py</span></code> file that contained the following simple code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;World&quot;</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, {}!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>...you could import and use the <code class="docutils literal"><span class="pre">say_hello</span></code> function like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">from</span> <span class="nn">hello</span> <span class="kn">import</span> <span class="n">say_hello</span>

<span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="n">say_hello</span><span class="p">())</span>
</pre></div>
</div>
<p>Of course, it results in the text &#8220;Hello, World!&#8221; scrolling across the
display. The important point is that such an example is split between two
Python modules and the <code class="docutils literal"><span class="pre">import</span></code> statement is used to share code.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you have flashed a script onto the device in addition to the MicroPython
runtime, then MicroPython will ignore <code class="docutils literal"><span class="pre">main.py</span></code> and run your embedded
script instead.</p>
<p class="last">To flash just the MicroPython runtime, simply make sure the script you
may have written in your editor has zero characters in it. Once flashed
you&#8217;ll be able to copy over a <code class="docutils literal"><span class="pre">main.py</span></code> file.</p>
</div>
</div>
</div>
<span id="document-tutorials/speech"></span><div class="section" id="speech">
<h3>Speech<a class="headerlink" href="#speech" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>WARNING! THIS IS ALPHA CODE.</p>
<p>We reserve the right to change this API as development continues.</p>
<p class="last">The quality of the speech is not great, merely &#8220;good enough&#8221;. Given the
constraints of the device you may encounter memory errors and / or
unexpected extra sounds during playback. It&#8217;s early days and we&#8217;re
improving the code for the speech synthesiser all the time. Bug reports
and pull requests are most welcome.</p>
</div>
<p>Computers and robots that talk feel more &#8220;human&#8221;.</p>
<p>So often we learn about what a computer is up to through a graphical user
interface (GUI). In the case of a BBC micro:bit the GUI is a 5x5 LED matrix,
which leaves a lot to be desired.</p>
<p>Getting the micro:bit talk to you is one way to express information in a fun,
efficient and useful way. To this end, we have integrated a simple speech
synthesiser based upon a reverse-engineered version of a synthesiser from the
early 1980s. It sounds very cute, in an &#8220;all humans must die&#8221; sort of a way.</p>
<p>With this in mind, we&#8217;re going to use the speech synthesiser to create...</p>
<div class="section" id="dalek-poetry">
<h4>DALEK Poetry<a class="headerlink" href="#dalek-poetry" title="Permalink to this headline">¶</a></h4>
<img alt="_images/dalek.jpg" src="_images/dalek.jpg" />
<p>It&#8217;s a little known fact that DALEKs enjoy poetry ~ especially limericks.
They go wild for anapestic meter with a strict AABBA form. Who&#8217;d have thought?</p>
<p>(Actually, as we&#8217;ll learn below, it&#8217;s The Doctor&#8217;s fault DALEKs like limericks,
much to the annoyance of Davros.)</p>
<p>In any case, we&#8217;re going to create a DALEK poetry recital on demand.</p>
</div>
<div class="section" id="say-something">
<h4>Say Something<a class="headerlink" href="#say-something" title="Permalink to this headline">¶</a></h4>
<p>Before the device can talk you need to plug in a speaker like this:</p>
<img alt="_images/speech1.png" src="_images/speech1.png" />
<p>The simplest way to get the device to speak is to import the <code class="docutils literal"><span class="pre">speech</span></code> module
and use the <code class="docutils literal"><span class="pre">say</span></code> function like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">speech</span>

<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;Hello, World&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>While this is cute it&#8217;s certainly not DALEK enough for our taste, so we need to
change some of the parameters that the speech synthesiser uses to produce the
voice. Our speech synthesiser is quite powerful in this respect because we can
change four parameters:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">pitch</span></code> - how high or low the voice sounds (0 = high, 255 = Barry White)</li>
<li><code class="docutils literal"><span class="pre">speed</span></code> - how quickly the device talks (0 = impossible, 255 = bedtime story)</li>
<li><code class="docutils literal"><span class="pre">mouth</span></code> - how tight-lipped or overtly enunciating the voice sounds (0 = ventriloquist&#8217;s dummy, 255 = Foghorn Leghorn)</li>
<li><code class="docutils literal"><span class="pre">throat</span></code> - how relaxed or tense is the tone of voice (0 = falling apart, 255 = totally chilled)</li>
</ul>
<p>Collectively, these parameters control the quality of sound - a.k.a. the
timbre. To be honest, the best way to get the tone of voice you want is to
experiment, use your judgement and adjust.</p>
<p>To adjust the settings you pass them in as arguments to the <code class="docutils literal"><span class="pre">say</span></code> function.
More details can be found in the <code class="docutils literal"><span class="pre">speech</span></code> module&#8217;s API documentation.</p>
<p>After some experimentation we&#8217;ve worked out this sounds quite DALEK-esque:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;I am a DALEK - EXTERMINATE&quot;</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">throat</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">mouth</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="poetry-on-demand">
<h4>Poetry on Demand<a class="headerlink" href="#poetry-on-demand" title="Permalink to this headline">¶</a></h4>
<p>Being Cyborgs DALEKs use their robot capabilities to compose poetry and it
turns out that the algorithm they use is written in Python like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># DALEK poetry generator, by The Doctor</span>
<span class="kn">import</span> <span class="nn">speech</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="c1"># Randomly select fragments to interpolate into the template.</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;brent&quot;</span><span class="p">,</span> <span class="s2">&quot;trent&quot;</span><span class="p">,</span> <span class="s2">&quot;kent&quot;</span><span class="p">,</span> <span class="s2">&quot;tashkent&quot;</span><span class="p">])</span>
<span class="n">action</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;wrapped up&quot;</span><span class="p">,</span> <span class="s2">&quot;covered&quot;</span><span class="p">,</span> <span class="s2">&quot;sang to&quot;</span><span class="p">,</span> <span class="s2">&quot;played games with&quot;</span><span class="p">])</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;head&quot;</span><span class="p">,</span> <span class="s2">&quot;hand&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;foot&quot;</span><span class="p">])</span>
<span class="n">prop</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;in a tent&quot;</span><span class="p">,</span> <span class="s2">&quot;with cement&quot;</span><span class="p">,</span> <span class="s2">&quot;with some scent&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;that was bent&quot;</span><span class="p">])</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;it ran off&quot;</span><span class="p">,</span> <span class="s2">&quot;it glowed&quot;</span><span class="p">,</span> <span class="s2">&quot;it blew up&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;it turned blue&quot;</span><span class="p">])</span>
<span class="n">attitude</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;in the park&quot;</span><span class="p">,</span> <span class="s2">&quot;like a shark&quot;</span><span class="p">,</span> <span class="s2">&quot;for a lark&quot;</span><span class="p">,</span>
                         <span class="s2">&quot;with a bark&quot;</span><span class="p">])</span>
<span class="n">conclusion</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;where it went&quot;</span><span class="p">,</span> <span class="s2">&quot;its intent&quot;</span><span class="p">,</span> <span class="s2">&quot;why it went&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;what it meant&quot;</span><span class="p">])</span>

<span class="c1"># A template of the poem. The {} are replaced by the named fragments.</span>
<span class="n">poem</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;there was a young man from {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">location</span><span class="p">),</span>
    <span class="s2">&quot;who {} his {} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span>
    <span class="s2">&quot;one night after dark&quot;</span><span class="p">,</span>
    <span class="s2">&quot;{} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">attitude</span><span class="p">),</span>
    <span class="s2">&quot;and he never worked out {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">conclusion</span><span class="p">),</span>
    <span class="s2">&quot;EXTERMINATE&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># Loop over each line in the poem and use the speech module to recite it.</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">poem</span><span class="p">:</span>
    <span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">throat</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">mouth</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
</pre></div>
</div>
<p>As the comments demonstrate, it&#8217;s a very simple in design:</p>
<ul class="simple">
<li>Named fragments (<code class="docutils literal"><span class="pre">location</span></code>, <code class="docutils literal"><span class="pre">prop</span></code>, <code class="docutils literal"><span class="pre">attitude</span></code> etc) are randomly generated from pre-defined lists of possible values. Note the use of <code class="docutils literal"><span class="pre">random.choice</span></code> to select a single item from a list.</li>
<li>A template of a poem is defined as a list of stanzas with &#8220;holes&#8221; in them (denoted by <code class="docutils literal"><span class="pre">{}</span></code>) into which the named fragments will be put using the <code class="docutils literal"><span class="pre">format</span></code> method.</li>
<li>Finally, Python loops over each item in the list of filled-in poetry stanzas and uses <code class="docutils literal"><span class="pre">speech.say</span></code> with the settings for the DALEK voice to recite the poem. A pause of 500 milliseconds is inserted between each line because even DALEKs need to take a breath.</li>
</ul>
<p>Interestingly the original poetry related routines were written by Davros in
<a class="reference external" href="https://en.wikipedia.org/wiki/Fortran">FORTRAN</a> (an appropriate
language for DALEKS since you type it ALL IN CAPITAL LETTERS). However, The
Doctor went back in time to precisely the point between Davros&#8217;s
<a class="reference external" href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a>
passing and the
<a class="reference external" href="https://en.wikipedia.org/wiki/Continuous_delivery">deployment pipeline</a>
kicking in. At this instant he was able to insert a MicroPython interpreter
into the DALEK operating system and the code you see above into the DALEK
memory banks as a sort of long hidden Time-Lord
<a class="reference external" href="https://en.wikipedia.org/wiki/Easter_egg_(media)">Easter Egg</a> or
<a class="reference external" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Rickroll</a>.</p>
</div>
<div class="section" id="phonemes">
<h4>Phonemes<a class="headerlink" href="#phonemes" title="Permalink to this headline">¶</a></h4>
<p>You&#8217;ll notice that sometimes, the <code class="docutils literal"><span class="pre">say</span></code> function doesn&#8217;t accurately translate
from English words into the correct sound. To have fine grained control of the
output, use phonemes: the building-block sounds of language.</p>
<p>The advantage of using phonemes is that you don&#8217;t have to know how to spell!
Rather, you only have to know how to say the word in order to spell it
phonetically.</p>
<p>A full list of the phonemes the speech synthesiser understands can be found in
the API documentation for speech. Alternatively, save yourself a lot of time by
passing in English words to the <code class="docutils literal"><span class="pre">translate</span></code> function. It&#8217;ll return a first
approximation of the phonemes it would use to generate the audio. This result
can be hand-edited to improve the accuracy, inflection and emphasis (so it
sounds more natural).</p>
<p>The <code class="docutils literal"><span class="pre">pronounce</span></code> function is used for phoneme output like this:</p>
<div class="highlight-python"><div class="highlight"><pre>speech.pronounce(&quot;/HEH5EH4EH3EH2EH2EH3EH4EH5EHLP.”)
</pre></div>
</div>
<p>How could you improve on The Doctor&#8217;s code to make it use phonemes?</p>
</div>
<div class="section" id="sing-a-song-of-micro-bit">
<h4>Sing A Song of Micro:bit<a class="headerlink" href="#sing-a-song-of-micro-bit" title="Permalink to this headline">¶</a></h4>
<p>By changing the <code class="docutils literal"><span class="pre">pitch</span></code> setting and calling the <code class="docutils literal"><span class="pre">sing</span></code> function it&#8217;s
possible to make the device sing (although it&#8217;s not going to win Eurovision any
time soon).</p>
<p>The mapping from pitch numbers to musical notes is shown below:</p>
<img alt="_images/speech-pitch1.png" src="_images/speech-pitch1.png" />
<p>The <code class="docutils literal"><span class="pre">sing</span></code> function must take phonemes and pitch as input like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">speech</span><span class="o">.</span><span class="n">sing</span><span class="p">(</span><span class="s2">&quot;#115DOWWWW&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice how the pitch to be sung is prepended to the phoneme with a hash
(<code class="docutils literal"><span class="pre">#</span></code>). The pitch will remain the same for subsequent phonemes until a new
pitch is annotated.</p>
<p>The following example demonstrates how all three generative functions (<code class="docutils literal"><span class="pre">say</span></code>,
<code class="docutils literal"><span class="pre">pronounce</span></code> and <code class="docutils literal"><span class="pre">sing</span></code>) can be used to produce speech like output:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">speech</span>
<span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="c1"># The say method attempts to convert English into phonemes.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;I can sing!&quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;Listen to me!&quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Clearing the throat requires the use of phonemes. Changing</span>
<span class="c1"># the pitch and speed also helps create the right effect.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">pronounce</span><span class="p">(</span><span class="s2">&quot;AEAE/HAEMM&quot;</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>  <span class="c1"># Ahem</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Singing requires a phoneme with an annotated pitch for each syllable.</span>
<span class="n">solfa</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;#115DOWWWWWW&quot;</span><span class="p">,</span>   <span class="c1"># Doh</span>
    <span class="s2">&quot;#103REYYYYYY&quot;</span><span class="p">,</span>   <span class="c1"># Re</span>
    <span class="s2">&quot;#94MIYYYYYY&quot;</span><span class="p">,</span>    <span class="c1"># Mi</span>
    <span class="s2">&quot;#88FAOAOAOAOR&quot;</span><span class="p">,</span>  <span class="c1"># Fa</span>
    <span class="s2">&quot;#78SOHWWWWW&quot;</span><span class="p">,</span>    <span class="c1"># Soh</span>
    <span class="s2">&quot;#70LAOAOAOAOR&quot;</span><span class="p">,</span>  <span class="c1"># La</span>
    <span class="s2">&quot;#62TIYYYYYY&quot;</span><span class="p">,</span>    <span class="c1"># Ti</span>
    <span class="s2">&quot;#58DOWWWWWW&quot;</span><span class="p">,</span>    <span class="c1"># Doh</span>
<span class="p">]</span>

<span class="c1"># Sing the scale ascending in pitch.</span>
<span class="n">song</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">solfa</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">sing</span><span class="p">(</span><span class="n">song</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="c1"># Reverse the list of syllables.</span>
<span class="n">solfa</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">song</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">solfa</span><span class="p">)</span>
<span class="c1"># Sing the scale descending in pitch.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">sing</span><span class="p">(</span><span class="n">song</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-tutorials/network"></span><div class="section" id="network">
<h3>Network<a class="headerlink" href="#network" title="Permalink to this headline">¶</a></h3>
<p>It is possible to connect devices together to send and receive
messages to and from each other. This is called a network. A network of
interconnected networks is called an internet. The Internet is an internet
of all the internets.</p>
<p>Networking is hard and this is reflected in the program described below.
However, the beautiful thing about this project is it contains all the common
aspects of network programming you need to know about. It&#8217;s also remarkably
simple and fun.</p>
<p>But first, let&#8217;s set the scene...</p>
<div class="section" id="connection">
<h4>Connection<a class="headerlink" href="#connection" title="Permalink to this headline">¶</a></h4>
<p>Imagine a network as a series of layers. At the very bottom is the most
fundamental aspect of communication: there needs to be some sort of way for
a signal to get from one device to the other. Sometimes this is done via a
radio connection, but in this example we&#8217;re simply going to use two wires.</p>
<img alt="_images/network.png" src="_images/network.png" />
<p>It is upon this foundation that we can build all the other layers in the
<em>network stack</em>.</p>
<p>As the diagram shows, blue and red micro:bits are connected via crocodile
leads. Both use pin 1 for output and pin 2 for input. The output from one
device is connected to the input on the other. It&#8217;s a bit like knowing which
way round to hold a telephone handset - one end has a microphone (the input)
and the other a speaker (the output). The recording of your voice via your
microphone is played out of the other person&#8217;s speaker. If you hold the
phone the wrong way up, you&#8217;ll get strange results!</p>
<p>It&#8217;s exactly the same in this instance: you must connect the wires properly!</p>
</div>
<div class="section" id="signal">
<h4>Signal<a class="headerlink" href="#signal" title="Permalink to this headline">¶</a></h4>
<p>The next layer in the <em>network stack</em> is the signal. Often this will depend
upon the characteristics of the connection. In our example it&#8217;s simply
digital on and off signals sent down the wires via the IO pins.</p>
<p>If you remember, it&#8217;s possible to use the IO pins like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pin1</span><span class="o">.</span><span class="n">write_digital</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># switch the signal on</span>
<span class="n">pin1</span><span class="o">.</span><span class="n">write_digital</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># switch the signal off</span>
<span class="nb">input</span> <span class="o">=</span> <span class="n">pin2</span><span class="o">.</span><span class="n">read_digital</span><span class="p">()</span>  <span class="c1"># read the value of the signal (either 1 or 0)</span>
</pre></div>
</div>
<p>The next step involves describing how to use and handle a signal. For that we
need a...</p>
</div>
<div class="section" id="protocol">
<h4>Protocol<a class="headerlink" href="#protocol" title="Permalink to this headline">¶</a></h4>
<p>If you ever meet the Queen there are expectations about how you ought to
behave. For example, when she arrives you may bow or curtsey, if she offers her
hand politely shake it, refer to her as &#8220;your majesty&#8221; and thereafter as
&#8220;ma&#8217;am&#8221; and so on. This set of rules is called the royal protocol. A protocol
explains how to behave given a specific situation (such as meeting the
Queen). A protocol is pre-defined to ensure everyone understands what&#8217;s going
on before a given situation arises.</p>
<img alt="_images/queen.jpg" src="_images/queen.jpg" />
<p>It is for this reason that we define and use protocols for communicating
messages via a computer network. Computers need to agree before hand how to
send and receive messages. Perhaps the best known protocol is the
hypertext transfer protocol (HTTP) used by the world wide web.</p>
<p>Another famous protocol for sending messages (that pre-dates computers) is
Morse code. It defines how to send character-based messages via on/off signals
of long or short durations. Often such signals are played as bleeps. Long
durations are called dashes (<code class="docutils literal"><span class="pre">-</span></code>) whereas short durations are dots (<code class="docutils literal"><span class="pre">.</span></code>).
By combining dashes and dots Morse defines a way to send characters. For
example, here&#8217;s how the standard Morse alphabet is defined:</p>
<div class="highlight-python"><div class="highlight"><pre>.-    A     ---   J     ...   S     .----  1      ----.  9
-...  B     -.-   K     -     T     ..---  2      -----  0
-.-.  C     .-..  L     ..-   U     ...--  3
-..   D     --    M     ...-  V     ....-  4
.     E     -.    N     .--   W     .....  5
..-.  F     ---   O     -..-  X     -....  6
--.   G     .--.  P     -.--  Y     --...  7
....  H     --.-  Q     --..  Z     ---..  8
..    I     .-.   R
</pre></div>
</div>
<p>Given the chart above, to send the character &#8220;H&#8221; the signal is switched on four
times for a short duration, indicating four dots (<code class="docutils literal"><span class="pre">....</span></code>). For the letter
&#8220;L&#8221; the signal is also switched on four times, but the second signal has a
longer duration (<code class="docutils literal"><span class="pre">.-..</span></code>).</p>
<p>Obviously, the timing of the signal is important: we need to tell a dot from a
dash. That&#8217;s another point of a protocol, to agree such things so everyone&#8217;s
implementation of the protocol will work with everyone elses. In this instance
we&#8217;ll just say that:</p>
<ul class="simple">
<li>A signal with a duration less than 250 milliseconds is a dot.</li>
<li>A signal with a duration from 250 milliseconds to less than 500 milliseconds is a dash.</li>
<li>Any other duration of signal is ignored.</li>
<li>A pause / gap in the signal of greater than 500 milliseconds indicates the end of a character.</li>
</ul>
<p>In this way, the sending of a letter &#8220;H&#8221; is defined as four &#8220;on&#8221; signals that
last no longer than 250 milliseconds each, followed by a pause of greater than
500 milliseconds (indicating the end of the character).</p>
</div>
<div class="section" id="message">
<h4>Message<a class="headerlink" href="#message" title="Permalink to this headline">¶</a></h4>
<p>We&#8217;re finally at a stage where we can build a message - a message that actually
means something to us humans. This is the top-most layer of our <em>network
stack</em>.</p>
<p>Using the protocol defined above I can send the following sequence of signals
down the physical wire to the other micro:bit:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...././.-../.-../---/.--/---/.-./.-../-..</span>
</pre></div>
</div>
<p>Can you work out what it says?</p>
</div>
<div class="section" id="application">
<h4>Application<a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h4>
<p>It&#8217;s all very well having a network stack, but you also need a way to
interact with it - some form of application to send and receive messages.
While HTTP is interesting <em>most</em> people don&#8217;t know about it and let their
web-browser handle it - the underlying <em>network stack</em> of the world wide web
is hidden (as it should be).</p>
<p>So, what sort of application should we write for the BBC micro:bit? How should
it work, from the user&#8217;s point of view?</p>
<p>Obviously, to send a message you should be able to input dots and dashes (we
can use button A for that). If we want to see the message we sent or just
received we should be able to trigger it to scroll across the display (we can
use button B for that). Finally, this being Morse code, if a speaker is
attached, we should be able to play the beeps as a form of aural feedback while
the user is entering their message.</p>
</div>
<div class="section" id="the-end-result">
<h4>The End Result<a class="headerlink" href="#the-end-result" title="Permalink to this headline">¶</a></h4>
<p>Here&#8217;s the program, in all its glory and annotated with plenty of comments so
you can see what&#8217;s going on:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">music</span>


<span class="c1"># A lookup table of morse codes and associated characters.</span>
<span class="n">MORSE_CODE_LOOKUP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;.-&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-...&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-.-.&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-..&quot;</span><span class="p">:</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span>
    <span class="s2">&quot;.&quot;</span><span class="p">:</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span>
    <span class="s2">&quot;..-.&quot;</span><span class="p">:</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--.&quot;</span><span class="p">:</span> <span class="s2">&quot;G&quot;</span><span class="p">,</span>
    <span class="s2">&quot;....&quot;</span><span class="p">:</span> <span class="s2">&quot;H&quot;</span><span class="p">,</span>
    <span class="s2">&quot;..&quot;</span><span class="p">:</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span>
    <span class="s2">&quot;.---&quot;</span><span class="p">:</span> <span class="s2">&quot;J&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-.-&quot;</span><span class="p">:</span> <span class="s2">&quot;K&quot;</span><span class="p">,</span>
    <span class="s2">&quot;.-..&quot;</span><span class="p">:</span> <span class="s2">&quot;L&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-.&quot;</span><span class="p">:</span> <span class="s2">&quot;N&quot;</span><span class="p">,</span>
    <span class="s2">&quot;---&quot;</span><span class="p">:</span> <span class="s2">&quot;O&quot;</span><span class="p">,</span>
    <span class="s2">&quot;.--.&quot;</span><span class="p">:</span> <span class="s2">&quot;P&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--.-&quot;</span><span class="p">:</span> <span class="s2">&quot;Q&quot;</span><span class="p">,</span>
    <span class="s2">&quot;.-.&quot;</span><span class="p">:</span> <span class="s2">&quot;R&quot;</span><span class="p">,</span>
    <span class="s2">&quot;...&quot;</span><span class="p">:</span> <span class="s2">&quot;S&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-&quot;</span><span class="p">:</span> <span class="s2">&quot;T&quot;</span><span class="p">,</span>
    <span class="s2">&quot;..-&quot;</span><span class="p">:</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span>
    <span class="s2">&quot;...-&quot;</span><span class="p">:</span> <span class="s2">&quot;V&quot;</span><span class="p">,</span>
    <span class="s2">&quot;.--&quot;</span><span class="p">:</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-..-&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-.--&quot;</span><span class="p">:</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--..&quot;</span><span class="p">:</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;.----&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;..---&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;...--&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;....-&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
    <span class="s2">&quot;.....&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-....&quot;</span><span class="p">:</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--...&quot;</span><span class="p">:</span> <span class="s2">&quot;7&quot;</span><span class="p">,</span>
    <span class="s2">&quot;---..&quot;</span><span class="p">:</span> <span class="s2">&quot;8&quot;</span><span class="p">,</span>
    <span class="s2">&quot;----.&quot;</span><span class="p">:</span> <span class="s2">&quot;9&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-----&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
<span class="p">}</span>


<span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="nb">buffer</span><span class="p">):</span>
    <span class="c1"># Attempts to get the buffer of Morse code data from the lookup table. If</span>
    <span class="c1"># it&#39;s not there, just return a full stop.</span>
    <span class="k">return</span> <span class="n">MORSE_CODE_LOOKUP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">buffer</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span>


<span class="c1"># How to display a single dot.</span>
<span class="n">DOT</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;00000:&quot;</span>
            <span class="s2">&quot;00000:&quot;</span>
            <span class="s2">&quot;00900:&quot;</span>
            <span class="s2">&quot;00000:&quot;</span>
            <span class="s2">&quot;00000:&quot;</span><span class="p">)</span>


<span class="c1"># How to display a single dash.</span>
<span class="n">DASH</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;00000:&quot;</span>
             <span class="s2">&quot;00000:&quot;</span>
             <span class="s2">&quot;09990:&quot;</span>
             <span class="s2">&quot;00000:&quot;</span>
             <span class="s2">&quot;00000:&quot;</span><span class="p">)</span>


<span class="c1"># To create a DOT you need to hold the button for less than 250ms.</span>
<span class="n">DOT_THRESHOLD</span> <span class="o">=</span> <span class="mi">250</span>
<span class="c1"># To create a DASH you need to hold the button for less than 500ms.</span>
<span class="n">DASH_THRESHOLD</span> <span class="o">=</span> <span class="mi">500</span>


<span class="c1"># Holds the incoming Morse signals.</span>
<span class="nb">buffer</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="c1"># Holds the translated Morse as characters.</span>
<span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="c1"># The time from which the device has been waiting for the next keypress.</span>
<span class="n">started_to_wait</span> <span class="o">=</span> <span class="n">running_time</span><span class="p">()</span>


<span class="c1"># Put the device in a loop to wait for and react to key presses.</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># Work out how long the device has been waiting for a keypress.</span>
    <span class="n">waiting</span> <span class="o">=</span> <span class="n">running_time</span><span class="p">()</span> <span class="o">-</span> <span class="n">started_to_wait</span>
    <span class="c1"># Reset the timestamp for the key_down_time.</span>
    <span class="n">key_down_time</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c1"># If button_a is held down, then...</span>
    <span class="k">while</span> <span class="n">button_a</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">():</span>
        <span class="c1"># Play a beep - this is Morse code y&#39;know ;-)</span>
        <span class="n">music</span><span class="o">.</span><span class="n">pitch</span><span class="p">(</span><span class="mi">880</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="c1"># Set pin1 (output) to &quot;on&quot;</span>
        <span class="n">pin1</span><span class="o">.</span><span class="n">write_digital</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1"># ...and if there&#39;s not a key_down_time then set it to now!</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">key_down_time</span><span class="p">:</span>
            <span class="n">key_down_time</span> <span class="o">=</span> <span class="n">running_time</span><span class="p">()</span>
    <span class="c1"># Alternatively, if pin2 (input) is getting a signal, pretend it&#39;s a</span>
    <span class="c1"># button_a key press...</span>
    <span class="k">while</span> <span class="n">pin2</span><span class="o">.</span><span class="n">read_digital</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">key_down_time</span><span class="p">:</span>
            <span class="n">key_down_time</span> <span class="o">=</span> <span class="n">running_time</span><span class="p">()</span>
    <span class="c1"># Get the current time and call it key_up_time.</span>
    <span class="n">key_up_time</span> <span class="o">=</span> <span class="n">running_time</span><span class="p">()</span>
    <span class="c1"># Set pin1 (output) to &quot;off&quot;</span>
    <span class="n">pin1</span><span class="o">.</span><span class="n">write_digital</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># If there&#39;s a key_down_time (created when button_a was first pressed</span>
    <span class="c1"># down).</span>
    <span class="k">if</span> <span class="n">key_down_time</span><span class="p">:</span>
        <span class="c1"># ... then work out for how long it was pressed.</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">key_up_time</span> <span class="o">-</span> <span class="n">key_down_time</span>
        <span class="c1"># If the duration is less than the max length for a &quot;dot&quot; press...</span>
        <span class="k">if</span> <span class="n">duration</span> <span class="o">&lt;</span> <span class="n">DOT_THRESHOLD</span><span class="p">:</span>
            <span class="c1"># ... then add a dot to the buffer containing incoming Morse codes</span>
            <span class="c1"># and display a dot on the display.</span>
            <span class="nb">buffer</span> <span class="o">+=</span> <span class="s1">&#39;.&#39;</span>
            <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">DOT</span><span class="p">)</span>
        <span class="c1"># Else, if the duration is less than the max length for a &quot;dash&quot;</span>
        <span class="c1"># press... (but longer than that for a DOT ~ handled above)</span>
        <span class="k">elif</span> <span class="n">duration</span> <span class="o">&lt;</span> <span class="n">DASH_THRESHOLD</span><span class="p">:</span>
            <span class="c1"># ... then add a dash to the buffer and display a dash.</span>
            <span class="nb">buffer</span> <span class="o">+=</span> <span class="s1">&#39;-&#39;</span>
            <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">DASH</span><span class="p">)</span>
        <span class="c1"># Otherwise, any other sort of keypress duration is ignored (this isn&#39;t</span>
        <span class="c1"># needed, but added for &quot;understandability&quot;).</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># The button press has been handled, so reset the time from which the</span>
        <span class="c1"># device is starting to wait for a  button press.</span>
        <span class="n">started_to_wait</span> <span class="o">=</span> <span class="n">running_time</span><span class="p">()</span>
    <span class="c1"># Otherwise, there hasn&#39;t been a button_a press during this cycle of the</span>
    <span class="c1"># loop, so check there&#39;s not been a pause to indicate an end of the</span>
    <span class="c1"># incoming Morse code character. The pause must be longer than a DASH</span>
    <span class="c1"># code&#39;s duration.</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">waiting</span> <span class="o">&gt;</span> <span class="n">DASH_THRESHOLD</span><span class="p">:</span>
        <span class="c1"># There is a buffer and it&#39;s reached the end of a code so...</span>
        <span class="c1"># Decode the incoming buffer.</span>
        <span class="n">character</span> <span class="o">=</span> <span class="n">decode</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
        <span class="c1"># Reset the buffer to empty.</span>
        <span class="nb">buffer</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="c1"># Show the decoded character.</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">character</span><span class="p">)</span>
        <span class="c1"># Add the character to the message.</span>
        <span class="n">message</span> <span class="o">+=</span> <span class="n">character</span>
    <span class="c1"># Finally, if button_b was pressed while all the above was going on...</span>
    <span class="k">if</span> <span class="n">button_b</span><span class="o">.</span><span class="n">was_pressed</span><span class="p">():</span>
        <span class="c1"># ... display the message,</span>
        <span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="c1"># then reset it to empty (ready for a new message).</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<p>How would you improve it? Can you change the definition of a dot and a dash so
speedy Morse code users can use it? What happens if both devices are sending at
the same time? What might you do to handle this situation?</p>
</div>
</div>
<span id="document-tutorials/radio"></span><div class="section" id="radio">
<h3>Radio<a class="headerlink" href="#radio" title="Permalink to this headline">¶</a></h3>
<p>Interaction at a distance feels like magic.</p>
<p>Magic might be useful if you&#8217;re an elf, wizard or unicorn, but such things only
exist in stories.</p>
<p>However, there&#8217;s something much better than magic: physics!</p>
<p>Wireless interaction is all about physics: radio waves (a type of
electromagnetic radiation, similar to visible light) have some sort of property
(such as their amplitude, phase or pulse width) modulated by a transmitter in
such a way that information can be encoded and, thus, broadcast. When radio
waves encounter an electrical conductor (i.e. an aerial), they cause an
alternating current from which the information in the waves can be extracted
and transformed back into its original form.</p>
<div class="section" id="layers-upon-layers">
<h4>Layers upon Layers<a class="headerlink" href="#layers-upon-layers" title="Permalink to this headline">¶</a></h4>
<p>If you remember, networks are built in layers.</p>
<p>The most fundamental requirement for a network is some sort of connection that
allows a signal to get from one device to the other. In our networking
tutorial we used wires connected to the I/O pins. Thanks to the radio module we
can do away with wires and use the physics summarised above as the invisible
connection between devices.</p>
<p>The next layer up in the network stack is also different from the example in
the networking tutorial. With the wired example we used digital on and off to
send and read a signal from the pins. With the built-in radio on the
micro:bit the smallest useful part of the signal is a byte.</p>
</div>
<div class="section" id="bytes">
<h4>Bytes<a class="headerlink" href="#bytes" title="Permalink to this headline">¶</a></h4>
<p>A byte is a unit of information that (usually) consists of eight bits. A bit is
the smallest possible unit of information since it can only be in two states:
on or off.</p>
<p>Bytes work like a sort of abacus: each position in the byte is like a
column in an abacus - they represent an associated number. In an abacus these
are usually thousands, hundreds, tens and units (in UK parlance). In a byte
they are 128, 64, 32, 16, 8, 4, 2 and 1. As bits (on/off
signals) are sent over the air, they are re-combined into bytes by the
recipient.</p>
<p>Have you spotted the pattern? (Hint: base 2.)</p>
<p>By adding the numbers associated with the positions in a byte that are set to
&#8220;on&#8221; we can represent numbers between 0 and 255. The image below shows how this
works with five bits and counting from zero to 32:</p>
<img alt="_images/binary_count.gif" src="_images/binary_count.gif" />
<p>If we can agree what each one of the 255 numbers (encoded by a byte) represents ~ such as a character ~ then we can start to send text one character per byte
at a time.</p>
<p>Funnily enough, people have already
<a class="reference external" href="https://en.wikipedia.org/wiki/ASCII">thought of this</a> ~ using bytes to
encode and decode information is commonplace. This approximately corresponds to
the Morse-code &#8220;protocol&#8221; layer in the wired networking example.</p>
<p>A really great series of child (and teacher) friendly explanations of &#8220;all
things bytes&#8221; can be found at the
<a class="reference external" href="http://csunplugged.org/binary-numbers/">CS unplugged</a> website.</p>
</div>
<div class="section" id="addressing">
<h4>Addressing<a class="headerlink" href="#addressing" title="Permalink to this headline">¶</a></h4>
<p>The problem with radio is that you can&#8217;t transmit directly to one person.
Anyone with an appropriate aerial can receive the messages you transmit. As a
result it&#8217;s important to be able to differentiate who should be receiving
broadcasts.</p>
<p>The way the radio built into the micro:bit solves this problem is quite simple:</p>
<ul class="simple">
<li>It&#8217;s possible to tune the radio to different channels (numbered 0-100). This works in exactly the same way as kids&#8217; walkie-talkie radios: everyone tunes into the same channel and everyone hears what everyone else broadcasts via that channel. As with walkie-talkies, if you use adjacent channels there is a slight possibility of interference.</li>
<li>The radio module allows you to specify two pieces of information: an address and a group. The address is like a postal address whereas a group is like a specific recipient at the address. The important thing is the radio will filter out messages that it receives that do not match <em>your</em> address and group. As a result, it&#8217;s important to pre-arrange the address and group your application is going to use.</li>
</ul>
<p>Of course, the micro:bit is still receiving broadcast messages for other
address/group combinations. The important thing is you don&#8217;t need to worry
about filtering those out. Nevertheless, if someone were clever enough, they
could just read <em>all the wireless network traffic</em> no matter what the target
address/group was supposed to be. In this case, it&#8217;s <em>essential</em> to use
encrypted means of communication so only the desired recipient can actually
read the message that was broadcast. Cryptography is a fascinating subject but,
unfortunately, beyond the scope of this tutorial.</p>
</div>
<div class="section" id="fireflies">
<h4>Fireflies<a class="headerlink" href="#fireflies" title="Permalink to this headline">¶</a></h4>
<p>This is a firefly:</p>
<img alt="_images/firefly.gif" src="_images/firefly.gif" />
<p>It&#8217;s a sort of bug that uses bioluminescence to signal (without wires) to its
friends. Here&#8217;s what they look like when they signal to each other:</p>
<img alt="_images/fireflies.gif" src="_images/fireflies.gif" />
<p>The BBC have <a class="reference external" href="http://www.bbc.com/earth/story/20160224-worlds-largest-gathering-of-synchronised-fireflies">rather a beautiful video</a> of fireflies available online.</p>
<p>We&#8217;re going to use the radio module to create something akin to a swarm of
fireflies signalling to each other.</p>
<p>First <code class="docutils literal"><span class="pre">import</span> <span class="pre">radio</span></code> to make the functions available to your Python program.
Then call the <code class="docutils literal"><span class="pre">radio.on()</span></code> function to turn the radio on. Since
the radio draws power and takes up memory we&#8217;ve made it so <em>you</em> decide
when it is enabled (there is, of course a <code class="docutils literal"><span class="pre">radio.off()</span></code> function).</p>
<p>At this point the radio module is configured to sensible defaults that make
it compatible with other platforms that may target the BBC micro:bit. It is
possible to control many of the features discussed above (such as channel and
addressing) as well as the amount of power used to broadcast messages and the
amount of RAM the incoming message queue will take up. The API documentation
contains all the information you need to configure the radio to your needs.</p>
<p>Assuming we&#8217;re happy with the defaults, the simplest way to send a message is
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;a message&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The example uses the <code class="docutils literal"><span class="pre">send</span></code> function to simply broadcast the string
&#8220;a message&#8221;. To receive a message is even easier:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_message</span> <span class="o">=</span> <span class="n">radio</span><span class="o">.</span><span class="n">receive</span><span class="p">()</span>
</pre></div>
</div>
<p>As messages are received they are put on a message queue. The <code class="docutils literal"><span class="pre">receive</span></code>
function returns the oldest message from the queue as a string, making space
for a new incoming message. If the message queue fills up, then new incoming
messages are ignored.</p>
<p>That&#8217;s really all there is to it! (Although the radio module is also powerful
enough that you can send any arbitrary type of data, not just strings. See the
API documentation for how this works.)</p>
<p>Armed with this knowledge, it&#8217;s simple to make micro:bit fireflies like this:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c1"># A micro:bit Firefly.</span>
<span class="c1"># By Nicholas H.Tollervey. Released to the public domain.</span>
<span class="kn">import</span> <span class="nn">radio</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Image</span><span class="p">,</span> <span class="n">button_a</span><span class="p">,</span> <span class="n">sleep</span>

<span class="c1"># Create the &quot;flash&quot; animation frames. Can you work out how it&#39;s done?</span>
<span class="n">flash</span> <span class="o">=</span> <span class="p">[</span><span class="n">Image</span><span class="p">()</span><span class="o">.</span><span class="n">invert</span><span class="p">()</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mi">9</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>

<span class="c1"># The radio won&#39;t work unless it&#39;s switched on.</span>
<span class="n">radio</span><span class="o">.</span><span class="n">on</span><span class="p">()</span>

<span class="c1"># Event loop.</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># Button A sends a &quot;flash&quot; message.</span>
    <span class="k">if</span> <span class="n">button_a</span><span class="o">.</span><span class="n">was_pressed</span><span class="p">():</span>
        <span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;flash&#39;</span><span class="p">)</span>  <span class="c1"># a-ha</span>
    <span class="c1"># Read any incoming messages.</span>
    <span class="n">incoming</span> <span class="o">=</span> <span class="n">radio</span><span class="o">.</span><span class="n">receive</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">incoming</span> <span class="o">==</span> <span class="s1">&#39;flash&#39;</span><span class="p">:</span>
        <span class="c1"># If there&#39;s an incoming &quot;flash&quot; message display</span>
        <span class="c1"># the firefly flash animation after a random short</span>
        <span class="c1"># pause.</span>
        <span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">350</span><span class="p">))</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">flash</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="c1"># Randomly re-broadcast the flash message after a</span>
        <span class="c1"># slight delay.</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">sleep</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
            <span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;flash&#39;</span><span class="p">)</span>  <span class="c1"># a-ha</span>
</pre></div>
</div>
<p>The import stuff happens in the event loop. First, it checks if button A was
pressed and, if it was, uses the radio to send the message &#8220;flash&#8221;. Then it
reads any messages from the message queue with <code class="docutils literal"><span class="pre">radio.receive()</span></code>. If there is
a message it sleeps a short, random period of time (to make the display more
interesting) and uses <code class="docutils literal"><span class="pre">display.show()</span></code> to animate a firefly flash. Finally,
to make things a bit exciting, it chooses a random number so that it has a 1 in
10 chance of re-broadcasting the &#8220;flash&#8221; message to anyone else (this is how
it&#8217;s possible to sustain the firefly display among several devices). If it
decides to re-broadcast then it waits for half a second (so the display from
the initial flash message has chance to die down) before sending
the &#8220;flash&#8221; signal again. Because this code is enclosed within a <code class="docutils literal"><span class="pre">while</span> <span class="pre">True</span></code>
block, it loops back to the beginning of the event loop and repeats this
process forever.</p>
<p>The end result (using a group of micro:bits) should look something like this:</p>
<img alt="_images/mb-firefly.gif" src="_images/mb-firefly.gif" />
</div>
</div>
<span id="document-tutorials/next"></span><div class="section" id="next-steps">
<h3>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h3>
<p>These tutorials are only the first steps in using MicroPython with the
BBC micro:bit. A musical analogy: you&#8217;ve got a basic understanding of
a very simple instrument and confidently play &#8220;Three Blind Mice&#8221;.</p>
<p>This is an achievement to build upon.</p>
<p>Ahead of you is an exciting journey to becoming a virtuoso coder.</p>
<p>You will encounter frustration, failure and foolishness. When you do please
remember that you&#8217;re not alone. Python has a secret weapon: the most amazing
community of programmers on the planet. Connect with this community and you
will make friends, find mentors, support each other and share resources.</p>
<p>The examples in the tutorials are simple to explain but may not be the simplest
or most efficient implementations. We&#8217;ve left out lots of <em>really fun stuff</em> so
we could concentrate on arming you with the basics. If you <em>really</em> want to
know how to make MicroPython fly on the BBC micro:bit then read the API
reference documentation. It contains information about <em>all</em> the capabilities
available to you.</p>
<p>Explore, experiment and be fearless trying things out ~ for these are the
attributes of a virtuoso coder. To encourage you we have hidden a number of
Easter eggs in MicroPython and the code editors (both TouchDevelop and Mu).
They&#8217;re fun rewards for looking &#8220;under the hood&#8221; and &#8220;poking with a stick&#8221;.</p>
<p>Such skill in Python is valuable: it&#8217;s one of the world&#8217;s most popular
professional programming languages.</p>
<p>Amaze us with your code! Make things that delight us! Most of all, have fun!</p>
<p>Happy hacking!</p>
</div>
</div>
<p>Python is one of the <a class="reference external" href="http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html">world&#8217;s most popular</a> programming languages. Every day, without
realising, you probably use software written using Python. All sorts of
companies and organisations use Python for a diverse range of applications.
Google, NASA, Bank of America, Disney, CERN, YouTube, Mozilla, The Guardian -
the list goes on and covers all sectors of the economy, science and the arts.</p>
<p>For example, do you remember the announcement of the <a class="reference external" href="http://www.bbc.co.uk/news/science-environment-35552207">discovery of gravitational waves</a>? The instruments used to make the measurements were controlled <a class="reference external" href="https://www.reddit.com/r/IAmA/comments/45g8qu/we_are_the_ligo_scientific_collaboration_and_we/czxnlux">with Python</a>.</p>
<p>Put simply, if you teach or learn Python, you are developing a highly valuable
skill that applies to all areas of human endeavour.</p>
<p>One such area is the BBC&#8217;s amazing micro:bit device. It runs a version of
Python called MicroPython that&#8217;s designed to run on small computers like the BBC
micro:bit. It&#8217;s a full implementation of Python 3 so when you move onto other
things (such as programming Python on a Raspberry Pi) you&#8217;ll use exactly the
same language.</p>
<p>MicroPython does not include all the standard code libraries that come with
&#8220;regular&#8221; Python. However, we have created a special <code class="docutils literal"><span class="pre">microbit</span></code> module in
MicroPython that lets you control the device.</p>
<p>Python and MicroPython are free software. Not only does this mean you don&#8217;t pay
anything to use Python, but you are also free to contribute back to the Python
community. This may be in the form of code, documentation, bug reports, running
a community group or writing tutorials (like this one). In fact, all the Python
related resources for the BBC micro:bit have been created by an international
team of volunteers working in their free time.</p>
<p>These lessons introduce MicroPython and the BBC
micro:bit in easy-to-follow steps. Feel free to adopt and adapt them for
classroom based lessons, or perhaps just follow them on your own at home.</p>
<p>You&#8217;ll have most success if you explore, experiment and play. You can&#8217;t break
a BBC micro:bit by writing incorrect code. Just dive in!</p>
<p>A word of warning: <em>you will fail many times</em>, and that is fine. <strong>Failure is
how good software developers learn</strong>. Those of us who work as software
developers have a lot of fun tracking down bugs and avoiding the repetition of
mistakes.</p>
<p>If in doubt, remember the Zen of MicroPython:</p>
<div class="highlight-python"><div class="highlight"><pre>Code,
Hack it,
Less is more,
Keep it simple,
Small is beautiful,

Be brave! Break things! Learn and have fun!
Express yourself with MicroPython.

Happy hacking! :-)
</pre></div>
</div>
<p>Best of luck!</p>
</div>
</div>
<div class="toctree-wrapper compound" id="api-reference">
<span id="document-microbit_micropython_api"></span><div class="section" id="micro-bit-micropython-api">
<h2>micro:bit Micropython API<a class="headerlink" href="#micro-bit-micropython-api" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">As we work towards a 1.0 release, this API is subject to frequent changes. This page reflects the current micro:bit API in a developer-friendly (but not necessarily kid-friendly) way. The tutorials associated with this documentation are a good place to start for non-developers looking for information.</p>
</div>
<div class="section" id="the-microbit-module">
<h3>The microbit module<a class="headerlink" href="#the-microbit-module" title="Permalink to this headline">¶</a></h3>
<p>Everything directly related to interacting with the hardware lives in the <cite>microbit</cite> module.  For ease of use it&#8217;s recommended you start all scripts with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>The following documentation assumes you have done this.</p>
<p>There are a few functions available directly:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># sleep for the given number of milliseconds.</span>
<span class="n">sleep</span><span class="p">(</span><span class="n">ms</span><span class="p">)</span>
<span class="c1"># returns the number of milliseconds since the micro:bit was last switched on.</span>
<span class="n">running_time</span><span class="p">()</span>
<span class="c1"># makes the micro:bit enter panic mode (this usually happens when the DAL runs</span>
<span class="c1"># out of memory, and causes a sad face to be drawn on the display). The error</span>
<span class="c1"># code can be any arbitrary integer value.</span>
<span class="n">panic</span><span class="p">(</span><span class="n">error_code</span><span class="p">)</span>
<span class="c1"># resets the micro:bit.</span>
<span class="n">reset</span><span class="p">()</span>
</pre></div>
</div>
<p>The rest of the functionality is provided by objects and classes in the microbit module, as described below.</p>
<p>Note that the API exposes integers only (ie no floats are needed, but they may be accepted).  We thus use milliseconds for the standard time unit.</p>
<div class="section" id="buttons">
<h4>Buttons<a class="headerlink" href="#buttons" title="Permalink to this headline">¶</a></h4>
<p>There are 2 buttons:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">button_a</span>
<span class="n">button_b</span>
</pre></div>
</div>
<p>These are both objects and have the following methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># returns True or False to indicate if the button is pressed at the time of</span>
<span class="c1"># the method call.</span>
<span class="n">button</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">()</span>
<span class="c1"># returns True or False to indicate if the button was pressed since the device</span>
<span class="c1"># started or the last time this method was called.</span>
<span class="n">button</span><span class="o">.</span><span class="n">was_pressed</span><span class="p">()</span>
<span class="c1"># returns the running total of button presses, and resets this counter to zero</span>
<span class="n">button</span><span class="o">.</span><span class="n">get_presses</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="the-led-display">
<h4>The LED display<a class="headerlink" href="#the-led-display" title="Permalink to this headline">¶</a></h4>
<p>The LED display is exposed via the <cite>display</cite> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># gets the brightness of the pixel (x,y). Brightness can be from 0 (the pixel</span>
<span class="c1"># is off) to 9 (the pixel is at maximum brightness).</span>
<span class="n">display</span><span class="o">.</span><span class="n">get_pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="c1"># sets the brightness of the pixel (x,y) to val (between 0 [off] and 9 [max</span>
<span class="c1"># brightness], inclusive).</span>
<span class="n">display</span><span class="o">.</span><span class="n">set_pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="c1"># clears the display.</span>
<span class="n">display</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="c1"># shows the image.</span>
<span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># shows each image or letter in the iterable, with delay ms. in between each.</span>
<span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># scrolls a string across the display (more exciting than display.show for</span>
<span class="c1"># written messages).</span>
<span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="pins">
<h4>Pins<a class="headerlink" href="#pins" title="Permalink to this headline">¶</a></h4>
<p>Provide digital and analog input and output functionality, for the pins in the connector. Some pins are connected internally to the I/O that drives the LED matrix and the buttons.</p>
<p>Each pin is provided as an object directly in the <code class="docutils literal"><span class="pre">microbit</span></code> module.  This keeps the API relatively flat, making it very easy to use:</p>
<blockquote>
<div><ul class="simple">
<li>pin0</li>
<li>pin1</li>
<li>...</li>
<li>pin15</li>
<li>pin16</li>
<li><em>Warning: P17-P18 (inclusive) are unavailable.</em></li>
<li>pin19</li>
<li>pin20</li>
</ul>
</div></blockquote>
<p>Each of these pins are instances of the <code class="docutils literal"><span class="pre">MicroBitPin</span></code> class, which offers the following API:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># value can be 0, 1, False, True</span>
<span class="n">pin</span><span class="o">.</span><span class="n">write_digital</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># returns either 1 or 0</span>
<span class="n">pin</span><span class="o">.</span><span class="n">read_digital</span><span class="p">()</span>
<span class="c1"># value is between 0 and 1023</span>
<span class="n">pin</span><span class="o">.</span><span class="n">write_analog</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># returns an integer between 0 and 1023</span>
<span class="n">pin</span><span class="o">.</span><span class="n">read_analog</span><span class="p">()</span>
<span class="c1"># sets the period of the PWM output of the pin in milliseconds</span>
<span class="c1"># (see https://en.wikipedia.org/wiki/Pulse-width_modulation)</span>
<span class="n">pin</span><span class="o">.</span><span class="n">set_analog_period</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="c1"># sets the period of the PWM output of the pin in microseconds</span>
<span class="c1"># (see https://en.wikipedia.org/wiki/Pulse-width_modulation)</span>
<span class="n">pin</span><span class="o">.</span><span class="n">set_analog_period_microseconds</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="c1"># returns boolean</span>
<span class="n">pin</span><span class="o">.</span><span class="n">is_touched</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="images">
<h4>Images<a class="headerlink" href="#images" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You don&#8217;t always need to create one of these yourself - you can access the
image shown on the display directly with <cite>display.image</cite>. <cite>display.image</cite>
is just an instance of <cite>Image</cite>, so you can use all of the same methods.</p>
</div>
<p>Images API:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># creates an empty 5x5 image</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">()</span>
<span class="c1"># create an image from a string - each character in the string represents an</span>
<span class="c1"># LED - 0 (or space) is off and 9 is maximum brightness. The colon &quot;:&quot;</span>
<span class="c1"># indicates the end of a line.</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s1">&#39;90009:09090:00900:09090:90009:&#39;</span><span class="p">)</span>
<span class="c1"># create an empty image of given size</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
<span class="c1"># initialises an Image with the specified width and height. The buffer</span>
<span class="c1"># should be an array of length width * height</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="nb">buffer</span><span class="p">)</span>

<span class="c1"># methods</span>
<span class="c1"># returns the image&#39;s width (most often 5)</span>
<span class="n">image</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
<span class="c1"># returns the image&#39;s height (most often 5)</span>
<span class="n">image</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
<span class="c1"># sets the pixel at the specified position (between 0 and 9). May fail for</span>
<span class="c1"># constant images.</span>
<span class="n">image</span><span class="o">.</span><span class="n">set_pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="c1"># gets the pixel at the specified position (between 0 and 9)</span>
<span class="n">image</span><span class="o">.</span><span class="n">get_pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="c1"># returns a new image created by shifting the picture left &#39;n&#39; times.</span>
<span class="n">image</span><span class="o">.</span><span class="n">shift_left</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="c1"># returns a new image created by shifting the picture right &#39;n&#39; times.</span>
<span class="n">image</span><span class="o">.</span><span class="n">shift_right</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="c1"># returns a new image created by shifting the picture up &#39;n&#39; times.</span>
<span class="n">image</span><span class="o">.</span><span class="n">shift_up</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="c1"># returns a new image created by shifting the picture down &#39;n&#39; times.</span>
<span class="n">image</span><span class="o">.</span><span class="n">shift_down</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="c1"># get a compact string representation of the image</span>
<span class="nb">repr</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="c1"># get a more readable string representation of the image</span>
<span class="nb">str</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

<span class="c1">#operators</span>
<span class="c1"># returns a new image created by superimposing the two images</span>
<span class="n">image</span> <span class="o">+</span> <span class="n">image</span>
<span class="c1"># returns a new image created by multiplying the brightness of each pixel by n</span>
<span class="n">image</span> <span class="o">*</span> <span class="n">n</span>

<span class="c1"># built-in images.</span>
<span class="n">Image</span><span class="o">.</span><span class="n">HEART</span>
<span class="n">Image</span><span class="o">.</span><span class="n">HEART_SMALL</span>
<span class="n">Image</span><span class="o">.</span><span class="n">HAPPY</span>
<span class="n">Image</span><span class="o">.</span><span class="n">SMILE</span>
<span class="n">Image</span><span class="o">.</span><span class="n">SAD</span>
<span class="n">Image</span><span class="o">.</span><span class="n">CONFUSED</span>
<span class="n">Image</span><span class="o">.</span><span class="n">ANGRY</span>
<span class="n">Image</span><span class="o">.</span><span class="n">ASLEEP</span>
<span class="n">Image</span><span class="o">.</span><span class="n">SURPRISED</span>
<span class="n">Image</span><span class="o">.</span><span class="n">SILLY</span>
<span class="n">Image</span><span class="o">.</span><span class="n">FABULOUS</span>
<span class="n">Image</span><span class="o">.</span><span class="n">MEH</span>
<span class="n">Image</span><span class="o">.</span><span class="n">YES</span>
<span class="n">Image</span><span class="o">.</span><span class="n">NO</span>
<span class="n">Image</span><span class="o">.</span><span class="n">CLOCK12</span> <span class="c1"># clock at 12 o&#39; clock</span>
<span class="n">Image</span><span class="o">.</span><span class="n">CLOCK11</span>
<span class="o">...</span> <span class="c1"># many clocks (Image.CLOCKn)</span>
<span class="n">Image</span><span class="o">.</span><span class="n">CLOCK1</span> <span class="c1"># clock at 1 o&#39;clock</span>
<span class="n">Image</span><span class="o">.</span><span class="n">ARROW_N</span>
<span class="o">...</span> <span class="c1"># arrows pointing N, NE, E, SE, S, SW, W, NW (microbit.Image.ARROW_direction)</span>
<span class="n">Image</span><span class="o">.</span><span class="n">ARROW_NW</span>
<span class="n">Image</span><span class="o">.</span><span class="n">TRIANGLE</span>
<span class="n">Image</span><span class="o">.</span><span class="n">TRIANGLE_LEFT</span>
<span class="n">Image</span><span class="o">.</span><span class="n">CHESSBOARD</span>
<span class="n">Image</span><span class="o">.</span><span class="n">DIAMOND</span>
<span class="n">Image</span><span class="o">.</span><span class="n">DIAMOND_SMALL</span>
<span class="n">Image</span><span class="o">.</span><span class="n">SQUARE</span>
<span class="n">Image</span><span class="o">.</span><span class="n">SQUARE_SMALL</span>
<span class="n">Image</span><span class="o">.</span><span class="n">RABBIT</span>
<span class="n">Image</span><span class="o">.</span><span class="n">COW</span>
<span class="n">Image</span><span class="o">.</span><span class="n">MUSIC_CROTCHET</span>
<span class="n">Image</span><span class="o">.</span><span class="n">MUSIC_QUAVER</span>
<span class="n">Image</span><span class="o">.</span><span class="n">MUSIC_QUAVERS</span>
<span class="n">Image</span><span class="o">.</span><span class="n">PITCHFORK</span>
<span class="n">Image</span><span class="o">.</span><span class="n">XMAS</span>
<span class="n">Image</span><span class="o">.</span><span class="n">PACMAN</span>
<span class="n">Image</span><span class="o">.</span><span class="n">TARGET</span>
<span class="n">Image</span><span class="o">.</span><span class="n">TSHIRT</span>
<span class="n">Image</span><span class="o">.</span><span class="n">ROLLERSKATE</span>
<span class="n">Image</span><span class="o">.</span><span class="n">DUCK</span>
<span class="n">Image</span><span class="o">.</span><span class="n">HOUSE</span>
<span class="n">Image</span><span class="o">.</span><span class="n">TORTOISE</span>
<span class="n">Image</span><span class="o">.</span><span class="n">BUTTERFLY</span>
<span class="n">Image</span><span class="o">.</span><span class="n">STICKFIGURE</span>
<span class="n">Image</span><span class="o">.</span><span class="n">GHOST</span>
<span class="n">Image</span><span class="o">.</span><span class="n">SWORD</span>
<span class="n">Image</span><span class="o">.</span><span class="n">GIRAFFE</span>
<span class="n">Image</span><span class="o">.</span><span class="n">SKULL</span>
<span class="n">Image</span><span class="o">.</span><span class="n">UMBRELLA</span>
<span class="n">Image</span><span class="o">.</span><span class="n">SNAKE</span>
<span class="c1"># built-in lists - useful for animations, e.g. display.show(Image.ALL_CLOCKS)</span>
<span class="n">Image</span><span class="o">.</span><span class="n">ALL_CLOCKS</span>
<span class="n">Image</span><span class="o">.</span><span class="n">ALL_ARROWS</span>
</pre></div>
</div>
</div>
<div class="section" id="the-accelerometer">
<h4>The accelerometer<a class="headerlink" href="#the-accelerometer" title="Permalink to this headline">¶</a></h4>
<p>The accelerometer is accessed via the <code class="docutils literal"><span class="pre">accelerometer</span></code> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># read the X axis of the device. Measured in milli-g.</span>
<span class="n">accelerometer</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span>
<span class="c1"># read the Y axis of the device. Measured in milli-g.</span>
<span class="n">accelerometer</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span>
<span class="c1"># read the Z axis of the device. Measured in milli-g.</span>
<span class="n">accelerometer</span><span class="o">.</span><span class="n">get_z</span><span class="p">()</span>
<span class="c1"># get tuple of all three X, Y and Z readings (listed in that order).</span>
<span class="n">accelerometer</span><span class="o">.</span><span class="n">get_values</span><span class="p">()</span>
<span class="c1"># return the name of the current gesture.</span>
<span class="n">accelerometer</span><span class="o">.</span><span class="n">current_gesture</span><span class="p">()</span>
<span class="c1"># return True or False to indicate if the named gesture is currently active.</span>
<span class="n">accelerometer</span><span class="o">.</span><span class="n">is_gesture</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="c1"># return True or False to indicate if the named gesture was active since the</span>
<span class="c1"># last call.</span>
<span class="n">accelerometer</span><span class="o">.</span><span class="n">was_gesture</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="c1"># return a tuple of the gesture history. The most recent is listed last.</span>
<span class="n">accelerometer</span><span class="o">.</span><span class="n">get_gestures</span><span class="p">()</span>
</pre></div>
</div>
<p>The recognised gestures are: <code class="docutils literal"><span class="pre">up</span></code>, <code class="docutils literal"><span class="pre">down</span></code>, <code class="docutils literal"><span class="pre">left</span></code>, <code class="docutils literal"><span class="pre">right</span></code>, <code class="docutils literal"><span class="pre">face</span> <span class="pre">up</span></code>, <code class="docutils literal"><span class="pre">face</span> <span class="pre">down</span></code>, <code class="docutils literal"><span class="pre">freefall</span></code>, <code class="docutils literal"><span class="pre">3g</span></code>, <code class="docutils literal"><span class="pre">6g</span></code>, <code class="docutils literal"><span class="pre">8g</span></code>, <code class="docutils literal"><span class="pre">shake</span></code>.</p>
</div>
<div class="section" id="the-compass">
<h4>The compass<a class="headerlink" href="#the-compass" title="Permalink to this headline">¶</a></h4>
<p>The compass is accessed via the <cite>compass</cite> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># calibrate the compass (this is needed to get accurate readings).</span>
<span class="n">compass</span><span class="o">.</span><span class="n">calibrate</span><span class="p">()</span>
<span class="c1"># return a numeric indication of degrees offset from &quot;north&quot;.</span>
<span class="n">compass</span><span class="o">.</span><span class="n">heading</span><span class="p">()</span>
<span class="c1"># return an numeric indication of the strength of magnetic field around</span>
<span class="c1"># the micro:bit.</span>
<span class="n">compass</span><span class="o">.</span><span class="n">get_field_strength</span><span class="p">()</span>
<span class="c1"># returns True or False to indicate if the compass is calibrated.</span>
<span class="n">compass</span><span class="o">.</span><span class="n">is_calibrated</span><span class="p">()</span>
<span class="c1"># resets the compass to a pre-calibration state.</span>
<span class="n">compass</span><span class="o">.</span><span class="n">clear_calibration</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="i2c-bus">
<h4>I2C bus<a class="headerlink" href="#i2c-bus" title="Permalink to this headline">¶</a></h4>
<p>There is an I2C bus on the micro:bit that is exposed via the <cite>i2c</cite> object.  It has the following methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># read n bytes from device with addr; repeat=True means a stop bit won&#39;t</span>
<span class="c1"># be sent.</span>
<span class="n">i2c</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">addr</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># write buf to device with addr; repeat=True means a stop bit won&#39;t be sent.</span>
<span class="n">i2c</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">addr</span><span class="p">,</span> <span class="n">buf</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="uart">
<h4>UART<a class="headerlink" href="#uart" title="Permalink to this headline">¶</a></h4>
<p>Use <code class="docutils literal"><span class="pre">uart</span></code> to communicate with a serial device connected to the device&#8217;s I/O pins:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># set up communication (use pins 0 [TX] and 1 [RX]) with a baud rate of 9600.</span>
<span class="n">uart</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="c1"># return True or False to indicate if there are incoming characters waiting to</span>
<span class="c1"># be read.</span>
<span class="n">uart</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="c1"># return (read) n incoming characters.</span>
<span class="n">uart</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="c1"># return (read) as much incoming data as possible.</span>
<span class="n">uart</span><span class="o">.</span><span class="n">readall</span><span class="p">()</span>
<span class="c1"># return (read) all the characters to a newline character is reached.</span>
<span class="n">uart</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="c1"># read bytes into the referenced buffer.</span>
<span class="n">uart</span><span class="o">.</span><span class="n">readinto</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
<span class="c1"># write bytes from the buffer to the connected device.</span>
<span class="n">uart</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-microbit"></span><div class="section" id="module-microbit">
<span id="microbit-module"></span><h2>Microbit Module<a class="headerlink" href="#module-microbit" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">microbit</span></code> module gives you access to all the hardware that is built-in
into your board.</p>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="microbit.panic">
<code class="descclassname">microbit.</code><code class="descname">panic</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.panic" title="Permalink to this definition">¶</a></dt>
<dd><p>Enter a panic mode. Requires restart. Pass in an arbitrary integer &lt;= 255
to indicate a status:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">microbit</span><span class="o">.</span><span class="n">panic</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="microbit.reset">
<code class="descclassname">microbit.</code><code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart the board.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.sleep">
<code class="descclassname">microbit.</code><code class="descname">sleep</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for <code class="docutils literal"><span class="pre">n</span></code> milliseconds. One second is 1000 milliseconds, so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">microbit</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>will pause the execution for one second.  <code class="docutils literal"><span class="pre">n</span></code> can be an integer or
a floating point number.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.running_time">
<code class="descclassname">microbit.</code><code class="descname">running_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.running_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of milliseconds since the board was switched on or
restarted.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.temperature">
<code class="descclassname">microbit.</code><code class="descname">temperature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.temperature" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the temperature of the micro:bit in degrees Celcius.</p>
</dd></dl>

</div>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-button"></span><div class="section" id="buttons">
<h4>Buttons<a class="headerlink" href="#buttons" title="Permalink to this headline">¶</a></h4>
<p>There are two buttons on the board, called <code class="docutils literal"><span class="pre">button_a</span></code> and <code class="docutils literal"><span class="pre">button_b</span></code>.</p>
<div class="section" id="attributes">
<h5>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h5>
<dl class="attribute">
<dt id="button_a">
<code class="descname">button_a</code><a class="headerlink" href="#button_a" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal"><span class="pre">Button</span></code> instance (see below) representing the left button.</p>
</dd></dl>

<dl class="attribute">
<dt id="button_b">
<code class="descname">button_b</code><a class="headerlink" href="#button_b" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents the right button.</p>
</dd></dl>

</div>
<div class="section" id="classes">
<h5>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="Button">
<em class="property">class </em><code class="descname">Button</code><a class="headerlink" href="#Button" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a button.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This class is not actually available to the user, it is only used by
the two button instances, which are provided already initialized.</p>
</div>
<dl class="method">
<dt id="Button.is_pressed">
<code class="descname">is_pressed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Button.is_pressed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if the specified button <code class="docutils literal"><span class="pre">button</span></code> is pressed, and
<code class="docutils literal"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="Button.was_pressed">
<code class="descname">was_pressed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Button.was_pressed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code> to indicate if the button was pressed
since the device started or the last time this method was called.</p>
</dd></dl>

<dl class="method">
<dt id="Button.get_presses">
<code class="descname">get_presses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Button.get_presses" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the running total of button presses, and resets this total
to zero before returning.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<div class="code highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">microbit</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">microbit</span><span class="o">.</span><span class="n">button_a</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">()</span> <span class="ow">and</span> <span class="n">microbit</span><span class="o">.</span><span class="n">button_b</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">():</span>
        <span class="n">microbit</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="s2">&quot;AB&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">elif</span> <span class="n">microbit</span><span class="o">.</span><span class="n">button_a</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">():</span>
        <span class="n">microbit</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">microbit</span><span class="o">.</span><span class="n">button_b</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">():</span>
        <span class="n">microbit</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>
    <span class="n">microbit</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-pin"></span><div class="section" id="module-microbit">
<span id="input-output-pins"></span><h4>Input/Output Pins<a class="headerlink" href="#module-microbit" title="Permalink to this headline">¶</a></h4>
<p>The pins are your board&#8217;s way to communicate with external devices connected to
it. There are 19 pins for your disposal, numbered 0-16 and 19-20. Pins 17 and
18 are not available.</p>
<p>For example, the script below will change the display on the micro:bit
depending upon the digital reading on pin 0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>


<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">pin0</span><span class="o">.</span><span class="n">read_digital</span><span class="p">():</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">HAPPY</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">SAD</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="pin-functions">
<h5>Pin Functions<a class="headerlink" href="#pin-functions" title="Permalink to this headline">¶</a></h5>
<img alt="_images/pinout.png" src="_images/pinout.png" />
<p>Those pins are available as attributes on the <code class="docutils literal"><span class="pre">microbit</span></code>
module:<code class="docutils literal"><span class="pre">microbit.pin0</span></code> - <code class="docutils literal"><span class="pre">microbit.pin20</span></code>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="38%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pin</th>
<th class="head">Type</th>
<th class="head">Function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>Touch</td>
<td>Pad 0</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>Touch</td>
<td>Pad 1</td>
</tr>
<tr class="row-even"><td>2</td>
<td>Touch</td>
<td>Pad 2</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>Analog</td>
<td>Column 1</td>
</tr>
<tr class="row-even"><td>4</td>
<td>Analog</td>
<td>Column 2</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>Digital</td>
<td>Button A</td>
</tr>
<tr class="row-even"><td>6</td>
<td>Digital</td>
<td>Row 2</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>Digital</td>
<td>Row 1</td>
</tr>
<tr class="row-even"><td>8</td>
<td>Digital</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>9</td>
<td>Digital</td>
<td>Row 3</td>
</tr>
<tr class="row-even"><td>10</td>
<td>Analog</td>
<td>Column 3</td>
</tr>
<tr class="row-odd"><td>11</td>
<td>Digital</td>
<td>Button B</td>
</tr>
<tr class="row-even"><td>12</td>
<td>Digital</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>13</td>
<td>Digital</td>
<td>SPI MOSI</td>
</tr>
<tr class="row-even"><td>14</td>
<td>Digital</td>
<td>SPI MISO</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>Digital</td>
<td>SPI SCK</td>
</tr>
<tr class="row-even"><td>16</td>
<td>Digital</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>19</td>
<td>Digital</td>
<td>I2C SCL</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>Digital</td>
<td>I2C SDA</td>
</tr>
</tbody>
</table>
<p>The above table summarizes the pins available, their types (see below) and what
they are internally connected to.</p>
<div class="section" id="pulse-width-modulation">
<h6>Pulse-Width Modulation<a class="headerlink" href="#pulse-width-modulation" title="Permalink to this headline">¶</a></h6>
<p>The pins of your board cannot output analog signal the way an audio amplifier
can do it &#8211; by modulating the voltage on the pin. Those pins can only either
enable the full 3.3V output, or pull it down to 0V. However, it is still
possible to control the brightness of LEDs or speed of an electric motor, by
switching that voltage on and off very fast, and controlling how long it is on
and how long it is off. This technique is called Pulse-Width Modulation (PWM),
and that&#8217;s what the <code class="docutils literal"><span class="pre">write_analog</span></code> method below does.</p>
<img alt="_images/pwm.png" src="_images/pwm.png" />
<p>Above you can see the diagrams of three different PWM signals. All of them have
the same period (and thus frequency), but they have different duty cycles.</p>
<p>The first one would be generated by <code class="docutils literal"><span class="pre">write_analog(511)</span></code>, as it has exactly
50% duty &#8211; the power is on half of the time, and off half of the time. The
result of that is that the total energy of this signal is the same, as if it
was 1.65V instead of 3.3V.</p>
<p>The second signal has 25% duty cycle, and could be generated with
<code class="docutils literal"><span class="pre">write_analog(255)</span></code>. It has similar effect as if 0.825V was being output on
that pin.</p>
<p>The third signal has 75% duty cycle, and can be generated with
<code class="docutils literal"><span class="pre">write_analog(767)</span></code>. It has three times as much energy, as the second signal,
and is equivalent to outputting 2.475V on th pin.</p>
<p>Note that this works well with devices such as motors, which have huge inertia
by themselves, or LEDs, which blink too fast for the human eye to see the
difference, but will not work so good with generating sound waves. This board
can only generate square wave sounds on itself, which sound pretty much like
the very old computer games &#8211; mostly because those games also only could do
that.</p>
</div>
</div>
<div class="section" id="classes">
<h5>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h5>
<p>There are three kinds of pins, differing in what is available for them. They
are represented by the below classes. Note that they form a hierarchy, so that
each class has all the functionality of the previous class, and adds its own
to that.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Those classes are not actually available for the user, you can&#8217;t create
new instances of them. You can only use the instances already provided,
representing the physical pins on your board.</p>
</div>
<dl class="class">
<dt id="microbit.MicroBitDigitalPin">
<em class="property">class </em><code class="descclassname">microbit.</code><code class="descname">MicroBitDigitalPin</code><a class="headerlink" href="#microbit.MicroBitDigitalPin" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="microbit.MicroBitDigitalPin.read_digital">
<code class="descname">read_digital</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.MicroBitDigitalPin.read_digital" title="Permalink to this definition">¶</a></dt>
<dd><p>Return 1 if the pin is high, and 0 if it&#8217;s low.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.MicroBitDigitalPin.write_digital">
<code class="descname">write_digital</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.MicroBitDigitalPin.write_digital" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the pin to high if <code class="docutils literal"><span class="pre">value</span></code> is 1, or to low, if it is 0.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="microbit.MicroBitAnalogDigitalPin">
<em class="property">class </em><code class="descclassname">microbit.</code><code class="descname">MicroBitAnalogDigitalPin</code><a class="headerlink" href="#microbit.MicroBitAnalogDigitalPin" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="microbit.MicroBitAnalogDigitalPin.read_analog">
<code class="descname">read_analog</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.MicroBitAnalogDigitalPin.read_analog" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the voltage applied to the pin, and return it as an integer
between 0 (meaning 0V) and 1023 (meaning 3.3V).</p>
</dd></dl>

<dl class="method">
<dt id="microbit.MicroBitAnalogDigitalPin.write_analog">
<code class="descname">write_analog</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.MicroBitAnalogDigitalPin.write_analog" title="Permalink to this definition">¶</a></dt>
<dd><p>Output a PWM signal on the pin, with the duty cycle proportional to
the provided <code class="docutils literal"><span class="pre">value</span></code>. The <code class="docutils literal"><span class="pre">value</span></code> may be either an integer or a
floating point number between 0 (0% duty cycle) and 1023 (100% duty).</p>
</dd></dl>

<dl class="method">
<dt id="microbit.MicroBitAnalogDigitalPin.set_analog_period">
<code class="descname">set_analog_period</code><span class="sig-paren">(</span><em>period</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.MicroBitAnalogDigitalPin.set_analog_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the period of the PWM signal being output to <code class="docutils literal"><span class="pre">period</span></code> in
milliseconds. The minimum valid value is 1ms.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.MicroBitAnalogDigitalPin.set_analog_period_microseconds">
<code class="descname">set_analog_period_microseconds</code><span class="sig-paren">(</span><em>period</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.MicroBitAnalogDigitalPin.set_analog_period_microseconds" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the period of the PWM signal being output to <code class="docutils literal"><span class="pre">period</span></code> in
microseconds. The minimum valid value is 35µs.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="microbit.MicroBitTouchPin">
<em class="property">class </em><code class="descclassname">microbit.</code><code class="descname">MicroBitTouchPin</code><a class="headerlink" href="#microbit.MicroBitTouchPin" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="microbit.MicroBitTouchPin.is_touched">
<code class="descname">is_touched</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.MicroBitTouchPin.is_touched" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal"><span class="pre">True</span></code> if the pin is being touched with a finger, otherwise
return <code class="docutils literal"><span class="pre">False</span></code>.</p>
<p>This test is done by measuring the capacitance of the pin together with
whatever is connected to it. Human body has quite a large capacitance,
so touching the pin gives a dramatic change in reading, which can be
detected.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
</div>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-image"></span><div class="section" id="module-microbit">
<span id="image"></span><h4>Image<a class="headerlink" href="#module-microbit" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">Image</span></code> class is used to create images that can be displayed easily on
the device&#8217;s LED matrix. Given an image object it&#8217;s possible to display it via
the <code class="docutils literal"><span class="pre">device</span></code> API:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">HAPPY</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/image-smile.png" src="_images/image-smile.png" />
<div class="section" id="classes">
<h5>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="microbit.Image">
<em class="property">class </em><code class="descclassname">microbit.</code><code class="descname">Image</code><span class="sig-paren">(</span><em>string</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image" title="Permalink to this definition">¶</a></dt>
<dt>
<em class="property">class </em><code class="descclassname">microbit.</code><code class="descname">Image</code><span class="sig-paren">(</span><em>width=None</em>, <em>height=None</em>, <em>buffer=None</em><span class="sig-paren">)</span></dt>
<dd><p>If <code class="docutils literal"><span class="pre">string</span></code> is used, it has to consist of digits 0-9 arranged into
lines, describing the image, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;90009:&quot;</span>
              <span class="s2">&quot;09090:&quot;</span>
              <span class="s2">&quot;00900:&quot;</span>
              <span class="s2">&quot;09090:&quot;</span>
              <span class="s2">&quot;90009&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>will create a 5×5 image of an X. The end of a line is indicated by a colon.
It&#8217;s also possible to use a newline (n) to indicate the end of a line
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;90009</span><span class="se">\n</span><span class="s2">&quot;</span>
              <span class="s2">&quot;09090</span><span class="se">\n</span><span class="s2">&quot;</span>
              <span class="s2">&quot;00900</span><span class="se">\n</span><span class="s2">&quot;</span>
              <span class="s2">&quot;09090</span><span class="se">\n</span><span class="s2">&quot;</span>
              <span class="s2">&quot;90009&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The other form creates an empty image with <code class="docutils literal"><span class="pre">width</span></code> columns and
<code class="docutils literal"><span class="pre">height</span></code> rows. Optionally <code class="docutils literal"><span class="pre">buffer</span></code> can be an array of
<code class="docutils literal"><span class="pre">width``×``height</span></code> integers in range 0-9 to initialize the image.</p>
<dl class="method">
<dt id="microbit.Image.width">
<code class="descname">width</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.width" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of columns in the image.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.height">
<code class="descname">height</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.height" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the numbers of rows in the image.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.set_pixel">
<code class="descname">set_pixel</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.set_pixel" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the brightness of the pixel at column <code class="docutils literal"><span class="pre">x</span></code> and row <code class="docutils literal"><span class="pre">y</span></code> to the
<code class="docutils literal"><span class="pre">value</span></code>, which has to be between 0 (dark) and 9 (bright).</p>
<p>This method will raise an exception when called on any of the build-in
read-only images, like <code class="docutils literal"><span class="pre">Image.HEART</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.get_pixel">
<code class="descname">get_pixel</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.get_pixel" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the brightness of pixel at column <code class="docutils literal"><span class="pre">x</span></code> and row <code class="docutils literal"><span class="pre">y</span></code> as an
integer between 0 and 9.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.shift_left">
<code class="descname">shift_left</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.shift_left" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new image created by shifting the picture left by <code class="docutils literal"><span class="pre">n</span></code>
columns.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.shift_right">
<code class="descname">shift_right</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.shift_right" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <code class="docutils literal"><span class="pre">image.shift_left(-n)</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.shift_up">
<code class="descname">shift_up</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.shift_up" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new image created by shifting the picture up by <code class="docutils literal"><span class="pre">n</span></code> rows.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.shift_down">
<code class="descname">shift_down</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.shift_down" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <code class="docutils literal"><span class="pre">image.shift_up(-n)</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.crop">
<code class="descname">crop</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>w</em>, <em>h</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.crop" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new image by cropping the picture to a width of <code class="docutils literal"><span class="pre">w</span></code> and a
height of <code class="docutils literal"><span class="pre">h</span></code>, starting with the pixel at column <code class="docutils literal"><span class="pre">x</span></code> and row <code class="docutils literal"><span class="pre">y</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an exact copy of the image.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.Image.invert">
<code class="descname">invert</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.Image.invert" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new image by inverting the brightness of the pixels in the
source image.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="attributes">
<h5>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal"><span class="pre">Image</span></code> class also has the following built-in instances of itself
included as its attributes (the attribute names indicate what the image
represents):</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">Image.HEART</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.HEART_SMALL</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.HAPPY</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SMILE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SAD</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.CONFUSED</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.ANGRY</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.ASLEEP</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SURPRISED</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SILLY</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.FABULOUS</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.MEH</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.YES</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.NO</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.CLOCK12</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK11</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK10</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK9</span></code>,
<code class="docutils literal"><span class="pre">Image.CLOCK8</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK7</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK6</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK5</span></code>,
<code class="docutils literal"><span class="pre">Image.CLOCK4</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK3</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK2</span></code>, <code class="docutils literal"><span class="pre">Image.CLOCK1</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.ARROW_N</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_NE</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_E</span></code>,
<code class="docutils literal"><span class="pre">Image.ARROW_SE</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_S</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_SW</span></code>,
<code class="docutils literal"><span class="pre">Image.ARROW_W</span></code>, <code class="docutils literal"><span class="pre">Image.ARROW_NW</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TRIANGLE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TRIANGLE_LEFT</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.CHESSBOARD</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.DIAMOND</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.DIAMOND_SMALL</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SQUARE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SQUARE_SMALL</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.RABBIT</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.COW</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.MUSIC_CROTCHET</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.MUSIC_QUAVER</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.MUSIC_QUAVERS</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.PITCHFORK</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.XMAS</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.PACMAN</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TARGET</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TSHIRT</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.ROLLERSKATE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.DUCK</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.HOUSE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.TORTOISE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.BUTTERFLY</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.STICKFIGURE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.GHOST</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SWORD</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.GIRAFFE</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SKULL</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.UMBRELLA</span></code></li>
<li><code class="docutils literal"><span class="pre">Image.SNAKE</span></code></li>
</ul>
</div></blockquote>
<p>Finally, related collections of images have been grouped together:</p>
<div class="highlight-python"><div class="highlight"><pre>* ``Image.ALL_CLOCKS``
* ``Image.ALL_ARROWS``
</pre></div>
</div>
</div>
<div class="section" id="operations">
<h5>Operations<a class="headerlink" href="#operations" title="Permalink to this headline">¶</a></h5>
<div class="code highlight-python"><div class="highlight"><pre><span class="nb">repr</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
<p>Get a compact string representation of the image.</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="nb">str</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
<p>Get a readable string representation of the image.</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="n">image1</span> <span class="o">+</span> <span class="n">image2</span>
</pre></div>
</div>
<p>Create a new image by adding the brightness values from the two images for
each pixel.</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="n">image</span> <span class="o">*</span> <span class="n">n</span>
</pre></div>
</div>
<p>Create a new image by multiplying the brightness of each pixel by <code class="docutils literal"><span class="pre">n</span></code>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="modules">
<h3>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-display"></span><div class="section" id="module-microbit.display">
<span id="display"></span><h4>Display<a class="headerlink" href="#module-microbit.display" title="Permalink to this headline">¶</a></h4>
<p>This module controls the 5×5 LED display on the front of your board. It can
be used to display images, animations and even text.</p>
<img alt="_images/scroll-hello.gif" src="_images/scroll-hello.gif" />
<div class="section" id="functions">
<h5>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h5>
<dl class="function">
<dt id="microbit.display.get_pixel">
<code class="descclassname">microbit.display.</code><code class="descname">get_pixel</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.display.get_pixel" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the brightness of the LED at column <code class="docutils literal"><span class="pre">x</span></code> and row <code class="docutils literal"><span class="pre">y</span></code> as an
integer between 0 (off) and 9 (bright).</p>
</dd></dl>

<dl class="function">
<dt id="microbit.display.set_pixel">
<code class="descclassname">microbit.display.</code><code class="descname">set_pixel</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.display.set_pixel" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the brightness of the LED at column <code class="docutils literal"><span class="pre">x</span></code> and row <code class="docutils literal"><span class="pre">y</span></code> to <code class="docutils literal"><span class="pre">value</span></code>,
which has to be an integer between 0 and 9.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.display.clear">
<code class="descclassname">microbit.display.</code><code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.display.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the brightness of all LEDs to 0 (off).</p>
</dd></dl>

<dl class="function">
<dt id="microbit.display.show">
<code class="descclassname">microbit.display.</code><code class="descname">show</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.display.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Display the <code class="docutils literal"><span class="pre">image</span></code>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descclassname">microbit.display.</code><code class="descname">show</code><span class="sig-paren">(</span><em>iterable</em>, <em>delay=400</em>, <em>*</em>, <em>wait=True</em>, <em>loop=False</em>, <em>clear=False</em><span class="sig-paren">)</span></dt>
<dd><p>Display images or letters from the <code class="docutils literal"><span class="pre">iterable</span></code> in sequence, with <code class="docutils literal"><span class="pre">delay</span></code>
milliseconds between them.</p>
<p>If <code class="docutils literal"><span class="pre">wait</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, this function will block until the animation is
finished, otherwise the animation will happen in the background.</p>
<p>If <code class="docutils literal"><span class="pre">loop</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, the animation will repeat forever.</p>
<p>If <code class="docutils literal"><span class="pre">clear</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, the display will be cleared after the iterable has finished.</p>
<p>Note that the <code class="docutils literal"><span class="pre">wait</span></code>, <code class="docutils literal"><span class="pre">loop</span></code> and <code class="docutils literal"><span class="pre">clear</span></code> arguments must be specified
using their keyword.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If using a generator as the <code class="docutils literal"><span class="pre">iterable</span></code>, then take care not to allocate any memory
in the generator as allocating memory in an interrupt is prohibited and will raise a
<code class="docutils literal"><span class="pre">MemoryError</span></code>.</p>
</div>
<dl class="function">
<dt id="microbit.display.scroll">
<code class="descclassname">microbit.display.</code><code class="descname">scroll</code><span class="sig-paren">(</span><em>string</em>, <em>delay=150</em>, <em>*</em>, <em>wait=True</em>, <em>loop=False</em>, <em>monospace=False</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.display.scroll" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <code class="docutils literal"><span class="pre">show</span></code>, but scrolls the <code class="docutils literal"><span class="pre">string</span></code> horizontally instead. The
<code class="docutils literal"><span class="pre">delay</span></code> parameter controls how fast the text is scrolling.</p>
<p>If <code class="docutils literal"><span class="pre">wait</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, this function will block until the animation is
finished, otherwise the animation will happen in the background.</p>
<p>If <code class="docutils literal"><span class="pre">loop</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, the animation will repeat forever.</p>
<p>If <code class="docutils literal"><span class="pre">monospace</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, the characters will all take up 5 pixel-columns
in width, otherwise there will be exactly 1 blank pixel-column between each
character as they scroll.</p>
<p>Note that the <code class="docutils literal"><span class="pre">wait</span></code>, <code class="docutils literal"><span class="pre">loop</span></code> and <code class="docutils literal"><span class="pre">monospace</span></code> arguments must be specified
using their keyword.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.display.on">
<code class="descclassname">microbit.display.</code><code class="descname">on</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.display.on" title="Permalink to this definition">¶</a></dt>
<dd><p>Use on() to turn on the display.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.display.off">
<code class="descclassname">microbit.display.</code><code class="descname">off</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.display.off" title="Permalink to this definition">¶</a></dt>
<dd><p>Use off() to turn off the display (thus allowing you to re-use the GPIO
pins associated with the display for other purposes).</p>
</dd></dl>

<dl class="function">
<dt id="microbit.display.is_on">
<code class="descclassname">microbit.display.</code><code class="descname">is_on</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.display.is_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if the display is on, otherwise returns <code class="docutils literal"><span class="pre">False</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<p>To continuously scroll a string across the display, and do it in the background,
you can use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">microbit</span>

<span class="n">microbit</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="s1">&#39;Hello!&#39;</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-uart"></span><div class="section" id="module-microbit.uart">
<span id="uart"></span><h4>UART<a class="headerlink" href="#module-microbit.uart" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">uart</span></code> module lets you talk to a device connected to your board using
a serial interface.</p>
<div class="section" id="functions">
<h5>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h5>
<dl class="method">
<dt id="microbit.uart.init">
<code class="descclassname">microbit.uart.</code><code class="descname">init</code><span class="sig-paren">(</span><em>baudrate=9600</em>, <em>bits=8</em>, <em>parity=None</em>, <em>stop=1</em>, <em>*</em>, <em>tx=None</em>, <em>rx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.uart.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize serial communication with the specified parameters on the
specified <code class="docutils literal"><span class="pre">tx</span></code> and <code class="docutils literal"><span class="pre">rx</span></code> pins. Note that for correct communication, the parameters
have to be the same on both communicating devices.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Initializing the UART on external pins will cause the Python console on
USB to become unaccessible, as it uses the same hardware. To bring the
console back you must reinitialize the UART without passing anything for
<a href="#id1"><span class="problematic" id="id2">``</span></a>tx&#8217;&#8217; or <a href="#id3"><span class="problematic" id="id4">``</span></a>rx&#8217;&#8217; (or passing <a href="#id5"><span class="problematic" id="id6">``</span></a>None&#8217;&#8217; to these arguments).  This means
that calling <a href="#id7"><span class="problematic" id="id8">``</span></a>uart.init(115200)&#8217;&#8217; is enough to restore the Python console.</p>
</div>
<p>The <code class="docutils literal"><span class="pre">baudrate</span></code> defines the speed of communication. Common baud
rates include:</p>
<blockquote>
<div><ul class="simple">
<li>9600</li>
<li>14400</li>
<li>19200</li>
<li>28800</li>
<li>38400</li>
<li>57600</li>
<li>115200</li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal"><span class="pre">bits</span></code> defines the size of bytes being transmitted, and the board
only supports 8. The <code class="docutils literal"><span class="pre">parity</span></code> parameter defines how parity is checked,
and it can be <code class="docutils literal"><span class="pre">None</span></code>, <code class="docutils literal"><span class="pre">microbit.uart.ODD</span></code> or <code class="docutils literal"><span class="pre">microbit.uart.EVEN</span></code>.
The <code class="docutils literal"><span class="pre">stop</span></code> parameter tells the number of stop bits, and has to be 1 for
this board.</p>
<p>If <code class="docutils literal"><span class="pre">tx</span></code> and <code class="docutils literal"><span class="pre">rx</span></code> are not specified then the internal USB-UART TX/RX pins
are used which connect to the USB serial convertor on the micro:bit, thus
connecting the UART to your PC.  You can specify any other pins you want by
passing the desired pin objects to the <code class="docutils literal"><span class="pre">tx</span></code> and <code class="docutils literal"><span class="pre">rx</span></code> parameters.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When connecting the device, make sure you &#8220;cross&#8221; the wires &#8211; the TX
pin on your board needs to be connected with the RX pin on the device,
and the RX pin &#8211; with the TX pin on the device. Also make sure the
ground pins of both devices are connected.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="microbit.uart.uart.any">
<code class="descclassname">uart.</code><code class="descname">any</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.uart.uart.any" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal"><span class="pre">True</span></code> if any characters waiting, else <code class="docutils literal"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.uart.uart.read">
<code class="descclassname">uart.</code><code class="descname">read</code><span class="sig-paren">(</span><span class="optional">[</span><em>nbytes</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.uart.uart.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read characters.  If <code class="docutils literal"><span class="pre">nbytes</span></code> is specified then read at most that many
bytes.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.uart.uart.readall">
<code class="descclassname">uart.</code><code class="descname">readall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.uart.uart.readall" title="Permalink to this definition">¶</a></dt>
<dd><p>Read as much data as possible.</p>
<p>Return value: a bytes object or <code class="docutils literal"><span class="pre">None</span></code> on timeout.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.uart.uart.readinto">
<code class="descclassname">uart.</code><code class="descname">readinto</code><span class="sig-paren">(</span><em>buf</em><span class="optional">[</span>, <em>nbytes</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.uart.uart.readinto" title="Permalink to this definition">¶</a></dt>
<dd><p>Read bytes into the <code class="docutils literal"><span class="pre">buf</span></code>.  If <code class="docutils literal"><span class="pre">nbytes</span></code> is specified then read at most
that many bytes.  Otherwise, read at most <code class="docutils literal"><span class="pre">len(buf)</span></code> bytes.</p>
<p>Return value: number of bytes read and stored into <code class="docutils literal"><span class="pre">buf</span></code> or <code class="docutils literal"><span class="pre">None</span></code> on
timeout.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.uart.uart.readline">
<code class="descclassname">uart.</code><code class="descname">readline</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.uart.uart.readline" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a line, ending in a newline character.</p>
<p>Return value: the line read or <code class="docutils literal"><span class="pre">None</span></code> on timeout. The newline character is
included in the returned bytes.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.uart.uart.write">
<code class="descclassname">uart.</code><code class="descname">write</code><span class="sig-paren">(</span><em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.uart.uart.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the buffer of bytes to the bus.</p>
<p>Return value: number of bytes written or <code class="docutils literal"><span class="pre">None</span></code> on timeout.</p>
</dd></dl>

</div>
</div>
<span id="document-spi"></span><div class="section" id="module-microbit.spi">
<span id="spi"></span><h4>SPI<a class="headerlink" href="#module-microbit.spi" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">spi</span></code> module lets you talk to a device connected to your board using
a serial peripheral interface (SPI) bus. SPI uses a so-called master-slave
architecture with a single master. You will need to specify the connections
for three signals:</p>
<ul class="simple">
<li>SCLK : Serial Clock (output from master).</li>
<li>MOSI : Master Output, Slave Input (output from master).</li>
<li>MISO : Master Input, Slave Output (output from slave).</li>
</ul>
<div class="section" id="functions">
<h5>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h5>
<dl class="method">
<dt id="microbit.spi.init">
<code class="descclassname">microbit.spi.</code><code class="descname">init</code><span class="sig-paren">(</span><em>baudrate=1000000</em>, <em>bits=8</em>, <em>mode=0</em>, <em>sclk=pin13</em>, <em>mosi=pin15</em>, <em>miso=pin14</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.spi.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize SPI communication with the specified parameters on the
specified <code class="docutils literal"><span class="pre">pins</span></code>. Note that for correct communication, the parameters
have to be the same on both communicating devices.</p>
<p>The <code class="docutils literal"><span class="pre">baudrate</span></code> defines the speed of communication.</p>
<p>The <code class="docutils literal"><span class="pre">bits</span></code> defines the size of bytes being transmitted. Currently only
<code class="docutils literal"><span class="pre">bits=8</span></code> is supported. However, this may change in the future.</p>
<p>The <code class="docutils literal"><span class="pre">mode</span></code> determines the combination of clock polarity and phase
according to the following convention, with polarity as the high order bit
and phase as the low order bit:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="41%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">SPI Mode</th>
<th class="head">Polarity (CPOL)</th>
<th class="head">Phase (CPHA)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-even"><td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Polarity (aka CPOL) 0 means that the clock is at logic value 0 when idle
and goes high (logic value 1) when active; polarity 1 means the clock is
at logic value 1 when idle and goes low (logic value 0) when active. Phase
(aka CPHA) 0 means that data is sampled on the leading edge of the clock,
and 1 means on the trailing edge
(viz. <a class="reference external" href="https://en.wikipedia.org/wiki/Signal_edge">https://en.wikipedia.org/wiki/Signal_edge</a>).</p>
<p>The <code class="docutils literal"><span class="pre">sclk</span></code>, <code class="docutils literal"><span class="pre">mosi</span></code> and <code class="docutils literal"><span class="pre">miso</span></code> arguments specify the pins to use for
each type of signal.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.spi.spi.read">
<code class="descclassname">spi.</code><code class="descname">read</code><span class="sig-paren">(</span><em>nbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.spi.spi.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read at most <code class="docutils literal"><span class="pre">nbytes</span></code>. Returns what was read.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.spi.spi.write">
<code class="descclassname">spi.</code><code class="descname">write</code><span class="sig-paren">(</span><em>buffer</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.spi.spi.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the <code class="docutils literal"><span class="pre">buffer</span></code> of bytes to the bus.</p>
</dd></dl>

<dl class="method">
<dt id="microbit.spi.spi.write_readinto">
<code class="descclassname">spi.</code><code class="descname">write_readinto</code><span class="sig-paren">(</span><em>out</em>, <em>in</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.spi.spi.write_readinto" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the <code class="docutils literal"><span class="pre">out</span></code> buffer to the bus and read any response into the <code class="docutils literal"><span class="pre">in</span></code>
buffer. The length of the buffers should be the same. The buffers can be
the same object.</p>
</dd></dl>

</div>
</div>
<span id="document-i2c"></span><div class="section" id="module-microbit.i2c">
<span id="i2c"></span><h4>I²C<a class="headerlink" href="#module-microbit.i2c" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">i2c</span></code> module lets you communicate with devices connected to your board
using the I²C bus protocol. There can be multiple slave devices connected at
the same time, and each one has its own unique address, that is either fixed
for the device or configured on it. Your board acts as the I²C master.</p>
<p>We use 7-bit addressing for devices because of the reasons stated
<a class="reference external" href="http://www.totalphase.com/support/articles/200349176-7-bit-8-bit-and-10-bit-I2C-Slave-Addressing">here</a>.</p>
<p>This may be different to other micro:bit related solutions.</p>
<p>How exactly you should communicate with the devices, that is, what bytes to
send and how to interpret the responses, depends on the device in question and
should be described separately in that device&#8217;s documentation.</p>
<div class="section" id="functions">
<h5>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h5>
<dl class="function">
<dt id="microbit.i2c.read">
<code class="descclassname">microbit.i2c.</code><code class="descname">read</code><span class="sig-paren">(</span><em>addr</em>, <em>n</em>, <em>repeat=False</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.i2c.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read <code class="docutils literal"><span class="pre">n</span></code> bytes from the device with 7-bit address <code class="docutils literal"><span class="pre">addr</span></code>. If <code class="docutils literal"><span class="pre">repeat</span></code>
is <code class="docutils literal"><span class="pre">True</span></code>, no stop bit will be sent.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.i2c.write">
<code class="descclassname">microbit.i2c.</code><code class="descname">write</code><span class="sig-paren">(</span><em>addr</em>, <em>buf</em>, <em>repeat=False</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.i2c.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write bytes from <code class="docutils literal"><span class="pre">buf</span></code> to the device with 7-bit address <code class="docutils literal"><span class="pre">addr</span></code>. If
<code class="docutils literal"><span class="pre">repeat</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, no stop bit will be sent.</p>
</dd></dl>

<div class="section" id="connecting">
<h6>Connecting<a class="headerlink" href="#connecting" title="Permalink to this headline">¶</a></h6>
<p>You should connect the device&#8217;s <code class="docutils literal"><span class="pre">SCL</span></code> pin to micro:bit pin 19, and the
device&#8217;s <code class="docutils literal"><span class="pre">SDA</span></code> pin to micro:bit pin 20. You also must connect the device&#8217;s
ground to the micro:bit ground (pin <code class="docutils literal"><span class="pre">GND</span></code>). You may need to power the device
using an external power supply or the micro:bit.</p>
<p>There are internal pull-up resistors on the I²C lines of the board, but with
particularly long wires or large number of devices you may need to add
additional pull-up resistors, to ensure noise-free communication.</p>
</div>
</div>
</div>
<span id="document-accelerometer"></span><div class="section" id="module-microbit.accelerometer">
<span id="accelerometer"></span><h4>Accelerometer<a class="headerlink" href="#module-microbit.accelerometer" title="Permalink to this headline">¶</a></h4>
<p>This object gives you access to the on-board accelerometer. The accelerometer
also provides convenience functions for detecting gestures. The
recognised gestures are: <code class="docutils literal"><span class="pre">up</span></code>, <code class="docutils literal"><span class="pre">down</span></code>, <code class="docutils literal"><span class="pre">left</span></code>, <code class="docutils literal"><span class="pre">right</span></code>, <code class="docutils literal"><span class="pre">face</span> <span class="pre">up</span></code>,
<code class="docutils literal"><span class="pre">face</span> <span class="pre">down</span></code>, <code class="docutils literal"><span class="pre">freefall</span></code>, <code class="docutils literal"><span class="pre">3g</span></code>, <code class="docutils literal"><span class="pre">6g</span></code>, <code class="docutils literal"><span class="pre">8g</span></code>, <code class="docutils literal"><span class="pre">shake</span></code>.</p>
<div class="section" id="functions">
<h5>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h5>
<dl class="function">
<dt id="microbit.accelerometer.get_x">
<code class="descclassname">microbit.accelerometer.</code><code class="descname">get_x</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.accelerometer.get_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the acceleration measurement in the <code class="docutils literal"><span class="pre">x</span></code> axis, as a positive or
negative integer, depending on the direction.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.accelerometer.get_y">
<code class="descclassname">microbit.accelerometer.</code><code class="descname">get_y</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.accelerometer.get_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the acceleration measurement in the <code class="docutils literal"><span class="pre">y</span></code> axis, as a positive or
negative integer, depending on the direction.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.accelerometer.get_z">
<code class="descclassname">microbit.accelerometer.</code><code class="descname">get_z</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.accelerometer.get_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the acceleration measurement in the <code class="docutils literal"><span class="pre">z</span></code> axis, as a positive or
negative integer, depending on the direction.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.accelerometer.get_values">
<code class="descclassname">microbit.accelerometer.</code><code class="descname">get_values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.accelerometer.get_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the acceleration measurements in all axes at once, as a three-element
tuple of integers ordered as X, Y, Z.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.accelerometer.current_gesture">
<code class="descclassname">microbit.accelerometer.</code><code class="descname">current_gesture</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.accelerometer.current_gesture" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the current gesture.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">MicroPython understands the following gesture names: <code class="docutils literal"><span class="pre">&quot;up&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;down&quot;</span></code>,
<code class="docutils literal"><span class="pre">&quot;left&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;right&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;face</span> <span class="pre">up&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;face</span> <span class="pre">down&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;freefall&quot;</span></code>,
<code class="docutils literal"><span class="pre">&quot;3g&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;6g&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;8g&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;shake&quot;</span></code>. Gestures are always
represented as strings.</p>
</div>
<dl class="function">
<dt id="microbit.accelerometer.is_gesture">
<code class="descclassname">microbit.accelerometer.</code><code class="descname">is_gesture</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.accelerometer.is_gesture" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True or False to indicate if the named gesture is currently active.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.accelerometer.was_gesture">
<code class="descclassname">microbit.accelerometer.</code><code class="descname">was_gesture</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#microbit.accelerometer.was_gesture" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True or False to indicate if the named gesture was active since the
last call.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.accelerometer.get_gestures">
<code class="descclassname">microbit.accelerometer.</code><code class="descname">get_gestures</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.accelerometer.get_gestures" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple of the gesture history. The most recent is listed last.
Also clears the gesture history before returning.</p>
</dd></dl>

<div class="section" id="examples">
<h6>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h6>
<p>A fortune telling magic 8-ball. Ask a question then shake the device for an
answer.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c1"># Magic 8 ball by Nicholas Tollervey. February 2016.</span>
<span class="c1">#</span>
<span class="c1"># Ask a question then shake.</span>
<span class="c1">#</span>
<span class="c1"># This program has been placed into the public domain.</span>
<span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">answers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;It is certain&quot;</span><span class="p">,</span>
    <span class="s2">&quot;It is decidedly so&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Without a doubt&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Yes, definitely&quot;</span><span class="p">,</span>
    <span class="s2">&quot;You may rely on it&quot;</span><span class="p">,</span>
    <span class="s2">&quot;As I see it, yes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Most likely&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Outlook good&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Yes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Signs point to yes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Reply hazy try again&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ask again later&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Better not tell you now&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Cannot predict now&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Concentrate and ask again&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Don&#39;t count on it&quot;</span><span class="p">,</span>
    <span class="s2">&quot;My reply is no&quot;</span><span class="p">,</span>
    <span class="s2">&quot;My sources say no&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Outlook not so good&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Very doubtful&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;8&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">accelerometer</span><span class="o">.</span><span class="n">was_gesture</span><span class="p">(</span><span class="s1">&#39;shake&#39;</span><span class="p">):</span>
        <span class="n">display</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
        <span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">answers</span><span class="p">))</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Simple Slalom. Move the device to avoid the obstacles.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c1"># Simple Slalom by Larry Hastings, September 2015</span>
<span class="c1">#</span>
<span class="c1"># This program has been placed into the public domain.</span>

<span class="kn">import</span> <span class="nn">microbit</span> <span class="kn">as</span> <span class="nn">m</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show</span>

<span class="n">min_x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1024</span>
<span class="n">max_x</span> <span class="o">=</span> <span class="mi">1024</span>
<span class="n">range_x</span> <span class="o">=</span> <span class="n">max_x</span> <span class="o">-</span> <span class="n">min_x</span>

<span class="n">wall_min_speed</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">player_min_speed</span> <span class="o">=</span> <span class="mi">200</span>

<span class="n">wall_max_speed</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">player_max_speed</span> <span class="o">=</span> <span class="mi">50</span>

<span class="n">speed_max</span> <span class="o">=</span> <span class="mi">12</span>


<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>

    <span class="n">i</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="s1">&#39;00000:&#39;</span><span class="o">*</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">set_pixel</span>

    <span class="n">player_x</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="n">wall_y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">hole</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">handled_this_wall</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="n">wall_speed</span> <span class="o">=</span> <span class="n">wall_min_speed</span>
    <span class="n">player_speed</span> <span class="o">=</span> <span class="n">player_min_speed</span>

    <span class="n">wall_next</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">player_next</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">running_time</span><span class="p">()</span>
        <span class="n">player_update</span> <span class="o">=</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="n">player_next</span>
        <span class="n">wall_update</span> <span class="o">=</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="n">wall_next</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">player_update</span> <span class="ow">or</span> <span class="n">wall_update</span><span class="p">):</span>
            <span class="n">next_event</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">wall_next</span><span class="p">,</span> <span class="n">player_next</span><span class="p">)</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="n">next_event</span> <span class="o">-</span> <span class="n">t</span>
            <span class="n">m</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">wall_update</span><span class="p">:</span>
            <span class="c1"># calculate new speeds</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">speed_max</span><span class="p">)</span>
            <span class="n">wall_speed</span> <span class="o">=</span> <span class="n">wall_min_speed</span> <span class="o">+</span> <span class="nb">int</span><span class="p">((</span><span class="n">wall_max_speed</span> <span class="o">-</span> <span class="n">wall_min_speed</span><span class="p">)</span> <span class="o">*</span> <span class="n">speed</span> <span class="o">/</span> <span class="n">speed_max</span><span class="p">)</span>
            <span class="n">player_speed</span> <span class="o">=</span> <span class="n">player_min_speed</span> <span class="o">+</span> <span class="nb">int</span><span class="p">((</span><span class="n">player_max_speed</span> <span class="o">-</span> <span class="n">player_min_speed</span><span class="p">)</span> <span class="o">*</span> <span class="n">speed</span> <span class="o">/</span> <span class="n">speed_max</span><span class="p">)</span>

            <span class="n">wall_next</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="n">wall_speed</span>
            <span class="k">if</span> <span class="n">wall_y</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="c1"># erase old wall</span>
                <span class="n">use_wall_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">wall_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">wall_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">wall_x</span> <span class="o">!=</span> <span class="n">hole</span><span class="p">:</span>
                        <span class="n">s</span><span class="p">(</span><span class="n">wall_x</span><span class="p">,</span> <span class="n">use_wall_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">wall_reached_player</span> <span class="o">=</span> <span class="p">(</span><span class="n">wall_y</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">player_update</span><span class="p">:</span>
            <span class="n">player_next</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="n">player_speed</span>
            <span class="c1"># find new x coord</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">accelerometer</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span> <span class="n">max_x</span><span class="p">)</span>
            <span class="c1"># print(&quot;x accel&quot;, x)</span>
            <span class="n">s</span><span class="p">(</span><span class="n">player_x</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># turn off old pixel</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">min_x</span><span class="p">)</span> <span class="o">/</span> <span class="n">range_x</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="c1"># print(&quot;have&quot;, position, &quot;want&quot;, x)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">handled_this_wall</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">player_x</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">:</span>
                    <span class="n">player_x</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">player_x</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">:</span>
                    <span class="n">player_x</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="c1"># print(&quot;new&quot;, position)</span>
            <span class="c1"># print()</span>

        <span class="k">if</span> <span class="n">wall_update</span><span class="p">:</span>
            <span class="c1"># update wall position</span>
            <span class="n">wall_y</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">wall_y</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                <span class="n">wall_y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">hole</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
                <span class="n">handled_this_wall</span> <span class="o">=</span> <span class="bp">False</span>

            <span class="k">if</span> <span class="n">wall_y</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="c1"># draw new wall</span>
                <span class="n">use_wall_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">wall_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">wall_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">wall_x</span> <span class="o">!=</span> <span class="n">hole</span><span class="p">:</span>
                        <span class="n">s</span><span class="p">(</span><span class="n">wall_x</span><span class="p">,</span> <span class="n">use_wall_y</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">wall_reached_player</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">handled_this_wall</span><span class="p">:</span>
            <span class="n">handled_this_wall</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">player_x</span> <span class="o">!=</span> <span class="n">hole</span><span class="p">):</span>
                <span class="c1"># collision! game over!</span>
                <span class="k">break</span>
            <span class="n">score</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">player_update</span><span class="p">:</span>
            <span class="n">s</span><span class="p">(</span><span class="n">player_x</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span> <span class="c1"># turn on new pixel</span>

        <span class="n">p</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="n">p</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">SAD</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span><span class="s2">&quot;Score:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">score</span><span class="p">))</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">button_a</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">()</span> <span class="ow">and</span> <span class="n">m</span><span class="o">.</span><span class="n">button_a</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">()):</span>
            <span class="k">break</span>
        <span class="n">m</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-compass"></span><div class="section" id="module-microbit.compass">
<span id="compass"></span><h4>Compass<a class="headerlink" href="#module-microbit.compass" title="Permalink to this headline">¶</a></h4>
<p>This module lets you access the built-in electronic compass. Before using,
the compass should be calibrated, otherwise the readings may be wrong.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Calibrating the compass will cause your program to pause until calibration
is complete. Calibration consists of a little game to draw a circle on the
LED display by rotating the device.</p>
</div>
<div class="section" id="functions">
<h5>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h5>
<dl class="function">
<dt id="microbit.compass.calibrate">
<code class="descclassname">microbit.compass.</code><code class="descname">calibrate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.compass.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the calibration process. An instructive message will be scrolled
to the user after which they will need to rotate the device in order to
draw a circle on the LED display.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.compass.is_calibrated">
<code class="descclassname">microbit.compass.</code><code class="descname">is_calibrated</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.compass.is_calibrated" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if the compass has been successfully calibrated, and
returns <code class="docutils literal"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.compass.clear_calibration">
<code class="descclassname">microbit.compass.</code><code class="descname">clear_calibration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.compass.clear_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Undoes the calibration, making the compass uncalibrated again.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.compass.get_x">
<code class="descclassname">microbit.compass.</code><code class="descname">get_x</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.compass.get_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives the reading of the magnetic force on the <code class="docutils literal"><span class="pre">x</span></code> axis, as a
positive or negative integer, depending on the direction of the
force.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.compass.get_y">
<code class="descclassname">microbit.compass.</code><code class="descname">get_y</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.compass.get_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives the reading of the magnetic force on the <code class="docutils literal"><span class="pre">x</span></code> axis, as a
positive or negative integer, depending on the direction of the
force.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.compass.get_z">
<code class="descclassname">microbit.compass.</code><code class="descname">get_z</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.compass.get_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives the reading of the magnetic force on the <code class="docutils literal"><span class="pre">x</span></code> axis, as a
positive or negative integer, depending on the direction of the
force.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.compass.heading">
<code class="descclassname">microbit.compass.</code><code class="descname">heading</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.compass.heading" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives the compass heading, calculated from the above readings, as an
integer in the range from 0 to 360, representing the angle in degrees,
clockwise, with north as 0.</p>
</dd></dl>

<dl class="function">
<dt id="microbit.compass.get_field_strength">
<code class="descclassname">microbit.compass.</code><code class="descname">get_field_strength</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microbit.compass.get_field_strength" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an integer indication of the magnitude of the magnetic field around
the device.</p>
</dd></dl>

</div>
<div class="section" id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<div class="code python highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    compass.py</span>
<span class="sd">    ~~~~~~~~~~</span>

<span class="sd">    Creates a compass.</span>

<span class="sd">    The user will need to calibrate the compass first. The compass uses the</span>
<span class="sd">    built-in clock images to display the position of the needle.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>


<span class="c1"># Start calibrating</span>
<span class="n">compass</span><span class="o">.</span><span class="n">calibrate</span><span class="p">()</span>

<span class="c1"># Try to keep the needle pointed in (roughly) the correct direction</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">needle</span> <span class="o">=</span> <span class="p">((</span><span class="mi">15</span> <span class="o">-</span> <span class="n">compass</span><span class="o">.</span><span class="n">heading</span><span class="p">())</span> <span class="o">//</span> <span class="mi">30</span><span class="p">)</span> <span class="o">%</span> <span class="mi">12</span>
    <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">ALL_CLOCKS</span><span class="p">[</span><span class="n">needle</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<span id="document-ble"></span><div class="section" id="bluetooth">
<h2>Bluetooth<a class="headerlink" href="#bluetooth" title="Permalink to this headline">¶</a></h2>
<p>While the BBC micro:bit has hardware capable of allowing the device to work as
a Bluetooth Low Energy (BLE) device, it only has 16k of RAM. The BLE stack
alone takes up 12k RAM which means there&#8217;s not enough room to run MicroPython.</p>
<p>Future versions of the device may come with 32k RAM which would be sufficient.
However, until such time it&#8217;s highly unlikely MicroPython will support BLE.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>MicroPython uses the radio hardware with the <code class="docutils literal"><span class="pre">radio</span></code> module. This allows
users to create simple yet effective wireless networks of micro:bit
devices.</p>
<p class="last">Furthermore, the protocol used in the <code class="docutils literal"><span class="pre">radio</span></code> module is a lot simpler
than BLE, making it far easier to use in an educational context.</p>
</div>
</div>
<span id="document-filesystem"></span><div class="section" id="local-persistent-file-system">
<h2>Local Persistent File System<a class="headerlink" href="#local-persistent-file-system" title="Permalink to this headline">¶</a></h2>
<p>It is useful to store data in a persistent manner so that it remains intact
between restarts of the device. On traditional computers this is often achieved
by a file system consisting of named files that hold raw data, and named
directories that contain files. Python supports the various operations needed
to work with such file systems.</p>
<p>However, since the micro:bit is a limited device in terms of both hardware and
storage capacity MicroPython provides a small subset of the functions needed
to persist data on the device. Because of memory constraints <strong>there is
approximately 30k of storage available</strong> on the file system.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Re-flashing the device will DESTROY YOUR DATA.</p>
<p>Since the file system is stored in the micro:bit&#8217;s flash memory and
flashing the device rewrites all the available flash memory then all your
data will be lost if you flash your device.</p>
<p class="last">However, if you switch your device off the data will remain intact until
you either delete it (see below) or re-flash the device.</p>
</div>
<p>MicroPython on the micro:bit provides a flat file system; i.e. there is no
notion of a directory hierarchy, the file system is just a list of named
files. Reading and writing a file is achieved via the standard Python <code class="docutils literal"><span class="pre">open</span></code>
function and the resulting file-like object (representing the file) of types
<code class="docutils literal"><span class="pre">TextIO</span></code> or <code class="docutils literal"><span class="pre">BytesIO</span></code>. Operations for working with files on the file system
(for example, listing or deleting files) are contained within the
<a class="reference internal" href="index.html#module-os" title="os"><code class="xref py py-mod docutils literal"><span class="pre">os</span></code></a> module.</p>
<p>If a file ends in the <code class="docutils literal"><span class="pre">.py</span></code> file extension then it can be imported. For
example, a file named <code class="docutils literal"><span class="pre">hello.py</span></code> can be imported like this: <code class="docutils literal"><span class="pre">import</span> <span class="pre">hello</span></code>.</p>
<p>An example session in the MicroPython REPL may look something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;hello.py&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">hello</span><span class="p">:</span>
<span class="gp">... </span>   <span class="n">hello</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;print(&#39;Hello&#39;)&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">hello</span>
<span class="go">Hello</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;hello.py&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">hello</span><span class="p">:</span>
<span class="gp">... </span>  <span class="k">print</span><span class="p">(</span><span class="n">hello</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">...</span>
<span class="go">print(&#39;Hello&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
<span class="go">[&#39;hello.py&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;hello.py&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
<span class="go">[]</span>
</pre></div>
</div>
<dl class="function">
<dt id="open">
<code class="descname">open</code><span class="sig-paren">(</span><em>filename</em>, <em>mode='r'</em><span class="sig-paren">)</span><a class="headerlink" href="#open" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a file object representing the file named in the argument
<code class="docutils literal"><span class="pre">filename</span></code>. The mode defaults to <code class="docutils literal"><span class="pre">'r'</span></code> which means open for reading in
text mode. The other common mode is <code class="docutils literal"><span class="pre">'w'</span></code> for writing (overwriting the
content of the file if it already exists). Two other modes are available
to be used in conjunction with the ones describes above: <code class="docutils literal"><span class="pre">'t'</span></code> means
text mode (for reading and writing strings) and <code class="docutils literal"><span class="pre">'b'</span></code> means binary mode
(for reading and writing bytes). If these are not specified then <code class="docutils literal"><span class="pre">'t'</span></code>
(text mode) is assumed. When in text mode the file object will be an
instance of <code class="docutils literal"><span class="pre">TextIO</span></code>. When in binary mode the file object will be an
instance of <code class="docutils literal"><span class="pre">BytesIO</span></code>. For example, use <code class="docutils literal"><span class="pre">'rb'</span></code> to read binary data from
a file.</p>
</dd></dl>

<dl class="class">
<dt id="TextIO">
<em class="property">class </em><code class="descname">TextIO</code><a class="headerlink" href="#TextIO" title="Permalink to this definition">¶</a></dt>
<dt id="BytesIO">
<em class="property">class </em><code class="descname">BytesIO</code><a class="headerlink" href="#BytesIO" title="Permalink to this definition">¶</a></dt>
<dd><p>Instances of these classes represent files in the micro:bit&#8217;s flat file
system. The TextIO class is used to represent text files. The BytesIO
class is used to represent binary files. They work in exactly the same
except that TextIO works with strings and BytesIO works with bytes.</p>
<p>You do not directly instantiate these classes. Rather, an appropriately
configured instance of the class is returned by the <code class="docutils literal"><span class="pre">open</span></code> function
described above.</p>
<dl class="method">
<dt id="TextIO.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TextIO.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush and close the file. This method has no effect if the file is
already closed. Once the file is closed, any operation on the file
(e.g. reading or writing) will raise an exception.</p>
</dd></dl>

<dl class="method">
<dt id="TextIO.name">
<code class="descname">name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TextIO.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the file the object represents. This will be the
same as the <code class="docutils literal"><span class="pre">filename</span></code> argument passed into the call to the <code class="docutils literal"><span class="pre">open</span></code>
function that instantiated the object.</p>
</dd></dl>

<dl class="method">
<dt id="TextIO.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#TextIO.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and return at most <code class="docutils literal"><span class="pre">size</span></code> characters as a single string or
<code class="docutils literal"><span class="pre">size</span></code> bytes from the file. As a convenience, if <code class="docutils literal"><span class="pre">size</span></code> is
unspecified or -1, all the data contained in the file is returned.
Fewer than <code class="docutils literal"><span class="pre">size</span></code> characters or bytes may be returned if there are
less than <code class="docutils literal"><span class="pre">size</span></code> characters or bytes remaining to be read from
the file.</p>
<p>If 0 characters or bytes are returned, and <code class="docutils literal"><span class="pre">size</span></code> was not 0, this
indicates end of file.</p>
<p>A <code class="docutils literal"><span class="pre">MemoryError</span></code> exception will occur if <code class="docutils literal"><span class="pre">size</span></code> is larger than the
available RAM.</p>
</dd></dl>

<dl class="method">
<dt id="TextIO.readinto">
<code class="descname">readinto</code><span class="sig-paren">(</span><em>buf</em>, <em>n=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#TextIO.readinto" title="Permalink to this definition">¶</a></dt>
<dd><p>Read characters or bytes into the buffer <code class="docutils literal"><span class="pre">buf</span></code>. If <code class="docutils literal"><span class="pre">n</span></code> is supplied,
read <code class="docutils literal"><span class="pre">n</span></code> number of bytes or characters into the buffer <code class="docutils literal"><span class="pre">buf</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="TextIO.readline">
<code class="descname">readline</code><span class="sig-paren">(</span><em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#TextIO.readline" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and return one line from the file. If <code class="docutils literal"><span class="pre">size</span></code> is specified, at
most <code class="docutils literal"><span class="pre">size</span></code> characters will be read.</p>
<p>The line terminator is always <code class="docutils literal"><span class="pre">'\n'</span></code> for strings or <code class="docutils literal"><span class="pre">b'\n'</span></code> for
bytes.</p>
</dd></dl>

<dl class="method">
<dt id="TextIO.writable">
<code class="descname">writable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TextIO.writable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal"><span class="pre">True</span></code> if the file supports writing. If <code class="docutils literal"><span class="pre">False</span></code>, <code class="docutils literal"><span class="pre">write()</span></code>
will raise <code class="docutils literal"><span class="pre">OSError</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="TextIO.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#TextIO.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the string or bytes <code class="docutils literal"><span class="pre">buf</span></code> to the file and return the number of
characters or bytes written.</p>
</dd></dl>

</dd></dl>

</div>
<span id="document-music"></span><div class="section" id="module-music">
<span id="music"></span><h2>Music<a class="headerlink" href="#module-music" title="Permalink to this headline">¶</a></h2>
<p>This is the <code class="docutils literal"><span class="pre">music</span></code> module. You can use it to play simple tunes, provided
that you connect a speaker to your board. By default the <code class="docutils literal"><span class="pre">music</span></code> module
expects the speaker to be connected via pin 0:</p>
<img alt="_images/music-pins.png" src="_images/music-pins.png" />
<p>This arrangement can be overridden (as discussed below).</p>
<p>To access this module you need to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">music</span>
</pre></div>
</div>
<p>We assume you have done this for the examples below.</p>
<div class="section" id="musical-notation">
<h3>Musical Notation<a class="headerlink" href="#musical-notation" title="Permalink to this headline">¶</a></h3>
<p>An individual note is specified thus:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">NOTE</span><span class="p">[</span><span class="n">octave</span><span class="p">][:</span><span class="n">duration</span><span class="p">]</span>
</pre></div>
</div>
<p>For example, <code class="docutils literal"><span class="pre">A1:4</span></code> refers to the note &#8220;A&#8221; in octave 1 that lasts for four
ticks (a tick is an arbitrary length of time defined by a tempo setting
function - see below). If the note name <code class="docutils literal"><span class="pre">R</span></code> is used then it is treated as a
rest (silence).</p>
<p>Accidentals (flats and sharps) are denoted by the <code class="docutils literal"><span class="pre">b</span></code> (flat - a lower case b)
and <code class="docutils literal"><span class="pre">#</span></code> (sharp - a hash symbol). For example, <code class="docutils literal"><span class="pre">Ab</span></code> is A-flat and <code class="docutils literal"><span class="pre">C#</span></code> is
C-sharp.</p>
<p><strong>Note names are case-insensitive.</strong></p>
<p>The <code class="docutils literal"><span class="pre">octave</span></code> and <code class="docutils literal"><span class="pre">duration</span></code> parameters are states that carry over to
subsequent notes until re-specified. The default states are <code class="docutils literal"><span class="pre">octave</span> <span class="pre">=</span> <span class="pre">4</span></code>
(containing middle C) and <code class="docutils literal"><span class="pre">duration</span> <span class="pre">=</span> <span class="pre">4</span></code> (a crotchet, given the default tempo
settings - see below).</p>
<p>For example, if 4 ticks is a crotchet, the following list is crotchet, quaver,
quaver, crotchet based arpeggio:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s1">&#39;c1:4&#39;</span><span class="p">,</span> <span class="s1">&#39;e:2&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c2:4&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The opening of Beethoven&#8217;s 5th Symphony would be encoded thus:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s1">&#39;r4:2&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;eb:8&#39;</span><span class="p">,</span> <span class="s1">&#39;r:2&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;d:8&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The definition and scope of an octave conforms to the table listed <a class="reference external" href="https://en.wikipedia.org/wiki/Scientific_pitch_notation#Table_of_note_frequencies">on this
page about scientific pitch notation</a>.  For example, middle &#8220;C&#8221; is <code class="docutils literal"><span class="pre">'c4'</span></code> and
concert &#8220;A&#8221; (440) is <code class="docutils literal"><span class="pre">'a4'</span></code>. Octaves start on the note &#8220;C&#8221;.</p>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="music.set_tempo">
<code class="descclassname">music.</code><code class="descname">set_tempo</code><span class="sig-paren">(</span><em>ticks=4</em>, <em>bpm=120</em><span class="sig-paren">)</span><a class="headerlink" href="#music.set_tempo" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the approximate tempo for playback.</p>
<p>A number of ticks (expressed as an integer) constitute a beat. Each beat is to be played at a certain frequency per minute (expressed as the more familiar BPM - beats per minute - also as an integer).</p>
<p>Suggested default values allow the following useful behaviour:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">music.set_tempo()</span></code> - reset the tempo to default of ticks = 4, bpm = 120</li>
<li><code class="docutils literal"><span class="pre">music.set_tempo(ticks=8)</span></code> - change the &#8220;definition&#8221; of a beat</li>
<li><code class="docutils literal"><span class="pre">music.set_tempo(bpm=180)</span></code> - just change the tempo</li>
</ul>
<p>To work out the length of a tick in milliseconds is very simple arithmetic: <code class="docutils literal"><span class="pre">60000/bpm/ticks_per_beat</span></code> . For the default values that&#8217;s <code class="docutils literal"><span class="pre">60000/120/4</span> <span class="pre">=</span> <span class="pre">125</span> <span class="pre">milliseconds</span></code> or <code class="docutils literal"><span class="pre">1</span> <span class="pre">beat</span> <span class="pre">=</span> <span class="pre">500</span> <span class="pre">milliseconds</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="music.get_tempo">
<code class="descclassname">music.</code><code class="descname">get_tempo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music.get_tempo" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the current tempo as a tuple of integers: <code class="docutils literal"><span class="pre">(ticks,</span> <span class="pre">bpm)</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="music.play">
<code class="descclassname">music.</code><code class="descname">play</code><span class="sig-paren">(</span><em>music</em>, <em>pin=microbit.pin0</em>, <em>wait=True</em>, <em>loop=False</em><span class="sig-paren">)</span><a class="headerlink" href="#music.play" title="Permalink to this definition">¶</a></dt>
<dd><p>Plays <code class="docutils literal"><span class="pre">music</span></code> containing the musical DSL defined above.</p>
<p>If <code class="docutils literal"><span class="pre">music</span></code> is a string it is expected to be a single note such as,
<code class="docutils literal"><span class="pre">'c1:4'</span></code>.</p>
<p>If <code class="docutils literal"><span class="pre">music</span></code> is specified as a list of notes (as defined in the section on
the musical DSL, above) then they are played one after the other to perform
a melody.</p>
<p>In both cases, the <code class="docutils literal"><span class="pre">duration</span></code> and <code class="docutils literal"><span class="pre">octave</span></code> values are reset to
their defaults before the music (whatever it may be) is played.</p>
<p>An optional argument to specify the output pin can be used to override the
default of <code class="docutils literal"><span class="pre">microbit.pin0</span></code>.</p>
<p>If <code class="docutils literal"><span class="pre">wait</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>, this function is blocking.</p>
<p>If <code class="docutils literal"><span class="pre">loop</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>, the tune repeats until <code class="docutils literal"><span class="pre">stop</span></code> is called
(see below) or the blocking call is interrupted.</p>
</dd></dl>

<dl class="function">
<dt id="music.pitch">
<code class="descclassname">music.</code><code class="descname">pitch</code><span class="sig-paren">(</span><em>frequency</em>, <em>len=-1</em>, <em>pin=microbit.pin0</em>, <em>wait=True</em><span class="sig-paren">)</span><a class="headerlink" href="#music.pitch" title="Permalink to this definition">¶</a></dt>
<dd><p>Plays a pitch at the integer frequency given for the specified number of
milliseconds. For example, if the frequency is set to 440 and the length to
1000 then we hear a standard concert A for one second.</p>
<p>If <code class="docutils literal"><span class="pre">wait</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>, this function is blocking.</p>
<p>If <code class="docutils literal"><span class="pre">len</span></code> is negative the pitch is played continuously until either the
blocking call is interrupted or, in the case of a background call, a new
frequency is set or <code class="docutils literal"><span class="pre">stop</span></code> is called (see below).</p>
</dd></dl>

<dl class="function">
<dt id="music.stop">
<code class="descclassname">music.</code><code class="descname">stop</code><span class="sig-paren">(</span><em>pin=microbit.pin0</em><span class="sig-paren">)</span><a class="headerlink" href="#music.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops all music playback on a given pin.</p>
</dd></dl>

<dl class="function">
<dt id="music.reset">
<code class="descclassname">music.</code><code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the state of the following attributes in the following way:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">ticks</span> <span class="pre">=</span> <span class="pre">4</span></code></li>
<li><code class="docutils literal"><span class="pre">bpm</span> <span class="pre">=</span> <span class="pre">120</span></code></li>
<li><code class="docutils literal"><span class="pre">duration</span> <span class="pre">=</span> <span class="pre">4</span></code></li>
<li><code class="docutils literal"><span class="pre">octave</span> <span class="pre">=</span> <span class="pre">4</span></code></li>
</ul>
</div></blockquote>
</dd></dl>

<div class="section" id="built-in-melodies">
<h4>Built in Melodies<a class="headerlink" href="#built-in-melodies" title="Permalink to this headline">¶</a></h4>
<p>For the purposes of education and entertainment, the module contains several
example tunes that are expressed as Python lists. They can be used like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">music</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">music</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">music</span><span class="o">.</span><span class="n">NYAN</span><span class="p">)</span>
</pre></div>
</div>
<p>All the tunes are either out of copyright, composed by Nicholas H.Tollervey and
released to the public domain or have an unknown composer and are covered by a
fair (educational) use provision.</p>
<p>They are:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">DADADADUM</span></code> - the opening to Beethoven&#8217;s 5th Symphony in C minor.</li>
<li><code class="docutils literal"><span class="pre">ENTERTAINER</span></code> - the opening fragment of Scott Joplin&#8217;s Ragtime classic &#8220;The Entertainer&#8221;.</li>
<li><code class="docutils literal"><span class="pre">PRELUDE</span></code> - the opening of the first Prelude in C Major of J.S.Bach&#8217;s 48 Preludes and Fugues.</li>
<li><code class="docutils literal"><span class="pre">ODE</span></code> - the &#8220;Ode to Joy&#8221; theme from Beethoven&#8217;s 9th Symphony in D minor.</li>
<li><code class="docutils literal"><span class="pre">NYAN</span></code> - the Nyan Cat theme (<a class="reference external" href="http://www.nyan.cat/">http://www.nyan.cat/</a>). The composer is unknown. This is fair use for educational porpoises (as they say in New York).</li>
<li><code class="docutils literal"><span class="pre">RINGTONE</span></code> - something that sounds like a mobile phone ringtone. To be used to indicate an incoming message.</li>
<li><code class="docutils literal"><span class="pre">FUNK</span></code> - a funky bass line for secret agents and criminal masterminds.</li>
<li><code class="docutils literal"><span class="pre">BLUES</span></code> - a boogie-woogie 12-bar blues walking bass.</li>
<li><code class="docutils literal"><span class="pre">BIRTHDAY</span></code> - &#8220;Happy Birthday to You...&#8221; for copyright status see: <a class="reference external" href="http://www.bbc.co.uk/news/world-us-canada-34332853">http://www.bbc.co.uk/news/world-us-canada-34332853</a></li>
<li><code class="docutils literal"><span class="pre">WEDDING</span></code> - the bridal chorus from Wagner&#8217;s opera &#8220;Lohengrin&#8221;.</li>
<li><code class="docutils literal"><span class="pre">FUNERAL</span></code> - the &#8220;funeral march&#8221; otherwise known as Frédéric Chopin&#8217;s Piano Sonata No. 2 in B♭ minor, Op. 35.</li>
<li><code class="docutils literal"><span class="pre">PUNCHLINE</span></code> - a fun fragment that signifies a joke has been made.</li>
<li><code class="docutils literal"><span class="pre">PYTHON</span></code> - John Philip Sousa&#8217;s march &#8220;Liberty Bell&#8221; aka, the theme for &#8220;Monty Python&#8217;s Flying Circus&#8221; (after which the Python programming language is named).</li>
<li><code class="docutils literal"><span class="pre">BADDY</span></code> - silent movie era entrance of a baddy.</li>
<li><code class="docutils literal"><span class="pre">CHASE</span></code> - silent movie era chase scene.</li>
<li><code class="docutils literal"><span class="pre">BA_DING</span></code> - a short signal to indicate something has happened.</li>
<li><code class="docutils literal"><span class="pre">WAWAWAWAA</span></code> - a very sad trombone.</li>
<li><code class="docutils literal"><span class="pre">JUMP_UP</span></code> - for use in a game, indicating upward movement.</li>
<li><code class="docutils literal"><span class="pre">JUMP_DOWN</span></code> - for use in a game, indicating downward movement.</li>
<li><code class="docutils literal"><span class="pre">POWER_UP</span></code> - a fanfare to indicate an achievement unlocked.</li>
<li><code class="docutils literal"><span class="pre">POWER_DOWN</span></code> - a sad fanfare to indicate an achievement lost.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<div class="code python highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    music.py</span>
<span class="sd">    ~~~~~~~~</span>

<span class="sd">    Plays a simple tune using the Micropython music module.</span>
<span class="sd">    This example requires a speaker/buzzer/headphones connected to P0 and GND.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">music</span>

<span class="c1"># play Prelude in C.</span>
<span class="n">notes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;c4:1&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f5&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f5&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;a5&#39;</span><span class="p">,</span> <span class="s1">&#39;a4&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;a5&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;a5&#39;</span><span class="p">,</span> <span class="s1">&#39;a4&#39;</span><span class="p">,</span> <span class="s1">&#39;e5&#39;</span><span class="p">,</span> <span class="s1">&#39;a5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;f#&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f#4&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;f#&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;f#4&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;g5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;g5&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;g5&#39;</span><span class="p">,</span> <span class="s1">&#39;g4&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;g5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;a3&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;a3&#39;</span><span class="p">,</span> <span class="s1">&#39;c4&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;e4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;d3&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;f#&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;f#&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;d3&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;f#&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;f#&#39;</span><span class="p">,</span> <span class="s1">&#39;c5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;g3&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;g3&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span>
<span class="p">]</span>

<span class="n">music</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-neopixel"></span><div class="section" id="module-neopixel">
<span id="neopixel"></span><h2>NeoPixel<a class="headerlink" href="#module-neopixel" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">neopixel</span></code> module lets you use Neopixel (WS2812) individually addressable
RGB LED strips with the Microbit. Note to use the <code class="docutils literal"><span class="pre">neopixel</span></code> module, you
need to import it separately with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">neopixel</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">From our tests, the Microbit Neopixel module can drive up to around 256
Neopixels. Anything above that and you may experience weird bugs and
issues.</p>
</div>
<p>NeoPixels are fun strips of multi-coloured programmable LEDs. This module
contains everything to plug them into a micro:bit and create funky displays,
art and games such as the demo shown below.</p>
<img alt="_images/neopixel.gif" src="_images/neopixel.gif" />
<p>To connect a strip of neopixels you&#8217;ll need to attach the micro:bit as shown
below (assuming you want to drive the pixels from pin 0 - you can connect
neopixels to pins 1 and 2 too). The label on the crocodile clip tells you where
to attach the other end on the neopixel strip.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Do not use the 3v connector on the Microbit to power any more than 8
Neopixels at a time.</p>
<p class="last">If you wish to use more than 8 Neopixels, you must use a separate 3v-5v
power supply for the Neopixel power pin.</p>
</div>
<img alt="_images/neopixel-croc.png" src="_images/neopixel-croc.png" />
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="neopixel.NeoPixel">
<em class="property">class </em><code class="descclassname">neopixel.</code><code class="descname">NeoPixel</code><span class="sig-paren">(</span><em>pin</em>, <em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#neopixel.NeoPixel" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a new strip of <code class="docutils literal"><span class="pre">n</span></code> number of neopixel LEDs controlled via pin
<code class="docutils literal"><span class="pre">pin</span></code>. Each pixel is addressed by a position (starting from 0). Neopixels
are given RGB (red, green, blue) values between 0-255 as a tuple. For
example, <code class="docutils literal"><span class="pre">(255,255,255)</span></code> is white.</p>
<dl class="method">
<dt id="neopixel.NeoPixel.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#neopixel.NeoPixel.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all the pixels.</p>
</dd></dl>

<dl class="method">
<dt id="neopixel.NeoPixel.show">
<code class="descname">show</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#neopixel.NeoPixel.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the pixels. Must be called for any updates to become visible.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="operations">
<h3>Operations<a class="headerlink" href="#operations" title="Permalink to this headline">¶</a></h3>
<p>Writing the colour doesn&#8217;t update the display (use <code class="docutils literal"><span class="pre">show()</span></code> for that).</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="n">np</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>  <span class="c1"># first element</span>
<span class="n">np</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># last element</span>
<span class="n">np</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># only now will the updated value be shown</span>
</pre></div>
</div>
<p>To read the colour of a specific pixel just reference it.</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="using-neopixels">
<h3>Using Neopixels<a class="headerlink" href="#using-neopixels" title="Permalink to this headline">¶</a></h3>
<p>Interact with Neopixels as if they were a list of tuples. Each tuple represents
the RGB (red, green and blue) mix of colours for a specific pixel. The RGB
values can range between 0 to 255.</p>
<p>For example, initialise a strip of 8 neopixels on a strip connected to pin0
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">neopixel</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">neopixel</span><span class="o">.</span><span class="n">NeoPixel</span><span class="p">(</span><span class="n">pin0</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
<p>Set pixels by indexing them (like with a Python list). For instance, to
set the first pixel to full brightness red, you would use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">np</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Or the final pixel to purple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">np</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the current colour value of a pixel by indexing it. For example, to print
the first pixel&#8217;s RGB value use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>Finally, to push the new colour data to your Neopixel strip, use the .show()
function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">np</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>If nothing is happening, it&#8217;s probably because you&#8217;ve forgotten this final
step..!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you&#8217;re not seeing anything change on your Neopixel strip, make sure
you&#8217;re <code class="docutils literal"><span class="pre">show()</span></code> at least somewhere otherwise your updates won&#8217;t be
shown.</p>
</div>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    neopixel_random.py</span>

<span class="sd">    Repeatedly displays random colours onto the LED strip.</span>
<span class="sd">    This example requires a strip of 8 Neopixels (WS2812) connected to pin0.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">neopixel</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="c1"># Setup the Neopixel strip on pin0 with a length of 8 pixels</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">neopixel</span><span class="o">.</span><span class="n">NeoPixel</span><span class="p">(</span><span class="n">pin0</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1">#Iterate over each LED in the strip</span>

    <span class="k">for</span> <span class="n">pixel_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="p">)):</span>
        <span class="n">red</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="n">green</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="n">blue</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>

        <span class="c1"># Assign the current LED a random red, green and blue value between 0 and 60</span>
        <span class="n">np</span><span class="p">[</span><span class="n">pixel_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">)</span>

        <span class="c1"># Display the current pixel data on the Neopixel strip</span>
        <span class="n">np</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-os"></span><div class="section" id="module-os">
<span id="the-os-module"></span><h2>The <code class="docutils literal"><span class="pre">os</span></code>  Module<a class="headerlink" href="#module-os" title="Permalink to this headline">¶</a></h2>
<p>MicroPython contains an <code class="docutils literal"><span class="pre">os</span></code> module based upon the <code class="docutils literal"><span class="pre">os</span></code> module in the
Python standard library. It&#8217;s used for accessing what would traditionally be
termed as operating system dependent functionality. Since there is no operating
system in MicroPython the module provides functions relating to the management
of the simple on-device persistent file system and information about the
current system.</p>
<p>To access this module you need to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
<p>We assume you have done this for the examples below.</p>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="os.listdir">
<code class="descclassname">os.</code><code class="descname">listdir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.listdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of the names of all the files contained within the local
persistent on-device file system.</p>
</dd></dl>

<dl class="function">
<dt id="os.remove">
<code class="descclassname">os.</code><code class="descname">remove</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#os.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes (deletes) the file named in the argument <code class="docutils literal"><span class="pre">filename</span></code>. If the file
does not exist an <code class="docutils literal"><span class="pre">OSError</span></code> exception will occur.</p>
</dd></dl>

<dl class="function">
<dt id="os.size">
<code class="descclassname">os.</code><code class="descname">size</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#os.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the size, in bytes, of the file named in the argument <code class="docutils literal"><span class="pre">filename</span></code>.
If the file does not exist an <code class="docutils literal"><span class="pre">OSError</span></code> exception will occur.</p>
</dd></dl>

<dl class="function">
<dt id="os.uname">
<code class="descclassname">os.</code><code class="descname">uname</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.uname" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns information identifying the current operating system. The return
value is an object with five attributes:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">sysname</span></code> - operating system name</li>
<li><code class="docutils literal"><span class="pre">nodename</span></code> - name of machine on network (implementation-defined)</li>
<li><code class="docutils literal"><span class="pre">release</span></code> - operating system release</li>
<li><code class="docutils literal"><span class="pre">version</span></code> - operating system version</li>
<li><code class="docutils literal"><span class="pre">machine</span></code> - hardware identifier</li>
</ul>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is no underlying operating system in MicroPython. As a result the
information returned by the <code class="docutils literal"><span class="pre">uname</span></code> function is mostly useful for
versioning details.</p>
</div>
</div>
</div>
<span id="document-radio"></span><div class="section" id="module-radio">
<span id="radio"></span><h2>Radio<a class="headerlink" href="#module-radio" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">radio</span></code> module allows devices to work together via simple wireless
networks.</p>
<p>The radio module is conceptually very simple:</p>
<ul class="simple">
<li>Broadcast messages are of a certain configurable length (up to 251 bytes).</li>
<li>Messages received are read from a queue of configurable size (the larger the queue the more RAM is used). If the queue is full, new messages are ignored.</li>
<li>Messages are broadcast and received on a preselected channel (numbered 0-100).</li>
<li>Broadcasts are at a certain level of power - more power means more range.</li>
<li>Messages are filtered by address (like a house number) and group (like a named recipient at the specified address).</li>
<li>The rate of throughput can be one of three pre-determined settings.</li>
<li>Send and receieve bytes to work with arbitrary data.</li>
<li>As a convenience for children, it&#8217;s easy to send and receive messages as strings.</li>
<li>The default configuration is both sensible and compatible with other platforms that target the BBC micro:bit.</li>
</ul>
<p>To access this module you need to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">radio</span>
</pre></div>
</div>
<p>We assume you have done this for the examples below.</p>
<div class="section" id="constants">
<h3>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="radio.RATE_250KBIT">
<code class="descclassname">radio.</code><code class="descname">RATE_250KBIT</code><a class="headerlink" href="#radio.RATE_250KBIT" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant used to indicate a throughput of 256 Kbit a second.</p>
</dd></dl>

<dl class="attribute">
<dt id="radio.RATE_1MBIT">
<code class="descclassname">radio.</code><code class="descname">RATE_1MBIT</code><a class="headerlink" href="#radio.RATE_1MBIT" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant used to indicate a throughput of 1 MBit a second.</p>
</dd></dl>

<dl class="attribute">
<dt id="radio.RATE_2MBIT">
<code class="descclassname">radio.</code><code class="descname">RATE_2MBIT</code><a class="headerlink" href="#radio.RATE_2MBIT" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant used to indicate a throughput of 2 MBit a second.</p>
</dd></dl>

</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="radio.on">
<code class="descclassname">radio.</code><code class="descname">on</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#radio.on" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns the radio on. This needs to be explicitly called since the radio
draws power and takes up memory that you may otherwise need.</p>
</dd></dl>

<dl class="function">
<dt id="radio.off">
<code class="descclassname">radio.</code><code class="descname">off</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#radio.off" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns off the radio, thus saving power and memory.</p>
</dd></dl>

<dl class="function">
<dt id="radio.config">
<code class="descclassname">radio.</code><code class="descname">config</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#radio.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures various keyword based settings relating to the radio. The
available settings and their sensible default values are listed below.</p>
<p>The <code class="docutils literal"><span class="pre">length</span></code> (default=32) defines the maximum length, in bytes, of a
message sent via the radio. It can be up to 251 bytes long (254 - 3 bytes
for S0, LENGTH and S1 preamble).</p>
<p>The <code class="docutils literal"><span class="pre">queue</span></code> (default=3) specifies the number of messages that can be
stored on the incoming message queue. If there are no spaces left on the
queue for incoming messages, then the incoming message is dropped.</p>
<p>The <code class="docutils literal"><span class="pre">channel</span></code> (default=7) can be an integer value from 0 to 100
(inclusive) that defines an arbitrary &#8220;channel&#8221; to which the radio is
tuned. Messages will be sent via this channel and only messages received
via this channel will be put onto the incoming message queue. Each step is
1MHz wide, based at 2400MHz.</p>
<p>The <code class="docutils literal"><span class="pre">power</span></code> (default=0) is an integer value from 0 to 7 (inclusive) to
indicate the strength of signal used when broadcasting a message. The
higher the value the stronger the signal, but the more power is consumed
by the device. The numbering translates to positions in the following list
of dBm (decibel milliwatt) values: -30, -20, -16, -12, -8, -4, 0, 4.</p>
<p>The <code class="docutils literal"><span class="pre">address</span></code> (default=0x75626974) is an arbitrary name, expressed as a
32-bit address, that&#8217;s used to filter incoming packets at the hardware
level, keeping only those that match the address you set. The default used
by other micro:bit related platforms is the default setting used here.</p>
<p>The <code class="docutils literal"><span class="pre">group</span></code> (default=0) is an 8-bit value (0-255) used with the
<code class="docutils literal"><span class="pre">address</span></code> when filtering messages. Conceptually, &#8220;address&#8221; is like a
house/office address and &#8220;group&#8221; is like the person at that address to
which you want to send your message.</p>
<p>The <code class="docutils literal"><span class="pre">data_rate</span></code> (default=radio.RATE_1MBIT) indicates the speed at which
data throughput takes place. Can be one of the following contants defined
in the <code class="docutils literal"><span class="pre">radio</span></code> module : <code class="docutils literal"><span class="pre">RATE_250KBIT</span></code>, <code class="docutils literal"><span class="pre">RATE_1MBIT</span></code> or
<code class="docutils literal"><span class="pre">RATE_2MBIT</span></code>.</p>
<p>If <code class="docutils literal"><span class="pre">config</span></code> is not called then the defaults described above are assumed.</p>
</dd></dl>

<dl class="function">
<dt id="radio.reset">
<code class="descclassname">radio.</code><code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#radio.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the settings to their default values (as listed in the documentation
for the <code class="docutils literal"><span class="pre">config</span></code> function above).</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">None of the following send or receive methods will work until the radio is
turned on.</p>
</div>
<dl class="function">
<dt id="radio.send_bytes">
<code class="descclassname">radio.</code><code class="descname">send_bytes</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#radio.send_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a message containing bytes.</p>
</dd></dl>

<dl class="function">
<dt id="radio.receive_bytes">
<code class="descclassname">radio.</code><code class="descname">receive_bytes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#radio.receive_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive the next incoming message on the message queue. Returns <code class="docutils literal"><span class="pre">None</span></code> if
there are no pending messages. Messages are returned as bytes.</p>
</dd></dl>

<dl class="function">
<dt id="radio.send">
<code class="descclassname">radio.</code><code class="descname">send</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#radio.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a message string. This is the equivalent of
<code class="docutils literal"><span class="pre">send_bytes(bytes(message,</span> <span class="pre">'utf8'))</span></code> but with <code class="docutils literal"><span class="pre">b'\x01\x00\x01'</span></code>
prepended to the front (to make it compatible with other platforms that
target the micro:bit).</p>
</dd></dl>

<dl class="function">
<dt id="radio.receive">
<code class="descclassname">radio.</code><code class="descname">receive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#radio.receive" title="Permalink to this definition">¶</a></dt>
<dd><p>Works in exactly the same way as <code class="docutils literal"><span class="pre">receive_bytes</span></code> but returns
whatever was sent.</p>
<p>Currently, it&#8217;s equivalent to <code class="docutils literal"><span class="pre">str(receive_bytes(),</span> <span class="pre">'utf8')</span></code> but with a
check that the the first three bytes are <code class="docutils literal"><span class="pre">b'\x01\x00\x01'</span></code> (to make it
compatible with other platforms that may target the micro:bit). It strips
the prepended bytes before converting to a string.</p>
<p>A <code class="docutils literal"><span class="pre">ValueError</span></code> exception is raised if conversion to string fails.</p>
</dd></dl>

<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c1"># A micro:bit Firefly.</span>
<span class="c1"># By Nicholas H.Tollervey. Released to the public domain.</span>
<span class="kn">import</span> <span class="nn">radio</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Image</span><span class="p">,</span> <span class="n">button_a</span><span class="p">,</span> <span class="n">sleep</span>

<span class="c1"># Create the &quot;flash&quot; animation frames. Can you work out how it&#39;s done?</span>
<span class="n">flash</span> <span class="o">=</span> <span class="p">[</span><span class="n">Image</span><span class="p">()</span><span class="o">.</span><span class="n">invert</span><span class="p">()</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mi">9</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>

<span class="c1"># The radio won&#39;t work unless it&#39;s switched on.</span>
<span class="n">radio</span><span class="o">.</span><span class="n">on</span><span class="p">()</span>

<span class="c1"># Event loop.</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># Button A sends a &quot;flash&quot; message.</span>
    <span class="k">if</span> <span class="n">button_a</span><span class="o">.</span><span class="n">was_pressed</span><span class="p">():</span>
        <span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;flash&#39;</span><span class="p">)</span>  <span class="c1"># a-ha</span>
    <span class="c1"># Read any incoming messages.</span>
    <span class="n">incoming</span> <span class="o">=</span> <span class="n">radio</span><span class="o">.</span><span class="n">receive</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">incoming</span> <span class="o">==</span> <span class="s1">&#39;flash&#39;</span><span class="p">:</span>
        <span class="c1"># If there&#39;s an incoming &quot;flash&quot; message display</span>
        <span class="c1"># the firefly flash animation after a random short</span>
        <span class="c1"># pause.</span>
        <span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">350</span><span class="p">))</span>
        <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">flash</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="c1"># Randomly re-broadcast the flash message after a</span>
        <span class="c1"># slight delay.</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">sleep</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
            <span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;flash&#39;</span><span class="p">)</span>  <span class="c1"># a-ha</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-random"></span><div class="section" id="module-random">
<span id="random-number-generation"></span><h2>Random Number Generation<a class="headerlink" href="#module-random" title="Permalink to this headline">¶</a></h2>
<p>This module is based upon the <code class="docutils literal"><span class="pre">random</span></code> module in the Python standard library.
It contains functions for generating random behaviour.</p>
<p>To access this module you need to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">random</span>
</pre></div>
</div>
<p>We assume you have done this for the examples below.</p>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="random.getrandbits">
<code class="descclassname">random.</code><code class="descname">getrandbits</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#random.getrandbits" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an integer with <code class="docutils literal"><span class="pre">n</span></code> random bits.</p>
</dd></dl>

<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Because the underlying generator function returns at most 30 bits, <code class="docutils literal"><span class="pre">n</span></code>
may only be a value between 1-30 (inclusive).</p>
</div>
<dl class="function">
<dt id="random.seed">
<code class="descclassname">random.</code><code class="descname">seed</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#random.seed" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the random number generator with a known integer <code class="docutils literal"><span class="pre">n</span></code>. This
will give you reproducibly deterministic randomness from a given starting
state (<code class="docutils literal"><span class="pre">n</span></code>).</p>
</dd></dl>

<dl class="function">
<dt id="random.randint">
<code class="descclassname">random.</code><code class="descname">randint</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#random.randint" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a random integer <code class="docutils literal"><span class="pre">N</span></code> such that <code class="docutils literal"><span class="pre">a</span> <span class="pre">&lt;=</span> <span class="pre">N</span> <span class="pre">&lt;=</span> <span class="pre">b</span></code>. Alias for
<code class="docutils literal"><span class="pre">randrange(a,</span> <span class="pre">b+1)</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="random.randrange">
<code class="descclassname">random.</code><code class="descname">randrange</code><span class="sig-paren">(</span><em>stop</em><span class="sig-paren">)</span><a class="headerlink" href="#random.randrange" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a randomly selected integer between zero and up to (but not
including) <code class="docutils literal"><span class="pre">stop</span></code>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descclassname">random.</code><code class="descname">randrange</code><span class="sig-paren">(</span><em>start</em>, <em>stop</em><span class="sig-paren">)</span></dt>
<dd><p>Return a randomly selected integer from <code class="docutils literal"><span class="pre">range(start,</span> <span class="pre">stop)</span></code>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descclassname">random.</code><code class="descname">randrange</code><span class="sig-paren">(</span><em>start</em>, <em>stop</em>, <em>step</em><span class="sig-paren">)</span></dt>
<dd><p>Return a randomly selected element from <code class="docutils literal"><span class="pre">range(start,</span> <span class="pre">stop,</span> <span class="pre">step)</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="random.choice">
<code class="descclassname">random.</code><code class="descname">choice</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="headerlink" href="#random.choice" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a random element from the non-empty sequence <code class="docutils literal"><span class="pre">seq</span></code>. If <code class="docutils literal"><span class="pre">seq</span></code> is
empty, raises <code class="docutils literal"><span class="pre">IndexError</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="random.random">
<code class="descclassname">random.</code><code class="descname">random</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#random.random" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next random floating point number in the range [0.0, 1.0)</p>
</dd></dl>

<dl class="function">
<dt id="random.uniform">
<code class="descclassname">random.</code><code class="descname">uniform</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#random.uniform" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a random floating point number <code class="docutils literal"><span class="pre">N</span></code> such that <code class="docutils literal"><span class="pre">a</span> <span class="pre">&lt;=</span> <span class="pre">N</span> <span class="pre">&lt;=</span> <span class="pre">b</span></code>
for <code class="docutils literal"><span class="pre">a</span> <span class="pre">&lt;=</span> <span class="pre">b</span></code> and <code class="docutils literal"><span class="pre">b</span> <span class="pre">&lt;=</span> <span class="pre">N</span> <span class="pre">&lt;=</span> <span class="pre">a</span></code> for <code class="docutils literal"><span class="pre">b</span> <span class="pre">&lt;</span> <span class="pre">a</span></code>.</p>
</dd></dl>

</div>
</div>
<span id="document-speech"></span><div class="section" id="speech">
<h2>Speech<a class="headerlink" href="#speech" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>WARNING! THIS IS ALPHA CODE.</p>
<p>We reserve the right to change this API as development continues.</p>
<p class="last">The quality of the speech is not great, merely &#8220;good enough&#8221;. Given the
constraints of the device you may encounter memory errors and / or
unexpected extra sounds during playback. It&#8217;s early days and we&#8217;re
improving the code for the speech synthesiser all the time. Bug reports
and pull requests are most welcome.</p>
</div>
<span class="target" id="module-speech"></span><p>This module makes microbit talk, sing and make other speech like sounds
provided that you connect a speaker to your board as shown below:</p>
<img alt="_images/speech.png" src="_images/speech.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This work is based upon the amazing reverse engineering efforts of
Sebastian Macke based upon an old text-to-speech (TTS) program called SAM
(Software Automated Mouth) originally released in 1982 for the
Commodore 64. The result is a small C library that we have adopted and
adapted for the micro:bit. You can find out more from
<a class="reference external" href="http://simulationcorner.net/index.php?page=sam">his homepage</a>. Much of
the information in this document was gleaned from the original user&#8217;s
manual which can be found
<a class="reference external" href="http://www.apple-iigs.info/newdoc/sam.pdf">here</a>.</p>
</div>
<p>The speech synthesiser can produce around 2.5 seconds worth of sound from up to
255 characters of textual input.</p>
<p>To access this module you need to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">speech</span>
</pre></div>
</div>
<p>We assume you have done this for the examples below.</p>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="speech.translate">
<code class="descclassname">speech.</code><code class="descname">translate</code><span class="sig-paren">(</span><em>words</em><span class="sig-paren">)</span><a class="headerlink" href="#speech.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Given English words in the string <code class="docutils literal"><span class="pre">words</span></code>, return a string containing
a best guess at the appropriate phonemes to pronounce. The output is
generated from this
<a class="reference external" href="https://github.com/s-macke/SAM/wiki/Text-to-phoneme-translation-table">text to phoneme translation table</a>.</p>
<p>This function should be used to generate a first approximation of phonemes
that can be further hand-edited to improve accuracy, inflection and
emphasis.</p>
</dd></dl>

<dl class="function">
<dt id="speech.pronounce">
<code class="descclassname">speech.</code><code class="descname">pronounce</code><span class="sig-paren">(</span><em>phonemes</em>, <em>*</em>, <em>pitch=64</em>, <em>speed=72</em>, <em>mouth=128</em>, <em>throat=128</em><span class="sig-paren">)</span><a class="headerlink" href="#speech.pronounce" title="Permalink to this definition">¶</a></dt>
<dd><p>Pronounce the phonemes in the string <code class="docutils literal"><span class="pre">phonemes</span></code>. See below for details of
how to use phonemes to finely control the output of the speech synthesiser.
Override the optional pitch, speed, mouth and throat settings to change the
timbre (quality) of the voice.</p>
</dd></dl>

<dl class="function">
<dt id="speech.say">
<code class="descclassname">speech.</code><code class="descname">say</code><span class="sig-paren">(</span><em>words</em>, <em>*</em>, <em>pitch=64</em>, <em>speed=72</em>, <em>mouth=128</em>, <em>throat=128</em><span class="sig-paren">)</span><a class="headerlink" href="#speech.say" title="Permalink to this definition">¶</a></dt>
<dd><p>Say the English words in the string <code class="docutils literal"><span class="pre">words</span></code>. The result is semi-accurate
for English. Override the optional pitch, speed, mouth and throat
settings to change the timbre (quality) of the voice. This is a short-hand
equivalent of: <code class="docutils literal"><span class="pre">speech.pronounce(speech.translate(words))</span></code></p>
</dd></dl>

<dl class="function">
<dt id="speech.sing">
<code class="descclassname">speech.</code><code class="descname">sing</code><span class="sig-paren">(</span><em>phonemes</em>, <em>*</em>, <em>pitch=64</em>, <em>speed=72</em>, <em>mouth=128</em>, <em>throat=128</em><span class="sig-paren">)</span><a class="headerlink" href="#speech.sing" title="Permalink to this definition">¶</a></dt>
<dd><p>Sing the phonemes contained in the string <code class="docutils literal"><span class="pre">phonemes</span></code>. Changing the pitch
and duration of the note is described below. Override the optional pitch,
speed, mouth and throat settings to change the timbre (quality) of the
voice.</p>
</dd></dl>

</div>
<div class="section" id="punctuation">
<h3>Punctuation<a class="headerlink" href="#punctuation" title="Permalink to this headline">¶</a></h3>
<p>Punctuation is used to alter the delivery of speech. The synthesiser
understands four punctuation marks: hyphen, comma, full-stop and question mark.</p>
<p>The hyphen (<code class="docutils literal"><span class="pre">-</span></code>) marks clause boundaries by inserting a short pause in the
speech.</p>
<p>The comma (<code class="docutils literal"><span class="pre">,</span></code>) marks phrase boundaries and inserts a pause of approximately
double that of the hyphen.</p>
<p>The full-stop (<code class="docutils literal"><span class="pre">.</span></code>) and question mark (<code class="docutils literal"><span class="pre">?</span></code>) end sentences.</p>
<p>The full-stop inserts a pause and causes the pitch to fall.</p>
<p>The question mark also inserts a pause but causes the pitch to rise. This works
well with yes/no questions such as, &#8220;are we home yet?&#8221; rather than more complex
questions such as &#8220;why are we going home?&#8221;. In the latter case, use a
full-stop.</p>
</div>
<div class="section" id="timbre">
<h3>Timbre<a class="headerlink" href="#timbre" title="Permalink to this headline">¶</a></h3>
<p>The timbre of a sound is the quality of the sound. It&#8217;s the difference between
the voice of a DALEK and the voice of a human (for example). To control the
timbre change the numeric settings of the <code class="docutils literal"><span class="pre">pitch</span></code>, <code class="docutils literal"><span class="pre">speed</span></code>, <code class="docutils literal"><span class="pre">mouth</span></code> and
<code class="docutils literal"><span class="pre">throat</span></code> arguments.</p>
<p>The pitch (how high or low the voice sounds) and speed (how quickly the speech
is delivered) settings are rather obvious and generally fall into the following
categories:</p>
<p>Pitch:</p>
<ul class="simple">
<li>0-20 impractical</li>
<li>20-30 very high</li>
<li>30-40 high</li>
<li>40-50 high normal</li>
<li>50-70 normal</li>
<li>70-80 low normal</li>
<li>80-90 low</li>
<li>90-255 very low</li>
</ul>
<p>(The default is 64)</p>
<p>Speed:</p>
<ul class="simple">
<li>0-20 impractical</li>
<li>20-40 very fast</li>
<li>40-60 fast</li>
<li>60-70 fast conversational</li>
<li>70-75 normal conversational</li>
<li>75-90 narrative</li>
<li>90-100 slow</li>
<li>100-225 very slow</li>
</ul>
<p>(The default is 72)</p>
<p>The mouth and throat values are a little harder to explain and the following
descriptions are based upon our aural impressions of speech produced as the
value of each setting is changed.</p>
<p>For mouth, the lower the number the more it sounds like the speaker is talking
without moving their lips. In contrast, higher numbers (up to 255) make it
sound like the speech is enunciated with exagerated mouth movement.</p>
<p>For throat, the lower the number the more relaxed the speaker sounds. In
contrast, the higher the number, the more tense the tone of voice becomes.</p>
<p>The important thing is to experiment and adjust the settings until you get the
effect you desire.</p>
<p>To get you started here are some examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;I am a little robot&quot;</span><span class="p">,</span>  <span class="n">speed</span><span class="o">=</span><span class="mi">92</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">throat</span><span class="o">=</span><span class="mi">190</span><span class="p">,</span> <span class="n">mouth</span><span class="o">=</span><span class="mi">190</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;I am an elf&quot;</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">72</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">throat</span><span class="o">=</span><span class="mi">110</span><span class="p">,</span> <span class="n">mouth</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;I am a news presenter&quot;</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">82</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">72</span><span class="p">,</span> <span class="n">throat</span><span class="o">=</span><span class="mi">110</span><span class="p">,</span> <span class="n">mouth</span><span class="o">=</span><span class="mi">105</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;I am an old lady&quot;</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">82</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">throat</span><span class="o">=</span><span class="mi">145</span><span class="p">,</span> <span class="n">mouth</span><span class="o">=</span><span class="mi">145</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;I am E.T.&quot;</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">throat</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">mouth</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;I am a DALEK - EXTERMINATE&quot;</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">throat</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">mouth</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="phonemes">
<h3>Phonemes<a class="headerlink" href="#phonemes" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">say</span></code> function makes it easy to produce speech - but often it&#8217;s not
accurate. To make sure the speech synthesiser pronounces things
<em>exactly</em> how you&#8217;d like, you need to use phonemes: the smallest
perceptually distinct units of sound that can be used to distinguish different
words. Essentially, they are the building-block sounds of speech.</p>
<p>The <code class="docutils literal"><span class="pre">pronounce</span></code> function takes a string containing a simplified and readable
version of the <a class="reference external" href="https://en.wikipedia.org/wiki/International_Phonetic_Alphabet">International Phonetic Alphabet</a> and optional annotations to indicate
inflection and emphasis.</p>
<p>The advantage of using phonemes is that you don&#8217;t have to know how to spell!
Rather, you only have to know how to say the word in order to spell it
phonetically.</p>
<p>The table below lists the phonemes understood by the synthesiser.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The table contains the phoneme as characters, and an example word. The
example words have the sound of the phoneme (in parenthesis), but not
necessarily the same letters.</p>
<p class="last">Often overlooked: the symbol for the &#8220;H&#8221; sound is <code class="docutils literal"><span class="pre">/H</span></code>. A glottal stop
is a forced stoppage of sound.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre>SIMPLE VOWELS                          VOICED CONSONANTS
IY           f(ee)t                    R        (r)ed
IH           p(i)n                     L        a(ll)ow
EH           b(e)g                     W        a(w)ay
AE           S(a)m                     W        (wh)ale
AA           p(o)t                     Y        (y)ou
AH           b(u)dget                  M        (S)am
AO           t(al)k                    N        ma(n)
OH           c(o)ne                    NX       so(ng)
UH           b(oo)k                    B        (b)ad
UX           l(oo)t                    D        (d)og
ER           b(ir)d                    G        a(g)ain
AX           gall(o)n                  J        (j)u(dg)e
IX           dig(i)t                   Z        (z)oo
                                       ZH       plea(s)ure
DIPHTHONGS                             V        se(v)en
EY           m(a)de                    DH       (th)en
AY           h(igh)
OY           b(oy)
AW           h(ow)                     UNVOICED CONSONANTS
OW           sl(ow)                    S         (S)am
UW           cr(ew)                    SH        fi(sh)
                                       F         (f)ish
                                       TH        (th)in
SPECIAL PHONEMES                       P         (p)oke
UL           sett(le) (=AXL)           T         (t)alk
UM           astron(om)y (=AXM)        K         (c)ake
UN           functi(on) (=AXN)         CH        spee(ch)
Q            kitt-en (glottal stop)    /H        a(h)ead
</pre></div>
</div>
<p>The following non-standard symbols are also available to the user:</p>
<div class="highlight-python"><div class="highlight"><pre>YX           diphthong ending (weaker version of Y)
WX           diphthong ending (weaker version of W)
RX           R after a vowel (smooth version of R)
LX           L after a vowel (smooth version of L)
/X           H before a non-front vowel or consonant - as in (wh)o
DX           T as in pi(t)y (weaker version of T)
</pre></div>
</div>
<p>Here are some seldom used phoneme combinations (and suggested alternatives):</p>
<div class="highlight-python"><div class="highlight"><pre>PHONEME        YOU PROBABLY WANT:     UNLESS IT SPLITS SYLLABLES LIKE:
COMBINATION
GS             GZ e.g. ba(gs)         bu(gs)pray
BS             BZ e.g. slo(bz)        o(bsc)ene
DS             DZ e.g. su(ds)         Hu(ds)son
PZ             PS e.g. sla(ps)        -----
TZ             TS e.g. cur(ts)y       -----
KZ             KS e.g. fi(x)          -----
NG             NXG e.g. singing       i(ng)rate
NK             NXK e.g. bank          Su(nk)ist
</pre></div>
</div>
<p>If you use anything other than the phonemes described above, a <code class="docutils literal"><span class="pre">ValueError</span></code>
exception will be raised. Pass in the phonemes as a string like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">speech</span><span class="o">.</span><span class="n">pronounce</span><span class="p">(</span><span class="s2">&quot;/HEHLOW&quot;</span><span class="p">)</span>  <span class="c1"># &quot;Hello&quot;</span>
</pre></div>
</div>
<p>The phonemes are classified into two broad groups: vowels and consonants.</p>
<p>Vowels are further subdivided into simple vowels and diphthongs. Simple vowels
don&#8217;t change their sound as you say them whereas diphthongs start with one
sound and end with another. For example, when you say the word &#8220;oil&#8221; the &#8220;oi&#8221;
vowel starts with an &#8220;oh&#8221; sound but changes to an &#8220;ee&#8221; sound.</p>
<p>Consonants are also subdivided into two groups: voiced and unvoiced. Voiced
consonants require the speaker to use their vocal chords to produce the sound.
For example, consonants like &#8220;L&#8221;, &#8220;N&#8221; and &#8220;Z&#8221; are voiced. Unvoiced consonants
are produced by rushing air, such as &#8220;P&#8221;, &#8220;T&#8221; and &#8220;SH&#8221;.</p>
<p>Once you get used to it, the phoneme system is easy. To begin with some
spellings may seem tricky (for example, &#8220;adventure&#8221; has a &#8220;CH&#8221; in it) but the
rule is to write what you say, not what you spell. Experimentation is the best
way to resolve problematic words.</p>
<p>It&#8217;s also important that speech sounds natural and understandable. To help
with improving the quality of spoken output it&#8217;s often good to use the built-in
stress system to add inflection or emphasis.</p>
<p>There are eight stress markers indicated by the numbers <code class="docutils literal"><span class="pre">1</span></code> - <code class="docutils literal"><span class="pre">8</span></code>. Simply
insert the required number after the vowel to be stressed. For example, the
lack of expression of &#8220;/HEHLOW&#8221; is much improved (and friendlier) when
spelled out &#8220;/HEH3LOW&#8221;.</p>
<p>It&#8217;s also possible to change the meaning of words through the way they are
stressed. Consider the phrase &#8220;Why should I walk to the store?&#8221;. It could be
pronounced in several different ways:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># You need a reason to do it.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">pronounce</span><span class="p">(</span><span class="s2">&quot;WAY2 SHUH7D AY WAO5K TUX DHAH STOH5R.&quot;</span><span class="p">)</span>
<span class="c1"># You are reluctant to go.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">pronounce</span><span class="p">(</span><span class="s2">&quot;WAY7 SHUH2D AY WAO7K TUX DHAH STOH5R.&quot;</span><span class="p">)</span>
<span class="c1"># You want someone else to do it.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">pronounce</span><span class="p">(</span><span class="s2">&quot;WAY5 SHUH7D AY2 WAO7K TUX DHAH STOHR.&quot;</span><span class="p">)</span>
<span class="c1"># You&#39;d rather drive.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">pronounce</span><span class="p">(</span><span class="s2">&quot;WAY5 SHUHD AY7 WAO2K TUX7 DHAH STOHR.&quot;</span><span class="p">)</span>
<span class="c1"># You want to walk somewhere else.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">pronounce</span><span class="p">(</span><span class="s2">&quot;WAY5 SHUHD AY WAO5K TUX DHAH STOH2OH7R.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Put simply, different stresses in the speech create a more expressive tone of
voice.</p>
<p>They work by raising or lowering pitch and elongating the associated vowel
sound depending on the number you give:</p>
<ol class="arabic simple">
<li>very emotional stress</li>
<li>very emphatic stress</li>
<li>rather strong stress</li>
<li>ordinary stress</li>
<li>tight stress</li>
<li>neutral (no pitch change) stress</li>
<li>pitch-dropping stress</li>
<li>extreme pitch-dropping stress</li>
</ol>
<p>The smaller the number, the more extreme the emphasis will be. However, such
stress markers will help pronounce difficult words correctly. For example, if
a syllable is not enunciated sufficiently, put in a neutral stress marker.</p>
<p>It&#8217;s also possible to elongate words with stress markers:</p>
<div class="highlight-python"><div class="highlight"><pre>speech.pronounce(&quot;/HEH5EH4EH3EH2EH2EH3EH4EH5EHLP.”)
</pre></div>
</div>
</div>
<div class="section" id="singing">
<h3>Singing<a class="headerlink" href="#singing" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s possible to make MicroPython sing phonemes.</p>
<p>This is done by annotating a pitch related number onto a phoneme. The lower the
number, the higher the pitch. Numbers roughly translate into musical notes as
shown in the diagram below:</p>
<img alt="_images/speech-pitch.png" src="_images/speech-pitch.png" />
<p>Annotations work by pre-pending a hash (<code class="docutils literal"><span class="pre">#</span></code>) sign and the pitch number in
front of the phoneme. The pitch will remain the same until a new annotation
is given. For example, make MicroPython sing a scale like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">solfa</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;#115DOWWWWWW&quot;</span><span class="p">,</span>   <span class="c1"># Doh</span>
    <span class="s2">&quot;#103REYYYYYY&quot;</span><span class="p">,</span>   <span class="c1"># Re</span>
    <span class="s2">&quot;#94MIYYYYYY&quot;</span><span class="p">,</span>    <span class="c1"># Mi</span>
    <span class="s2">&quot;#88FAOAOAOAOR&quot;</span><span class="p">,</span>  <span class="c1"># Fa</span>
    <span class="s2">&quot;#78SOHWWWWW&quot;</span><span class="p">,</span>    <span class="c1"># Soh</span>
    <span class="s2">&quot;#70LAOAOAOAOR&quot;</span><span class="p">,</span>  <span class="c1"># La</span>
    <span class="s2">&quot;#62TIYYYYYY&quot;</span><span class="p">,</span>    <span class="c1"># Ti</span>
    <span class="s2">&quot;#58DOWWWWWW&quot;</span><span class="p">,</span>    <span class="c1"># Doh</span>
<span class="p">]</span>
<span class="n">song</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">solfa</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">sing</span><span class="p">(</span><span class="n">song</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to sing a note for a certain duration extend the
note by repeating vowel or voiced consonant phonemes (as demonstrated in
the example above). Beware diphthongs - to extend them you need to break them
into their component parts. For example, &#8220;OY&#8221; can be extended with
&#8220;OHOHIYIYIY&#8221;.</p>
<p>Experimentation, listening carefully and adjusting is the only sure way to work
out how many times to repeat a phoneme so the note lasts for the desired
duration.</p>
</div>
<div class="section" id="how-does-it-work">
<h3>How Does it Work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h3>
<p>The original manual explains it well:</p>
<blockquote>
<div><p>First, instead of recording the actual speech waveform, we only store the
frequency spectrums. By doing this, we save memory and pick up other
advantages. Second, we [...] store some data about timing. These are
numbers pertaining to the duration of each phoneme under different
circumstances, and also some data on transition times so we can know how
to blend a phoneme into its neighbors. Third, we devise a system of rules
to deal with all this data and, much to our amazement, our computer is
babbling in no time.</p>
<p class="attribution">&mdash;S.A.M. owner&#8217;s manual.</p>
</div></blockquote>
<p>The output is piped through the functions provided by the <code class="docutils literal"><span class="pre">audio</span></code> module and,
hey presto, we have a talking micro:bit.</p>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">speech</span>
<span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="c1"># The say method attempts to convert English into phonemes.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;I can sing!&quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;Listen to me!&quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Clearing the throat requires the use of phonemes. Changing</span>
<span class="c1"># the pitch and speed also helps create the right effect.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">pronounce</span><span class="p">(</span><span class="s2">&quot;AEAE/HAEMM&quot;</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>  <span class="c1"># Ahem</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Singing requires a phoneme with an annotated pitch for each syllable.</span>
<span class="n">solfa</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;#115DOWWWWWW&quot;</span><span class="p">,</span>   <span class="c1"># Doh</span>
    <span class="s2">&quot;#103REYYYYYY&quot;</span><span class="p">,</span>   <span class="c1"># Re</span>
    <span class="s2">&quot;#94MIYYYYYY&quot;</span><span class="p">,</span>    <span class="c1"># Mi</span>
    <span class="s2">&quot;#88FAOAOAOAOR&quot;</span><span class="p">,</span>  <span class="c1"># Fa</span>
    <span class="s2">&quot;#78SOHWWWWW&quot;</span><span class="p">,</span>    <span class="c1"># Soh</span>
    <span class="s2">&quot;#70LAOAOAOAOR&quot;</span><span class="p">,</span>  <span class="c1"># La</span>
    <span class="s2">&quot;#62TIYYYYYY&quot;</span><span class="p">,</span>    <span class="c1"># Ti</span>
    <span class="s2">&quot;#58DOWWWWWW&quot;</span><span class="p">,</span>    <span class="c1"># Doh</span>
<span class="p">]</span>

<span class="c1"># Sing the scale ascending in pitch.</span>
<span class="n">song</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">solfa</span><span class="p">)</span>
<span class="n">speech</span><span class="o">.</span><span class="n">sing</span><span class="p">(</span><span class="n">song</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="c1"># Reverse the list of syllables.</span>
<span class="n">solfa</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">song</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">solfa</span><span class="p">)</span>
<span class="c1"># Sing the scale descending in pitch.</span>
<span class="n">speech</span><span class="o">.</span><span class="n">sing</span><span class="p">(</span><span class="n">song</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound" id="developer-guide">
<span id="document-devguide/installation"></span><div class="section" id="installation">
<span id="install-dev"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>This section will help you set up the tools and programs needed for
developing programs and firmware to flash to the BBC micro:bit using MicroPython.</p>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="development-environment">
<h3>Development Environment<a class="headerlink" href="#development-environment" title="Permalink to this headline">¶</a></h3>
<p>You will need:</p>
<ul class="simple">
<li>git</li>
<li>yotta</li>
</ul>
<p>Depending on your operating system, the installation instructions vary. Use
the installation scenario that best suits your system.</p>
<p>Yotta will require an ARM mbed account.  It will walk you through signing up
if you are not registered.</p>
</div>
<div class="section" id="installation-scenarios">
<h3>Installation Scenarios<a class="headerlink" href="#installation-scenarios" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="#microbit-windows"><span>Windows</span></a></li>
<li><a class="reference internal" href="#microbit-osx"><span>OS X</span></a></li>
<li><a class="reference internal" href="#microbit-linux"><span>Linux</span></a></li>
<li><a class="reference internal" href="#microbit-debian-ubuntu"><span>Debian and Ubuntu</span></a></li>
<li><a class="reference internal" href="#microbit-redhat"><span>Red Hat Fedora/CentOS</span></a></li>
<li><a class="reference internal" href="#microbit-rpi"><span>Raspberry Pi</span></a></li>
</ul>
<div class="section" id="windows">
<span id="microbit-windows"></span><h4>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h4>
<p>When installing <a class="reference external" href="http://yottadocs.mbed.com/">Yotta</a>, make sure you have these components ticked to install.</p>
<ul class="simple">
<li>python</li>
<li>gcc</li>
<li>cMake</li>
<li>ninja</li>
<li>Yotta</li>
<li>git-scm</li>
<li>mbed serial driver</li>
</ul>
</div>
<div class="section" id="os-x">
<span id="microbit-osx"></span><h4>OS X<a class="headerlink" href="#os-x" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="linux">
<span id="microbit-linux"></span><h4>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h4>
<p>These steps will cover the basic flavors of Linux and working with the
micro:bit and MicroPython. See also the specific sections for Raspberry Pi,
Debian/Ubuntu, and Red Hat Fedora/Centos.</p>
<div class="section" id="debian-and-ubuntu">
<span id="microbit-debian-ubuntu"></span><h5>Debian and Ubuntu<a class="headerlink" href="#debian-and-ubuntu" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre>sudo add-apt-repository -y ppa:team-gcc-arm-embedded
sudo add-apt-repository -y ppa:pmiller-opensource/ppa
sudo apt-get update
sudo apt-get install cmake ninja-build gcc-arm-none-eabi srecord libssl-dev
pip3 install yotta
</pre></div>
</div>
</div>
<div class="section" id="red-hat-fedora-centos">
<span id="microbit-redhat"></span><h5>Red Hat Fedora/CentOS<a class="headerlink" href="#red-hat-fedora-centos" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="raspberry-pi">
<span id="microbit-rpi"></span><h5>Raspberry Pi<a class="headerlink" href="#raspberry-pi" title="Permalink to this headline">¶</a></h5>
</div>
</div>
</div>
<div class="section" id="next-steps">
<span id="id1"></span><h3>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h3>
<p>Congratulations. You have installed your development environment and are ready to
begin <a class="reference internal" href="index.html#flashfirmware"><span>flashing firmware</span></a>  to the micro:bit.</p>
</div>
</div>
<span id="document-devguide/flashfirmware"></span><div class="section" id="flashing-firmware">
<span id="flashfirmware"></span><h2>Flashing Firmware<a class="headerlink" href="#flashing-firmware" title="Permalink to this headline">¶</a></h2>
<div class="section" id="building-firmware">
<h3>Building firmware<a class="headerlink" href="#building-firmware" title="Permalink to this headline">¶</a></h3>
<p>Use yotta to build.</p>
<p>Use target bbc-microbit-classic-gcc-nosd:</p>
<div class="highlight-python"><div class="highlight"><pre>yt target bbc-microbit-classic-gcc-nosd
</pre></div>
</div>
<p>Run yotta update to fetch remote assets:</p>
<div class="highlight-python"><div class="highlight"><pre>yt up
</pre></div>
</div>
<p>Start the build with either yotta:</p>
<div class="highlight-python"><div class="highlight"><pre>yt build
</pre></div>
</div>
<p>...or use the Makefile:</p>
<div class="highlight-python"><div class="highlight"><pre>make all
</pre></div>
</div>
<p>The result is a microbit-micropython hex file (i.e. <code class="docutils literal"><span class="pre">microbit-micropython.hex</span></code>)
found in the build/bbc-microbit-classic-gcc-nosd/source from the root of the
repository.</p>
<p>The Makefile does some extra preprocessing of the source, which is needed only
if you add new interned strings to <code class="docutils literal"><span class="pre">qstrdefsport.h</span></code>. The Makefile also puts
the resulting firmware at build/firmware.hex, and includes some convenience
targets.</p>
</div>
<div class="section" id="preparing-firmware-and-a-python-program">
<h3>Preparing firmware and a Python program<a class="headerlink" href="#preparing-firmware-and-a-python-program" title="Permalink to this headline">¶</a></h3>
<p>tools/makecombined</p>
<p>hexlify</p>
</div>
<div class="section" id="flashing-to-the-micro-bit">
<h3>Flashing to the micro:bit<a class="headerlink" href="#flashing-to-the-micro-bit" title="Permalink to this headline">¶</a></h3>
<p><strong>Installation Scenarios</strong></p>
<ul class="simple">
<li><a class="reference internal" href="index.html#microbit-windows"><span>Windows</span></a></li>
<li><a class="reference internal" href="index.html#microbit-osx"><span>OS X</span></a></li>
<li><a class="reference internal" href="index.html#microbit-linux"><span>Linux</span></a></li>
<li><a class="reference internal" href="index.html#microbit-debian-ubuntu"><span>Debian and Ubuntu</span></a></li>
<li><a class="reference internal" href="index.html#microbit-redhat"><span>Red Hat Fedora/CentOS</span></a></li>
<li><a class="reference internal" href="index.html#microbit-rpi"><span>Raspberry Pi</span></a></li>
</ul>
</div>
</div>
<span id="document-devguide/repl"></span><div class="section" id="accessing-the-repl">
<span id="dev-repl"></span><h2>Accessing the REPL<a class="headerlink" href="#accessing-the-repl" title="Permalink to this headline">¶</a></h2>
<p>Accessing the REPL on the micro:bit requires:</p>
<blockquote>
<div><ul class="simple">
<li>Using a serial communication program</li>
<li>Determining the communication port identifier for the micro:bit</li>
<li>Establishing communication with the correct settings for your computer</li>
</ul>
</div></blockquote>
<p>If you are a Windows user you&#8217;ll need to install the correct drivers. The
instructions for which are found here:</p>
<p><a class="reference external" href="https://developer.mbed.org/handbook/Windows-serial-configuration">https://developer.mbed.org/handbook/Windows-serial-configuration</a></p>
<div class="section" id="serial-communication">
<h3>Serial communication<a class="headerlink" href="#serial-communication" title="Permalink to this headline">¶</a></h3>
<p>To access the REPL, you need to select a program to use for serial communication.
Some common options are <cite>picocom</cite> and <cite>screen</cite>. You will need to install
program and understand the basics of connecting to a device.</p>
</div>
<div class="section" id="determining-port">
<h3>Determining port<a class="headerlink" href="#determining-port" title="Permalink to this headline">¶</a></h3>
<p>The micro:bit will have a port identifier (tty, usb) that can be used by the computer for
communicating. Before connecting to the micro:bit, we must determine the port identifier.</p>
</div>
<div class="section" id="establishing-communication-with-the-micro-bit">
<h3>Establishing communication with the micro:bit<a class="headerlink" href="#establishing-communication-with-the-micro-bit" title="Permalink to this headline">¶</a></h3>
<p>Depending on your operating system, environment, and serial communication program,
the settings and commands will vary a bit. Here are some common settings for different
systems (please suggest additions that might help others)</p>
<p><strong>Settings</strong></p>
<ul class="simple">
<li><a class="reference internal" href="index.html#microbit-windows"><span>Windows</span></a></li>
<li><a class="reference internal" href="index.html#microbit-osx"><span>OS X</span></a></li>
<li><a class="reference internal" href="index.html#microbit-linux"><span>Linux</span></a></li>
<li><a class="reference internal" href="index.html#microbit-debian-ubuntu"><span>Debian and Ubuntu</span></a></li>
<li><a class="reference internal" href="index.html#microbit-redhat"><span>Red Hat Fedora/CentOS</span></a></li>
<li><a class="reference internal" href="index.html#microbit-rpi"><span>Raspberry Pi</span></a></li>
</ul>
</div>
</div>
<span id="document-devguide/devfaq"></span><div class="section" id="developer-faq">
<span id="devfaq"></span><h2>Developer FAQ<a class="headerlink" href="#developer-faq" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This project is under active development. Please help other
developers by adding tips, how-tos, and Q&amp;A to this document.
Thanks!</p>
</div>
<p>Where do I get a copy of the DAL? A: Ask Nicholas Tollervey for details.</p>
</div>
<span id="document-devguide/contributing"></span><div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>Hey! Many thanks for wanting to improve MicroPython on the micro:bit.</p>
<p>Contributions are welcome without prejudice from <em>anyone</em> irrespective of
age, gender, religion, race or sexuality. Good quality code and engagement
with respect, humour and intelligence wins every time.</p>
<ul class="simple">
<li>If you&#8217;re from a background which isn&#8217;t well-represented in most geeky groups, get involved - <em>we want to help you make a difference</em>.</li>
<li>If you&#8217;re from a background which <em>is</em> well-represented in most geeky groups, get involved - <em>we want your help making a difference</em>.</li>
<li>If you&#8217;re worried about not being technical enough, get involved - <em>your fresh perspective will be invaluable</em>.</li>
<li>If you think you&#8217;re an imposter, get involved.</li>
<li>If your day job isn&#8217;t code, get involved.</li>
<li>This isn&#8217;t a group of experts, just people. Get involved!</li>
<li>This is a new community, so, get involved.</li>
</ul>
<p>We expect contributors to follow the Python Software Foundation&#8217;s Code of
Conduct: <a class="reference external" href="https://www.python.org/psf/codeofconduct/">https://www.python.org/psf/codeofconduct/</a></p>
<p>Feedback may be given for contributions and, where necessary, changes will
be politely requested and discussed with the originating author. Respectful
yet robust argument is most welcome.</p>
<div class="section" id="checklist">
<h3>Checklist<a class="headerlink" href="#checklist" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Your code should be commented in <em>plain English</em> (British spelling).</li>
<li>If your contribution is for a major block of work and you&#8217;ve not done so
already, add yourself to the AUTHORS file following the convention found
therein.</li>
<li>If in doubt, ask a question. The only stupid question is the one that&#8217;s never asked.</li>
<li>Have fun!</li>
</ul>
</div>
</div>
</div>
<div class="toctree-wrapper compound" id="indices-and-tables">
</div>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span>Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span>Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span>Search Page</span></a></li>
</ul>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2016, Multiple authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>